import{a4 as m,d as X,aE as Z,r as d,X as G,b as H,D as n,E as p,g as e,J as t,S as r,V as P,K as h,I as f,N as b,Q as W,Z as x,aD as Y,F as ee}from"./index-IqAyBUFz.js";import{C as te,_ as oe,a as ae,d as ne}from"./index-BQ3_W2Pc.js";import{I as se,_ as le,B as re,F as ie}from"./index-BfAzQfmA.js";import{I as ce}from"./index-B4vogz0T.js";import{T as _e}from"./index-CACWhT98.js";import{S as ue,D as me}from"./DeleteOutlined-DP3XfjVS.js";import{E as de}from"./EditOutlined-bJl5FWjX.js";import{_ as pe,a as fe,b as ge}from"./index-BBOJsD1f.js";import{_ as ye}from"./index-Dan6CQD5.js";import"./index-De3Of2Ge.js";import"./index-BHbT9wMi.js";import"./EllipsisOutlined-BaLFo8dl.js";import"./ActionButton-DZ5hkenF.js";import"./PlusOutlined-7NibwXej.js";import"./FolderOutlined-BPJx_bHq.js";const V={getList:a=>m({method:"get",url:"form/list",params:a}),getDetail:a=>m({method:"get",url:"form/detail",params:{id:a}}),remove:a=>m({method:"get",url:"form/remove",params:{id:a}}),add:a=>m({method:"post",url:"form/add",data:a}),update:a=>m({method:"post",url:"form/update",data:a}),getTemplate:a=>m({method:"get",url:"/form/template",params:{id:a}})},ke={class:"table"},ve={class:"tools"},he={key:1},be={key:0,class:"contain"},xe=X({__name:"TableList",setup(a){const C=Z(),O=d([{title:"表格名称",key:"name",dataIndex:"name"},{title:"预览图",key:"img",dataIndex:"img",width:150},{title:"状态",key:"status",dataIndex:"status",width:100},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"备注",key:"description",dataIndex:"description"},{title:"操作",key:"action",dataIndex:"action"}]),i=G({keyword:"",pageNumber:1,pageSize:10}),g=d([]),w=d(0),I=d(!1),T=d(),S=()=>{var s;(s=T.value)==null||s.resetFields(),k()},y=d("table"),$=()=>{y.value=="table"?y.value="visual":y.value="table"},k=()=>{I.value=!0,V.getList(i).then(s=>{const{code:l,data:c}=s;l==200&&(g.value=c.data,w.value=c.total),I.value=!1})},R=()=>{C.push({path:"/low-code/table"})},F=s=>{C.push({path:"/low-code/table",query:{id:s}})},N=s=>{V.remove(s).then(l=>{const{code:c}=l;c==200&&k()})};return H(()=>{k()}),(s,l)=>{const c=se,q=le,D=oe,_=re,J=ae,U=ie,v=te,j=Y,B=ce,E=pe,z=ne,L=_e,A=ye,K=fe,M=ge;return n(),p("div",ke,[e(v,{class:"search-area"},{default:t(()=>[e(U,{ref_key:"searchFormRef",ref:T,model:i,onFinish:k},{default:t(()=>[e(J,{gutter:24},{default:t(()=>[e(D,{span:4},{default:t(()=>[e(q,{label:"表格名称",name:"keyword"},{default:t(()=>[e(c,{value:i.keyword,"onUpdate:value":l[0]||(l[0]=o=>i.keyword=o)},null,8,["value"])]),_:1})]),_:1}),e(D,{span:4,style:{"text-align":"right"}},{default:t(()=>[e(_,{type:"primary","html-type":"submit"},{default:t(()=>[r("搜索")]),_:1}),e(_,{style:{margin:"0 8px"},onClick:S},{default:t(()=>[r(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(v,null,{default:t(()=>[P("div",ve,[e(_,{type:"primary",onClick:R},{default:t(()=>[r("新增")]),_:1}),e(_,{onClick:$,type:"link",style:{float:"right"}},{default:t(()=>[e(h(ue))]),_:1})]),g.value.length===0?(n(),f(j,{key:0})):(n(),p("div",he,[y.value=="visual"?(n(),p("div",be,[(n(!0),p(b,null,W(g.value,o=>(n(),f(v,{hoverable:!0,key:o.id},{cover:t(()=>[e(B,{src:o.img,height:"130px"},null,8,["src"])]),actions:t(()=>[e(h(de),{key:"edit",title:"编辑",onClick:u=>F(o.id)},null,8,["onClick"]),e(E,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:u=>N(o.id)},{default:t(()=>[e(h(me),{key:"delete",title:"删除"})]),_:2},1032,["onConfirm"])]),default:t(()=>[e(z,{title:o.name,description:o.description},null,8,["title","description"])]),_:2},1024))),128))])):(n(),f(K,{key:1,columns:O.value,"data-source":g.value,pagination:!1,scroll:{y:470}},{bodyCell:t(({column:o,record:u})=>[o.key=="status"?(n(),p(b,{key:0},[u.status?(n(),f(L,{key:0,color:"#87d068"},{default:t(()=>[r("启用")]),_:1})):(n(),f(L,{key:1,color:"#f50"},{default:t(()=>[r("停用")]),_:1}))],64)):x("",!0),o.key=="action"?(n(),p(b,{key:1},[e(_,{type:"link",onClick:Q=>F(u.id)},{default:t(()=>[r("编辑")]),_:2},1032,["onClick"]),e(A,{type:"vertical"}),e(E,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:Q=>N(u.id)},{default:t(()=>[e(_,{type:"link",danger:""},{default:t(()=>[r("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):x("",!0),o.key=="img"?(n(),f(B,{key:2,src:u.img,height:"100px",width:"100%"},null,8,["src"])):x("",!0)]),_:1},8,["columns","data-source"]))])),e(M,{style:{display:"flex","justify-content":"flex-end"},current:i.pageNumber,"onUpdate:current":l[1]||(l[1]=o=>i.pageNumber=o),total:w.value,"show-less-items":""},null,8,["current","total"])]),_:1})])}}}),qe=ee(xe,[["__scopeId","data-v-4340cbac"]]);export{qe as default};
