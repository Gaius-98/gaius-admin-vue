import{g as M,H as U,I as N,t as O,L as c,o as s,h as i,w as p,Y as r,q as R,l as _,i as m,b2 as y,b3 as $,J as K,ag as j,$ as q,T as z,a1 as A,a5 as F}from"./.pnpm-CCsI2FsW.js";import{_ as H}from"./index-BCWsrkZE.js";const J={key:2,style:{display:"flex"}},L=M({__name:"EditTable",props:U({columns:{},action:{type:Boolean,default:!0},height:{default:150}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(v){const u=N(v,"modelValue");let C=v;const{columns:o,action:I}=O(C),b=c(()=>x("input")),g=c(()=>x("select")),k=c(()=>I.value?[...o.value,{title:"操作",dataIndex:"_action_"}]:o.value),h=t=>{var e;return((e=o.value.find(d=>d.dataIndex==t))==null?void 0:e.options)||[]},x=t=>o.value.filter(e=>e.type==t).map(e=>e.dataIndex),f=()=>{let t={};o.value.map(e=>{Reflect.set(t,e.dataIndex,"")}),u.value.push(t)},B=t=>{u.value.splice(t,1)};return(t,e)=>{const d=q,T=z,V=A,w=F;return s(),i(w,{columns:k.value,"data-source":u.value,pagination:!1,rowKey:(a,n)=>n,size:"small",scroll:{y:t.height}},{bodyCell:p(({column:a,record:n,index:E})=>[b.value.includes(a.dataIndex)?(s(),i(d,{key:0,value:n[a.dataIndex],"onUpdate:value":l=>n[a.dataIndex]=l},null,8,["value","onUpdate:value"])):r("",!0),g.value.includes(a.dataIndex)?(s(),i(T,{key:1,value:n[a.dataIndex],"onUpdate:value":l=>n[a.dataIndex]=l,options:h(a.dataIndex)},null,8,["value","onUpdate:value","options"])):r("",!0),a.dataIndex=="_action_"?(s(),R("div",J,[_(m(y),{class:"icon",onClick:e[0]||(e[0]=l=>f())}),_(m($),{class:"icon",onClick:l=>B(E)},null,8,["onClick"])])):r("",!0)]),emptyText:p(()=>[_(V,{type:"text",onClick:f,icon:j(m(y))},{default:p(()=>[K(" 新增数据")]),_:1},8,["icon"])]),_:1},8,["columns","data-source","rowKey","scroll"])}}}),D=H(L,[["__scopeId","data-v-5b9e8dbe"]]);export{D as E};
