import{P as y,M as E}from"./PlusCircleOutlined-CJtyPPy7.js";import{I as O}from"./index-C7Oarqri.js";import{S as w}from"./index-CJzHeZVH.js";import{d as N,a7 as R,a8 as K,ak as P,t as c,J as s,U as i,M as r,a3 as p,L as S,g as m,Q as _,O as $,aa as j,Z as z,a6 as A}from"./index-Det_Lkiz.js";import{_ as F}from"./index-pL7j-0zI.js";const J={key:2,style:{display:"flex"}},L=N({__name:"EditTable",props:R({columns:{},action:{type:Boolean,default:!0},height:{default:150}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(v){const u=K(v,"modelValue");let C=v;const{columns:o,action:I}=P(C),k=c(()=>f("input")),b=c(()=>f("select")),g=c(()=>I.value?[...o.value,{title:"操作",dataIndex:"_action_"}]:o.value),h=e=>{var t;return((t=o.value.find(d=>d.dataIndex==e))==null?void 0:t.options)||[]},f=e=>o.value.filter(t=>t.type==e).map(t=>t.dataIndex),x=()=>{let e={};o.value.map(t=>{Reflect.set(e,t.dataIndex,"")}),console.log(e),u.value.push(e)},B=e=>{u.value.splice(e,1)};return(e,t)=>{const d=O,M=w,V=z,T=F;return s(),i(T,{columns:g.value,"data-source":u.value,pagination:!1,rowKey:(a,n)=>n,size:"small",scroll:{y:e.height}},{bodyCell:r(({column:a,record:n,index:U})=>[k.value.includes(a.dataIndex)?(s(),i(d,{key:0,value:n[a.dataIndex],"onUpdate:value":l=>n[a.dataIndex]=l},null,8,["value","onUpdate:value"])):p("",!0),b.value.includes(a.dataIndex)?(s(),i(M,{key:1,value:n[a.dataIndex],"onUpdate:value":l=>n[a.dataIndex]=l,options:h(a.dataIndex)},null,8,["value","onUpdate:value","options"])):p("",!0),a.dataIndex=="_action_"?(s(),S("div",J,[m(_(y),{class:"icon",onClick:t[0]||(t[0]=l=>x())}),m(_(E),{class:"icon",onClick:l=>B(U)},null,8,["onClick"])])):p("",!0)]),emptyText:r(()=>[m(V,{type:"text",onClick:x,icon:j(_(y))},{default:r(()=>[$(" 新增数据")]),_:1},8,["icon"])]),_:1},8,["columns","data-source","rowKey","scroll"])}}}),H=A(L,[["__scopeId","data-v-5b9e8dbe"]]);export{H as E};
