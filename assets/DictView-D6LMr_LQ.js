import{d as I}from"./dict-DtRMX_j4.js";import{d as W,u as me,h as z,e as c,w as _e,j as fe,_ as P,a7 as ye,k as e,Z as q,l as Y,P as ee,a8 as te,b as ge,a2 as be,B as Te,N as U,O as M,V as a,a3 as ae,a0 as m,a4 as ke,U as le,a5 as ne,W as oe,Q as xe}from"./index-xb1aHgXp.js";import{C as Ce,M as De,_ as we,a as Ne}from"./index-CmK0okCR.js";import{P as Se}from"./PlusOutlined-CTQG2fH0.js";import{u as $e,e as Ie,C as Q,I as ze,_ as Fe,B as Oe,F as Ue}from"./index-BQiapOAt.js";import{S as he,T as Be,_ as Re,R as Ae}from"./index-C5dMdDsH.js";import{_ as Ve,a as je,b as Pe}from"./index-BF1v0Osv.js";import{I as Ge}from"./index-DwaSg6lu.js";import"./FolderOutlined-C7x8XhRg.js";import"./RightOutlined-Zdfu2Cgw.js";const Ee={small:8,middle:16,large:24},Le=()=>({prefixCls:String,size:{type:[String,Number,Array]},direction:ee.oneOf(te("horizontal","vertical")).def("horizontal"),align:ee.oneOf(te("start","end","center","baseline")),wrap:ge()});function Me(u){return typeof u=="string"?Ee[u]:u||0}const h=W({compatConfig:{MODE:3},name:"ASpace",inheritAttrs:!1,props:Le(),slots:Object,setup(u,G){let{slots:r,attrs:D}=G;const{prefixCls:y,space:b,direction:F}=me("space",u),[E,B]=$e(y),g=Ie(),p=z(()=>{var d,_,k;return(k=(d=u.size)!==null&&d!==void 0?d:(_=b==null?void 0:b.value)===null||_===void 0?void 0:_.size)!==null&&k!==void 0?k:"small"}),w=c(),v=c();_e(p,()=>{[w.value,v.value]=(Array.isArray(p.value)?p.value:[p.value,p.value]).map(d=>Me(d))},{immediate:!0});const n=z(()=>u.align===void 0&&u.direction==="horizontal"?"center":u.align),T=z(()=>fe(y.value,B.value,`${y.value}-${u.direction}`,{[`${y.value}-rtl`]:F.value==="rtl",[`${y.value}-align-${n.value}`]:n.value})),L=z(()=>F.value==="rtl"?"marginLeft":"marginRight"),R=z(()=>{const d={};return g.value&&(d.columnGap=`${w.value}px`,d.rowGap=`${v.value}px`),P(P({},d),u.wrap&&{flexWrap:"wrap",marginBottom:`${-v.value}px`})});return()=>{var d,_;const{wrap:k,direction:A="horizontal"}=u,V=(d=r.default)===null||d===void 0?void 0:d.call(r),f=ye(V),N=f.length;if(N===0)return null;const S=(_=r.split)===null||_===void 0?void 0:_.call(r),j=`${y.value}-item`,l=w.value,t=N-1;return e("div",Y(Y({},D),{},{class:[T.value,D.class],style:[R.value,D.style]}),[f.map((s,i)=>{let x=V.indexOf(s);x===-1&&(x=`$$space-${i}`);let C={};return g.value||(A==="vertical"?i<t&&(C={marginBottom:`${l/(S?2:1)}px`}):C=P(P({},i<t&&{[L.value]:`${l/(S?2:1)}px`}),k&&{paddingBottom:`${v.value}px`})),E(e(q,{key:x},[e("div",{class:j,style:C},[s]),i<t&&S&&e("span",{class:`${j}-split`,style:C},[S])]))})])}}});h.Compact=Q;h.install=function(u){return u.component(h.name,h),u.component(Q.name,Q),u};const We={class:"dict"},qe={class:"tools"},Qe=W({__name:"DictView",setup(u){const G=W({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),r=be({keyword:"",dictType:"",pageNumber:1,pageSize:10}),D=c([]),y=c([{title:"归属字典",key:"dictTypeDesc",dataIndex:"dictTypeDesc"},{title:"字典描述",key:"label",dataIndex:"label"},{title:"字典值",key:"value",dataIndex:"value"},{title:"状态",key:"status",dataIndex:"status"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),b=c(!1),F=c(),E=()=>{var l;(l=F.value)==null||l.resetFields(),g()},B=c(0),g=()=>{b.value=!0,I.getList(r).then(l=>{const{code:t,data:s}=l;t==200&&(D.value=s.data,B.value=s.total),b.value=!1})},p=c([]),w=async()=>{const{code:l,data:t,msg:s}=await I.getDictTypeList();l==200&&(p.value=t)};Te(()=>{g(),w()});const v=c(!1),n=c({label:"",value:"",dictType:"",dictTypeDesc:"",sortNum:0}),T=c("add"),L=z(()=>({add:"新增字典",edit:"编辑字典"})[T.value]),R=c(),d=()=>{T.value="add",v.value=!0,n.value={label:"",value:"",dictType:"",dictTypeDesc:"",sortNum:0}},_=async l=>{const{code:t,data:s}=await I.getDetail(l.id);t==200&&(n.value=s,T.value="edit",v.value=!0)},k=async l=>{const{code:t,msg:s,data:i}=await I.remove(l.id);t==200&&(ae.success(i),g())},A=()=>{var l;(l=R.value)==null||l.resetFields()},V=()=>{let l;T.value=="add"?l=I.add:l=I.update,l(n.value).then(t=>{const{code:s}=t;s==200&&(ae.success(T.value=="add"?"新增成功":"编辑成功"),g(),w(),N.value=[]),A(),v.value=!1})},f=c(""),N=c([]),S=l=>{l.preventDefault(),p.value.push({dictType:f.value,dictTypeDesc:f.value}),N.value.push(f.value),f.value=""},j=()=>{n.value.dictTypeDesc=p.value.find(l=>l.dictType==n.value.dictType).dictTypeDesc};return(l,t)=>{const s=ze,i=Fe,x=we,C=he,$=Oe,se=Ne,Z=Ue,H=Ce,J=Be,K=Ve,ue=je,ie=Pe,de=h,ce=Ge,X=Re,re=Ae,pe=De;return U(),M("div",We,[e(H,{class:"search-area"},{default:a(()=>[e(Z,{ref_key:"searchFormRef",ref:F,model:r,onFinish:g},{default:a(()=>[e(se,{gutter:24},{default:a(()=>[e(x,{span:4},{default:a(()=>[e(i,{label:"字典描述",name:"keyword"},{default:a(()=>[e(s,{value:r.keyword,"onUpdate:value":t[0]||(t[0]=o=>r.keyword=o)},null,8,["value"])]),_:1})]),_:1}),e(x,{span:4},{default:a(()=>[e(i,{label:"归属字典",name:"dictType"},{default:a(()=>[e(C,{value:r.dictType,"onUpdate:value":t[1]||(t[1]=o=>r.dictType=o),fieldNames:{label:"dictTypeDesc",value:"dictType"},allowClear:"",options:p.value},null,8,["value","options"])]),_:1})]),_:1}),e(x,{span:4,style:{"text-align":"right"}},{default:a(()=>[e($,{type:"primary","html-type":"submit"},{default:a(()=>[m("搜索")]),_:1}),e($,{style:{margin:"0 8px"},onClick:E},{default:a(()=>[m(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(H,null,{default:a(()=>[ke("div",qe,[e($,{type:"primary",onClick:d},{default:a(()=>[m("新增")]),_:1})]),e(ie,{loading:b.value,columns:y.value,"data-source":D.value,pagination:{current:r.pageNumber,total:B.value}},{bodyCell:a(({column:o,record:O})=>[o.key=="status"?(U(),M(q,{key:0},[O.status?(U(),le(J,{key:0,color:"#87d068"},{default:a(()=>[m("启用")]),_:1})):(U(),le(J,{key:1,color:"#f50"},{default:a(()=>[m("停用")]),_:1}))],64)):ne("",!0),o.key=="action"?(U(),M(q,{key:1},[e($,{type:"link",onClick:ve=>_(O)},{default:a(()=>[m("编辑")]),_:2},1032,["onClick"]),e(K,{type:"vertical"}),e(ue,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:ve=>k(O)},{default:a(()=>[e($,{type:"link",danger:""},{default:a(()=>[m("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):ne("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1}),e(pe,{open:v.value,"onUpdate:open":t[10]||(t[10]=o=>v.value=o),onOk:V,title:L.value,onCancel:A},{default:a(()=>[e(Z,{model:n.value,"label-col":{span:8},ref_key:"modalFormRef",ref:R},{default:a(()=>[e(i,{label:"字典类型"},{default:a(()=>[e(C,{value:n.value.dictType,"onUpdate:value":t[3]||(t[3]=o=>n.value.dictType=o),fieldNames:{label:"dictType",value:"dictType"},options:p.value,onChange:j},{dropdownRender:a(({menuNode:o})=>[e(oe(G),{vnodes:o},null,8,["vnodes"]),e(K,{style:{margin:"4px 0"}}),e(de,{style:{padding:"4px 8px"}},{default:a(()=>[e(s,{ref:"inputRef",value:f.value,"onUpdate:value":t[2]||(t[2]=O=>f.value=O),placeholder:"请输入字典类型"},null,8,["value"]),e($,{type:"text",onClick:S},{icon:a(()=>[e(oe(Se))]),default:a(()=>[m(" 增加类型 ")]),_:1})]),_:1})]),_:1},8,["value","options"])]),_:1}),e(i,{label:"字典类型描述"},{default:a(()=>[e(s,{value:n.value.dictTypeDesc,"onUpdate:value":t[4]||(t[4]=o=>n.value.dictTypeDesc=o),disabled:!N.value.includes(n.value.dictType)},null,8,["value","disabled"])]),_:1}),e(i,{label:"字典描述"},{default:a(()=>[e(s,{value:n.value.label,"onUpdate:value":t[5]||(t[5]=o=>n.value.label=o)},null,8,["value"])]),_:1}),e(i,{label:"字典值"},{default:a(()=>[e(s,{value:n.value.value,"onUpdate:value":t[6]||(t[6]=o=>n.value.value=o)},null,8,["value"])]),_:1}),e(i,{label:"排序号"},{default:a(()=>[e(ce,{value:n.value.sortNum,"onUpdate:value":t[7]||(t[7]=o=>n.value.sortNum=o)},null,8,["value"])]),_:1}),e(i,{label:"状态"},{default:a(()=>[e(re,{value:n.value.status,"onUpdate:value":t[8]||(t[8]=o=>n.value.status=o),"button-style":"solid"},{default:a(()=>[e(X,{value:1},{default:a(()=>[m("启用 ")]),_:1}),e(X,{value:0},{default:a(()=>[m("停用 ")]),_:1})]),_:1},8,["value"])]),_:1}),e(i,{label:"描述"},{default:a(()=>[e(s,{type:"textarea",value:n.value.desc,"onUpdate:value":t[9]||(t[9]=o=>n.value.desc=o)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),nt=xe(Qe,[["__scopeId","data-v-7051c37f"]]);export{nt as default};
