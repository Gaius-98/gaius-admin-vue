import{d as P,$ as T,r as l,b as M,J as d,L as q,g as e,M as a,af as f,O as p,a2 as E,U as x,Q as J,a3 as C,a0 as b,a4 as O,Z as Q,a5 as Z,ag as j,ah as A,a6 as G}from"./index-BpUqFkTU.js";import{C as H,_ as K,a as W}from"./index-CizJUJGy.js";import{I as X}from"./index-BTySQpdJ.js";import{_ as Y}from"./index-B1MXXAvU.js";import{_ as ee}from"./index-CkRLXISV.js";import"./index-BJe9TwaE.js";import"./index-Cz9sCY-M.js";import"./EllipsisOutlined-Dh84clB6.js";import"./index-BxD2BrFi.js";import"./index--CIbWw6l.js";import"./index-Dg8i_k8U.js";import"./FolderOutlined-25rSkDFs.js";import"./useBreakpoint-CTe6NnWW.js";import"./index-BXoXM2k-.js";const ae={class:"resource"},te={class:"tools"},oe=P({__name:"ResourceView",setup(ne){const n=T({keyword:"",pageNumber:1,pageSize:10}),g=l([]),w=l([{title:"文件名称",key:"originalname",dataIndex:"originalname"},{title:"文件大小",key:"size",dataIndex:"size"},{title:"文件",key:"path",dataIndex:"path",width:"250px"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),m=l(!1),y=l(),I="/prod",N=()=>{var t;(t=y.value)==null||t.resetFields(),c()},h=l(0),F=()=>{n.pageNumber=1,n.pageSize=10,c()},z=t=>{const{current:o,pageSize:s}=t;n.pageNumber=o,n.pageSize=s,c()},R=t=>{const o=new FormData;o.append("file",t.file,encodeURIComponent(t.file.name)),f.add(o).then(s=>{const{code:i,data:u,msg:r}=s;i==200&&b.success(r),c()})},c=()=>{m.value=!0,f.getList(n).then(t=>{const{code:o,data:s}=t;o==200&&(g.value=s.data,h.value=s.total),m.value=!1})};M(()=>{c()});const V=async t=>{const{code:o,msg:s,data:i}=await f.remove(t.id);o==200&&(b.success(i),c())};return(t,o)=>{const s=X,i=O,u=K,r=Q,$=W,B=Z,k=H,S=j,U=A,L=Y,D=ee;return d(),q("div",ae,[e(k,{class:"search-area"},{default:a(()=>[e(B,{ref_key:"searchFormRef",ref:y,model:n,onFinish:F},{default:a(()=>[e($,{gutter:24},{default:a(()=>[e(u,{span:4},{default:a(()=>[e(i,{label:"资源名称",name:"keyword"},{default:a(()=>[e(s,{value:n.keyword,"onUpdate:value":o[0]||(o[0]=_=>n.keyword=_)},null,8,["value"])]),_:1})]),_:1}),e(u,{span:4,style:{"text-align":"right"}},{default:a(()=>[e(r,{type:"primary","html-type":"submit"},{default:a(()=>[p("搜索")]),_:1}),e(r,{style:{margin:"0 8px"},onClick:N},{default:a(()=>[p(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(k,null,{default:a(()=>[E("div",te,[e(S,{name:"file",accept:"image/*",customRequest:R,maxCount:"1",showUploadList:!1},{default:a(()=>[e(r,{type:"primary"},{default:a(()=>[p(" 上传")]),_:1})]),_:1})]),e(D,{loading:m.value,columns:w.value,"data-source":g.value,scroll:{y:440},onChange:z,pagination:{current:n.pageNumber,total:h.value}},{bodyCell:a(({column:_,record:v})=>[_.key=="path"?(d(),x(U,{key:0,src:`${J(I)}/${v.path}`,height:"130px"},null,8,["src"])):C("",!0),_.key=="action"?(d(),x(L,{key:1,title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:se=>V(v)},{default:a(()=>[e(r,{type:"link",danger:""},{default:a(()=>[p("删除")]),_:1})]),_:2},1032,["onConfirm"])):C("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})])}}}),ve=G(oe,[["__scopeId","data-v-ae71c595"]]);export{ve as default};
