import{a as d,_ as P}from"./resource-Cw8tjqs5.js";import{C as T}from"./ActionButton-BURE71X2.js";import{d as E,Y as q,r as l,b as J,D as f,E as K,g as e,J as t,W as m,$ as M,I as x,K as W,a0 as C,Z as b,F as Y}from"./index-Pu50Ti4l.js";import{I as Z,_ as j,B as A,F as G}from"./index-cHQbFAze.js";import{I as H}from"./index-DY3D6ad7.js";import{_ as O,a as Q}from"./index-BypFAKRh.js";import{_ as X}from"./index-iF9kPiNd.js";import{_ as ee}from"./index-BX5_ivGM.js";import"./index-8G3Ipt2F.js";import"./FileTwoTone-DCkl6VB1.js";import"./DeleteOutlined-CW7SST1s.js";import"./DownloadOutlined-Eeal0G7M.js";import"./index-DKIsZd3t.js";import"./PlusOutlined-ikZ1FGXJ.js";import"./FolderOutlined-CI8h7Ti8.js";import"./SwapOutlined-DN0C7leB.js";const te={class:"resource"},ae={class:"tools"},oe=E({__name:"ResourceView",setup(ne){const n=q({keyword:"",pageNumber:1,pageSize:10}),g=l([]),w=l([{title:"文件名称",key:"originalname",dataIndex:"originalname"},{title:"文件大小",key:"size",dataIndex:"size"},{title:"文件",key:"path",dataIndex:"path",width:"250px"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),p=l(!1),y=l(),I="/prod",F=()=>{var a;(a=y.value)==null||a.resetFields(),c()},h=l(0),N=()=>{n.pageNumber=1,n.pageSize=10,c()},z=a=>{const{current:o,pageSize:s}=a;n.pageNumber=o,n.pageSize=s,c()},B=a=>{const o=new FormData;o.append("file",a.file,encodeURIComponent(a.file.name)),d.add(o).then(s=>{const{code:i,data:u,msg:r}=s;i==200&&b.success(r),c()})},c=()=>{p.value=!0,d.getList(n).then(a=>{const{code:o,data:s}=a;o==200&&(g.value=s.data,h.value=s.total),p.value=!1})};J(()=>{c()});const R=async a=>{const{code:o,msg:s,data:i}=await d.remove(a.id);o==200&&(b.success(i),c())};return(a,o)=>{const s=Z,i=j,u=O,r=A,V=Q,S=G,k=T,$=P,D=H,U=X,L=ee;return f(),K("div",te,[e(k,{class:"search-area"},{default:t(()=>[e(S,{ref_key:"searchFormRef",ref:y,model:n,onFinish:N},{default:t(()=>[e(V,{gutter:24},{default:t(()=>[e(u,{span:4},{default:t(()=>[e(i,{label:"资源名称",name:"keyword"},{default:t(()=>[e(s,{value:n.keyword,"onUpdate:value":o[0]||(o[0]=_=>n.keyword=_)},null,8,["value"])]),_:1})]),_:1}),e(u,{span:4,style:{"text-align":"right"}},{default:t(()=>[e(r,{type:"primary","html-type":"submit"},{default:t(()=>[m("搜索")]),_:1}),e(r,{style:{margin:"0 8px"},onClick:F},{default:t(()=>[m(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(k,null,{default:t(()=>[M("div",ae,[e($,{name:"file",accept:"image/*",customRequest:B,maxCount:"1",showUploadList:!1},{default:t(()=>[e(r,{type:"primary"},{default:t(()=>[m(" 上传")]),_:1})]),_:1})]),e(L,{loading:p.value,columns:w.value,"data-source":g.value,scroll:{y:440},onChange:z,pagination:{current:n.pageNumber,total:h.value}},{bodyCell:t(({column:_,record:v})=>[_.key=="path"?(f(),x(D,{key:0,src:`${W(I)}/${v.path}`,height:"130px"},null,8,["src"])):C("",!0),_.key=="action"?(f(),x(U,{key:1,title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:se=>R(v)},{default:t(()=>[e(r,{type:"link",danger:""},{default:t(()=>[m("删除")]),_:1})]),_:2},1032,["onConfirm"])):C("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})])}}}),Ce=Y(oe,[["__scopeId","data-v-ae71c595"]]);export{Ce as default};
