import{d as Y,$ as ee,r,b as R,t as ae,J as p,L as C,g as e,M as t,ab as _,a0 as V,a1 as te,O as i,a2 as oe,U as I,X as le,a3 as y,R as B,ac as ne,a4 as se,Z as ue,a5 as re,a6 as de}from"./index-Dpd769QJ.js";import{C as ie,_ as me,a as pe}from"./index-Kf33GTI6.js";import{I as _e,_ as ce}from"./index-PSRKKzv7.js";import{T as ve}from"./index-Ce6Cv3cf.js";import{S as fe}from"./index-aqndV6Qt.js";import{_ as ge}from"./index-efGdvrSx.js";import{_ as ye}from"./index-CNJw_k8e.js";import{_ as ke}from"./index-BmOe8Cqg.js";import"./index-CKZARt0z.js";import"./EllipsisOutlined-CD4Jj4Qr.js";import"./index-DKghCm3h.js";import"./index-C5n_QDDt.js";import"./index-CHG5UCnH.js";import"./FolderOutlined-BTwGGdoc.js";import"./useBreakpoint-B5wx1Mqz.js";import"./index-C9AoIfC_.js";const be={class:"user"},Ce={class:"tools"},Ie=Y({__name:"UserView",setup(we){const d=ee({keyword:"",pageNumber:1,pageSize:10}),w=r([]),$=r([{title:"用户名",key:"username",dataIndex:"username"},{title:"名称",key:"name",dataIndex:"name"},{title:"邮箱",key:"email",dataIndex:"email"},{title:"角色",key:"roleId",dataIndex:"roleId"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),k=r(!1),x=r(),z=()=>{var o;(o=x.value)==null||o.resetFields(),m()},F=r(0),L=()=>{d.pageNumber=1,d.pageSize=10,m()},M=o=>{const{current:a,pageSize:s}=o;d.pageNumber=a,d.pageSize=s,m()},m=()=>{k.value=!0,_.getList(d).then(o=>{const{code:a,data:s}=o;a==200&&(w.value=s.data,F.value=s.total),k.value=!1})};R(()=>{m()});const c=r(!1),n=r({username:"",name:"",password:"",email:"",avatar:"",roleId:""}),v=r("add"),P=ae(()=>({add:"新增用户",edit:"编辑用户"})[v.value]),U=r(),j=()=>{v.value="add",c.value=!0,n.value={username:"",name:"",password:"",email:"",avatar:"",roleId:""}},E=async o=>{const{code:a,data:s}=await _.getDetail(o.username);a==200&&(n.value=s,v.value="edit",c.value=!0)},h=async o=>{const{code:a,msg:s,data:u}=await _.remove(o.username);a==200&&(V.success(u),m())},N=()=>{var o;(o=U.value)==null||o.resetFields()},A=()=>{let o;v.value=="add"?o=_.add:o=_.update,o(n.value).then(a=>{const{code:s}=a;s==200&&(V.success(v.value=="add"?"新增成功":"编辑成功"),m()),N(),c.value=!1})},T=r([]),J=()=>{_.getRoleDict().then(o=>{const{code:a,data:s,msg:u}=o;a==200&&(T.value=s)})};return R(()=>{J()}),(o,a)=>{const s=_e,u=se,D=me,f=ue,X=pe,S=re,O=ie,b=ve,Z=ge,q=ye,G=ke,H=ce,K=fe,Q=te;return p(),C("div",be,[e(O,{class:"search-area"},{default:t(()=>[e(S,{ref_key:"searchFormRef",ref:x,model:d,onFinish:L},{default:t(()=>[e(X,{gutter:24},{default:t(()=>[e(D,{span:4},{default:t(()=>[e(u,{label:"用户名",name:"keyword"},{default:t(()=>[e(s,{value:d.keyword,"onUpdate:value":a[0]||(a[0]=l=>d.keyword=l)},null,8,["value"])]),_:1})]),_:1}),e(D,{span:4,style:{"text-align":"right"}},{default:t(()=>[e(f,{type:"primary","html-type":"submit"},{default:t(()=>[i("搜索")]),_:1}),e(f,{style:{margin:"0 8px"},onClick:z},{default:t(()=>[i(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(O,null,{default:t(()=>[oe("div",Ce,[e(f,{type:"primary",onClick:j},{default:t(()=>[i("新增")]),_:1})]),e(G,{loading:k.value,columns:$.value,"data-source":w.value,scroll:{y:440},onChange:M,pagination:{current:d.pageNumber,total:F.value}},{bodyCell:t(({column:l,record:g})=>[l.key=="role"?(p(),I(b,{key:0},{default:t(()=>[i(le(g.role),1)]),_:2},1024)):y("",!0),l.key=="action"?(p(),C(B,{key:1},[e(f,{type:"link",onClick:W=>E(g)},{default:t(()=>[i("编辑")]),_:2},1032,["onClick"]),e(Z,{type:"vertical"}),e(q,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:W=>h(g)},{default:t(()=>[e(f,{type:"link",danger:""},{default:t(()=>[i("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):y("",!0),l.key=="userType"?(p(),C(B,{key:2},[g.userType=="app"?(p(),I(b,{key:0,color:"#2db7f5"},{default:t(()=>[i("菜单")]),_:1})):y("",!0),g.userType=="directory"?(p(),I(b,{key:1,color:"#87d068"},{default:t(()=>[i("目录")]),_:1})):y("",!0)],64)):y("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1}),e(Q,{open:c.value,"onUpdate:open":a[7]||(a[7]=l=>c.value=l),onOk:A,title:P.value,onCancel:N},{default:t(()=>[e(S,{model:n.value,"label-col":{span:8},ref_key:"modalFormRef",ref:U},{default:t(()=>[e(u,{label:"用户名"},{default:t(()=>[e(s,{value:n.value.username,"onUpdate:value":a[1]||(a[1]=l=>n.value.username=l)},null,8,["value"])]),_:1}),e(u,{label:"密码"},{default:t(()=>[e(H,{value:n.value.password,"onUpdate:value":a[2]||(a[2]=l=>n.value.password=l)},null,8,["value"])]),_:1}),e(u,{label:"角色"},{default:t(()=>[e(K,{value:n.value.roleId,"onUpdate:value":a[3]||(a[3]=l=>n.value.roleId=l),fieldNames:{label:"roleName",value:"roleId"},options:T.value},null,8,["value","options"])]),_:1}),e(u,{label:"头像"},{default:t(()=>[e(ne,{value:n.value.avatar,"onUpdate:value":a[4]||(a[4]=l=>n.value.avatar=l)},null,8,["value"])]),_:1}),e(u,{label:"名称"},{default:t(()=>[e(s,{value:n.value.name,"onUpdate:value":a[5]||(a[5]=l=>n.value.name=l)},null,8,["value"])]),_:1}),e(u,{label:"邮箱"},{default:t(()=>[e(s,{value:n.value.email,"onUpdate:value":a[6]||(a[6]=l=>n.value.email=l)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),je=de(Ie,[["__scopeId","data-v-b63115a4"]]);export{je as default};
