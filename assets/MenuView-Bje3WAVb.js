import{a as i}from"./menu-BdNUxRLu.js";import{_ as ae}from"./IconSelect.vue_vue_type_script_setup_true_lang-BnZS1MTV.js";import{c as oe}from"./common-Cn3zKYyu.js";import{d as ne,$ as le,r as d,b as ue,t as se,J as r,L as w,g as e,M as a,a0 as B,a1 as pe,O as s,a2 as de,R as L,a3 as m,U as y,a4 as re,Z as me,a5 as ie,a6 as _e}from"./index-Dnllc660.js";import{C as ce,_ as fe,a as ve}from"./index-qY2HqPh2.js";import{I as ye}from"./index-CdPL3hVj.js";import{_ as be}from"./index-Br8UPh21.js";import{T as ge}from"./index-OTmqiICm.js";import{_ as ke}from"./index-q7u2mUtV.js";import{_ as Te,S as we}from"./index-CmT_P4Rx.js";import{_ as Ce}from"./index-CYRntD6c.js";import{_ as xe}from"./index-VeRW38yI.js";import{_ as Fe}from"./index-CtzJ2JBr.js";import{_ as Ne}from"./index-xo95AWta.js";import"./index-AfPlPzwU.js";import"./ArrowRightOutlined-BW5tvEBu.js";import"./SwapRightOutlined-0xVvP0B-.js";import"./FolderOutlined-6kXSNoe3.js";import"./DeleteFilled-eKgmzCAs.js";import"./EditOutlined-CnZo_gTu.js";import"./EllipsisOutlined-UqpZrikn.js";import"./PlusCircleOutlined-DmdvwHuH.js";import"./SyncOutlined-BaO_SCxl.js";import"./index-CMIDOs3Z.js";import"./index-BXdJuQLO.js";import"./index-BxK3iEOI.js";import"./useBreakpoint-BvZhaG7P.js";import"./index-B7UcDlnN.js";const Ue={class:"menu"},De={class:"tools"},Ie=ne({__name:"MenuView",setup(Me){const b=le({keyword:""}),C=d([]),R=d([{title:"名称",key:"label",dataIndex:"label"},{title:"类型",key:"menuType",dataIndex:"menuType"},{title:"地址",key:"address",dataIndex:"address"},{title:"排序号",key:"sortNum",dataIndex:"sortNum"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),T=d(!1),x=d(),h=()=>{var o;(o=x.value)==null||o.resetFields(),_()},F=d([]),S=()=>{oe.getDict(["menuType"]).then(o=>{const{code:t,data:u,msg:p}=o;t==200&&(F.value=u.menuType)})},_=()=>{T.value=!0,i.getList(b.keyword).then(o=>{const{code:t,data:u}=o;t==200&&(C.value=u),T.value=!1})};ue(()=>{_(),S()});const c=d(!1),n=d({label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""}),f=d("add"),j=se(()=>({add:"新增菜单",edit:"编辑菜单"})[f.value]),N=d(),E=()=>{n.value={label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""},f.value="add",c.value=!0,D()},K=async o=>await i.getDetail(o),A=async o=>{const{code:t,data:u}=await K(o.id);t==200&&(n.value=u,f.value="edit",c.value=!0,D())},J=async o=>{const{code:t,msg:u}=await i.remove(o.id);t==200&&(B.success(u),_())},P=()=>{var o;(o=N.value)==null||o.resetFields()},Z=()=>{let o;f.value=="add"?o=i.add:o=i.update,o(n.value).then(t=>{const{code:u}=t;u==200&&(B.success(f.value=="add"?"新增成功":"编辑成功"),_()),P(),c.value=!1})},U=d([]),D=()=>{i.dict().then(o=>{const{code:t,data:u}=o;t==200&&(U.value=u)})},q=o=>{let t=o||"";n.value.pid=t};return(o,t)=>{const u=ye,p=re,I=fe,v=me,z=ve,M=ie,V=ce,G=Ce,H=be,O=ge,Q=ke,g=xe,$=Te,W=Fe,X=Ne,Y=we,ee=pe;return r(),w("div",Ue,[e(V,{class:"search-area"},{default:a(()=>[e(M,{ref_key:"searchFormRef",ref:x,model:b,onFinish:_},{default:a(()=>[e(z,{gutter:24},{default:a(()=>[e(I,{span:4},{default:a(()=>[e(p,{label:"名称",name:"keyword"},{default:a(()=>[e(u,{value:b.keyword,"onUpdate:value":t[0]||(t[0]=l=>b.keyword=l)},null,8,["value"])]),_:1})]),_:1}),e(I,{span:4,style:{"text-align":"right"}},{default:a(()=>[e(v,{type:"primary","html-type":"submit"},{default:a(()=>[s("搜索")]),_:1}),e(v,{style:{margin:"0 8px"},onClick:h},{default:a(()=>[s(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(V,null,{default:a(()=>[de("div",De,[e(v,{type:"primary",onClick:E},{default:a(()=>[s("新增")]),_:1})]),e(Q,{rowKey:l=>l.id,loading:T.value,columns:R.value,"data-source":C.value,pagination:!1,scroll:{y:500}},{bodyCell:a(({column:l,record:k})=>[l.key=="action"?(r(),w(L,{key:0},[e(v,{type:"link",onClick:te=>A(k)},{default:a(()=>[s("编辑")]),_:2},1032,["onClick"]),e(G,{type:"vertical"}),e(H,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:te=>J(k)},{default:a(()=>[e(v,{type:"link",danger:""},{default:a(()=>[s("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):m("",!0),l.key=="menuType"?(r(),w(L,{key:1},[k.menuType=="app"?(r(),y(O,{key:0,color:"#2db7f5"},{default:a(()=>[s("菜单")]),_:1})):m("",!0),k.menuType=="directory"?(r(),y(O,{key:1,color:"#87d068"},{default:a(()=>[s("目录")]),_:1})):m("",!0)],64)):m("",!0)]),_:1},8,["rowKey","loading","columns","data-source"])]),_:1}),e(ee,{open:c.value,"onUpdate:open":t[9]||(t[9]=l=>c.value=l),onOk:Z,title:j.value},{default:a(()=>[e(M,{model:n.value,"label-col":{span:8},ref_key:"modalFormRef",ref:N},{default:a(()=>[e(p,{label:"名称",name:"label"},{default:a(()=>[e(u,{value:n.value.label,"onUpdate:value":t[1]||(t[1]=l=>n.value.label=l)},null,8,["value"])]),_:1}),e(p,{label:"类型",name:"menuType"},{default:a(()=>[e($,{value:n.value.menuType,"onUpdate:value":t[2]||(t[2]=l=>n.value.menuType=l),"button-style":"solid"},{default:a(()=>[e(g,{value:"directory"},{default:a(()=>[s(" 目录 ")]),_:1}),e(g,{value:"app"},{default:a(()=>[s(" 菜单 ")]),_:1})]),_:1},8,["value"])]),_:1}),n.value.menuType=="app"?(r(),y(p,{key:0,label:"地址",name:"address"},{default:a(()=>[e(u,{value:n.value.address,"onUpdate:value":t[3]||(t[3]=l=>n.value.address=l)},null,8,["value"])]),_:1})):m("",!0),e(p,{label:"上级节点",name:"pid"},{default:a(()=>[e(W,{value:n.value.pid,"onUpdate:value":t[4]||(t[4]=l=>n.value.pid=l),"tree-node-filter-prop":"label","show-search":"","allow-clear":"",treeData:U.value,"field-names":{children:"children",label:"label",value:"id"},onChange:q},null,8,["value","treeData"])]),_:1}),e(p,{label:"图标",name:"icon"},{default:a(()=>[e(ae,{modelValue:n.value.icon,"onUpdate:modelValue":t[5]||(t[5]=l=>n.value.icon=l)},null,8,["modelValue"])]),_:1}),e(p,{label:"排序号",name:"sortNum"},{default:a(()=>[e(X,{value:n.value.sortNum,"onUpdate:value":t[6]||(t[6]=l=>n.value.sortNum=l)},null,8,["value"])]),_:1}),n.value.menuType=="app"?(r(),y(p,{key:1,label:"是否外链",name:"openType"},{default:a(()=>[e($,{value:n.value.openType,"onUpdate:value":t[7]||(t[7]=l=>n.value.openType=l),"button-style":"solid"},{default:a(()=>[e(g,{value:"_blank"},{default:a(()=>[s(" 是 ")]),_:1}),e(g,{value:"_self"},{default:a(()=>[s(" 否 ")]),_:1})]),_:1},8,["value"])]),_:1})):m("",!0),n.value.openType=="_self"&&n.value.menuType=="app"?(r(),y(p,{key:2,label:"页面类型",name:"type"},{default:a(()=>[e(Y,{value:n.value.type,"onUpdate:value":t[8]||(t[8]=l=>n.value.type=l),options:F.value,"show-search":"",allowClear:""},null,8,["value","options"])]),_:1})):m("",!0)]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),lt=_e(Ie,[["__scopeId","data-v-b6cf1b2d"]]);export{lt as default};
