import{r as y,b as oe}from"./index-XMdY5bGJ.js";import{a as le}from"./menu-DABzdOL0.js";import{q as ne,a as R,g as re,M as se,h as ue,i as de,j as ie,B as pe,k as me,F as ce,T as _e,c as ve,m as fe,n as ge,o as ye,p as ke,u as be}from"./ant-design-vue-D_mFXu_Y.js";import{d as he,a as xe,r as d,o as L,m as Ce,U as m,V as x,c as e,a5 as t,J as s,W as z,F as N,a4 as C,ad as k}from"./@vue-CeHXljvD.js";import"./pinia-DZPz60mG.js";/* empty css                      */import"./axios-DsPaXkF5.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-N9TsG8xj.js";import"./vue-router-BsaqgHAe.js";import"./uuid-CQkTLCs1.js";import"./vue-codemirror-DAixPvWe.js";import"./codemirror-D_HKGbp9.js";import"./@codemirror-BNYy9MjX.js";import"./@lezer-Cp1Os4ub.js";import"./crelt-C8TCjufn.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./@ant-design-D3E7U7HN.js";import"./@ctrl-DOFZgDuz.js";import"./echarts-DetEu2Tg.js";import"./tslib-BDyQ-Jie.js";import"./zrender-CDo53BfZ.js";import"./gaius-utils-BQYB1CTP.js";import"./@babel-BiFW4_mA.js";import"./lodash-es-PU94eZQX.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./dayjs-X-x4l2Bb.js";import"./throttle-debounce-CUWDS_la.js";import"./async-validator-DKvM95Vc.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";const b={getList:u=>y({method:"get",url:"role/list",params:u}),getDetail:u=>y({method:"get",url:"role/detail",params:{id:u}}),remove:u=>y({method:"get",url:"role/remove",params:{id:u}}),add:u=>y({method:"post",url:"role/add",data:u}),update:u=>y({method:"post",url:"role/update",data:u})},Ie={class:"role"},Ne={class:"tools"},Fe={style:{height:"200px","overflow-y":"auto"}},Te=he({__name:"RoleView",setup(u){ne.SHOW_ALL;const i=xe({keyword:"",pageNumber:1,pageSize:10}),F=d([]),$=d([{title:"角色名",key:"roleName",dataIndex:"roleName"},{title:"角色ID",key:"roleId",dataIndex:"roleId"},{title:"备注",key:"desc",dataIndex:"desc"},{title:"状态",key:"status",dataIndex:"status"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),I=d(!1),T=d(),j=()=>{var o;(o=T.value)==null||o.resetFields(),c()},w=d(0),A=()=>{i.pageNumber=1,i.pageSize=10,c()},K=o=>{const{current:a,pageSize:n}=o;i.pageNumber=a,i.pageSize=n,c()},c=()=>{I.value=!0,b.getList(i).then(o=>{const{code:a,data:n}=o;a==200&&(F.value=n.data,w.value=n.total),I.value=!1})};L(()=>{c()});const _=d(!1),r=d({roleName:"",roleId:"",status:1,desc:"",roleValue:[]}),v=d("add"),q=Ce(()=>({add:"新增角色",edit:"编辑角色"})[v.value]),V=d(),E=()=>{v.value="add",_.value=!0,r.value={roleName:"",roleId:"",status:1,desc:"",roleValue:[]}},P=async o=>{const{code:a,data:n}=await b.getDetail(o.id);a==200&&(r.value=n,v.value="edit",_.value=!0)},W=async o=>{const{code:a,msg:n,data:p}=await b.remove(o.id);a==200&&(R.success(p),c())},U=()=>{var o;(o=V.value)==null||o.resetFields()},H=()=>{let o;v.value=="add"?o=b.add:o=b.update,o(r.value).then(a=>{const{code:n}=a;n==200&&(R.success(v.value=="add"?"新增成功":"编辑成功"),c()),U(),_.value=!1})},D=d([]),J=()=>{le.getAllMenu().then(o=>{const{code:a,data:n,msg:p}=o;a==200&&(D.value=n)})};return L(()=>{J()}),(o,a)=>{const n=ue,p=de,O=ie,f=pe,G=me,S=ce,B=re,h=_e,Q=ve,X=fe,Y=ge,M=ye,Z=ke,ee=be,te=se;return m(),x("div",Ie,[e(B,{class:"search-area"},{default:t(()=>[e(S,{ref_key:"searchFormRef",ref:T,model:i,onFinish:A},{default:t(()=>[e(G,{gutter:24},{default:t(()=>[e(O,{span:4},{default:t(()=>[e(p,{label:"角色名称",name:"keyword"},{default:t(()=>[e(n,{value:i.keyword,"onUpdate:value":a[0]||(a[0]=l=>i.keyword=l)},null,8,["value"])]),_:1})]),_:1}),e(O,{span:4,style:{"text-align":"right"}},{default:t(()=>[e(f,{type:"primary","html-type":"submit"},{default:t(()=>[s("搜索")]),_:1}),e(f,{style:{margin:"0 8px"},onClick:j},{default:t(()=>[s(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(B,null,{default:t(()=>[z("div",Ne,[e(f,{type:"primary",onClick:E},{default:t(()=>[s("新增")]),_:1})]),e(Y,{loading:I.value,columns:$.value,"data-source":F.value,scroll:{y:440},onChange:K,pagination:{current:i.pageNumber,total:w.value}},{bodyCell:t(({column:l,record:g})=>[l.key=="status"?(m(),x(N,{key:0},[g.status?(m(),C(h,{key:0,color:"#87d068"},{default:t(()=>[s("启用")]),_:1})):(m(),C(h,{key:1,color:"#f50"},{default:t(()=>[s("停用")]),_:1}))],64)):k("",!0),l.key=="action"?(m(),x(N,{key:1},[e(f,{type:"link",onClick:ae=>P(g)},{default:t(()=>[s("编辑")]),_:2},1032,["onClick"]),e(Q,{type:"vertical"}),e(X,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:ae=>W(g)},{default:t(()=>[e(f,{type:"link",danger:""},{default:t(()=>[s("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):k("",!0),l.key=="roleType"?(m(),x(N,{key:2},[g.roleType=="app"?(m(),C(h,{key:0,color:"#2db7f5"},{default:t(()=>[s("菜单")]),_:1})):k("",!0),g.roleType=="directory"?(m(),C(h,{key:1,color:"#87d068"},{default:t(()=>[s("目录")]),_:1})):k("",!0)],64)):k("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1}),e(te,{open:_.value,"onUpdate:open":a[6]||(a[6]=l=>_.value=l),onOk:H,title:q.value,onCancel:U},{default:t(()=>[e(S,{model:r.value,"label-col":{span:8},ref_key:"modalFormRef",ref:V},{default:t(()=>[e(p,{label:"角色名"},{default:t(()=>[e(n,{value:r.value.roleName,"onUpdate:value":a[1]||(a[1]=l=>r.value.roleName=l)},null,8,["value"])]),_:1}),e(p,{label:"角色ID"},{default:t(()=>[e(n,{value:r.value.roleId,"onUpdate:value":a[2]||(a[2]=l=>r.value.roleId=l)},null,8,["value"])]),_:1}),e(p,{label:"状态"},{default:t(()=>[e(Z,{value:r.value.status,"onUpdate:value":a[3]||(a[3]=l=>r.value.status=l),"button-style":"solid"},{default:t(()=>[e(M,{value:1},{default:t(()=>[s("启用 ")]),_:1}),e(M,{value:0},{default:t(()=>[s("停用 ")]),_:1})]),_:1},8,["value"])]),_:1}),e(p,{label:"权限"},{default:t(()=>[z("div",Fe,[e(ee,{checkedKeys:r.value.roleValue,"onUpdate:checkedKeys":a[4]||(a[4]=l=>r.value.roleValue=l),"tree-data":D.value,checkable:"","field-names":{children:"children",title:"label",key:"id"}},null,8,["checkedKeys","tree-data"])])]),_:1}),e(p,{label:"备注"},{default:t(()=>[e(n,{value:r.value.desc,"onUpdate:value":a[5]||(a[5]=l=>r.value.desc=l)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),it=oe(Te,[["__scopeId","data-v-467be61e"]]);export{it as default};
