import{a as w}from"./resource-C-366iHX.js";import{g as B,H as U,I as F,r as u,n as R,o as d,q as p,l as t,i as m,ap as V,aq as D,w as x,J as E,P as _,X as I,ar as H,F as J,y as T,ab as X,as as j,e as A,an as G,ah as K,at as Q,ae as W,au as Y,av as Z}from"./.pnpm-DwIV1MCi.js";/* empty css                                                                    */import{_ as ee}from"./index-DHr4AJ_f.js";const ae=i=>(Y("data-v-678baa60"),i=i(),Z(),i),te={class:"image-picker"},se=ae(()=>_("div",{class:"select-image-text"},"选择图片",-1)),oe={key:1,class:"preview-image"},ne={class:"image-container"},le={class:"image-list"},ie=["src","onClick"],ce=B({__name:"ImagePicker",props:{value:{type:String,required:!0},valueModifiers:{}},emits:U(["change"],["update:value"]),setup(i,{emit:N}){const g=F(i,"value"),v=u([]),o=u({pageSize:3,pageNumber:1,keyword:""}),C=u(0),P="/prod",r=u(""),L=e=>{r.value=e},M=()=>{o.value.pageNumber++,h()},h=()=>{w.getList(o.value).then(e=>{const{code:a,data:n,msg:l}=e;a==200&&(v.value=n.data,C.value=n.total)})},O=()=>{o.value.pageNumber--,h()},S=e=>{const a=new FormData;a.append("file",e.file,encodeURIComponent(e.file.name)),w.add(a).then(n=>{const{code:l,data:k,msg:b}=n;l==200&&(f(`${P}/${k.path}`),A.success(b),c.value=!1)})},c=u(!1),$=()=>{c.value=!0},q=N,f=e=>{g.value=e,q("change",e)},z=()=>{f(r.value),y()},y=()=>{r.value="",c.value=!1};return R(()=>{h()}),(e,a)=>{const n=G,l=K,k=Q,b=W;return d(),p("div",te,[g.value?(d(),p("div",oe,[t(m(D),{onClick:a[0]||(a[0]=s=>f("")),style:{position:"absolute",top:"5px",right:"5px",color:"#999","z-index":"99"}}),t(n,{src:g.value,width:"100px",height:"100px"},null,8,["src"])])):(d(),p("div",{key:0,class:"select-image",onClick:$},[t(m(V)),se])),t(b,{open:c.value,"onUpdate:open":a[1]||(a[1]=s=>c.value=s),title:"选择图片",onOk:z,onCancel:y},{default:x(()=>[t(k,{name:"file",accept:"image/*",customRequest:S,maxCount:"1",showUploadList:!1},{default:x(()=>[t(l,{type:"primary"},{default:x(()=>[E("自定义")]),_:1})]),_:1}),_("div",ne,[t(l,{type:"ghost",icon:I(m(H)),onClick:O,disabled:o.value.pageNumber==1},null,8,["icon","disabled"]),_("div",le,[(d(!0),p(J,null,T(v.value,s=>(d(),p("div",{key:s.id,class:X(["image-item",{selected:r.value==s.path}])},[_("img",{src:s.path,onClick:ue=>L(s.path),height:"100px",width:"100px"},null,8,ie)],2))),128))]),t(l,{type:"ghost",icon:I(m(j)),onClick:M,disabled:o.value.pageSize*(o.value.pageNumber-1)+v.value.length==C.value},null,8,["icon","disabled"])])]),_:1},8,["open"])])}}}),_e=ee(ce,[["__scopeId","data-v-678baa60"]]);export{_e as default};
