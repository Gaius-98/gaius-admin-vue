import{d as W,u as _e,h as z,e as c,w as fe,j as ye,_ as P,a7 as ge,k as e,Z as Q,l as ee,P as te,a8 as ae,b as be,a5 as h,a1 as Te,B as ke,N as U,O as q,V as a,a2 as le,a0 as m,a3 as xe,U as ne,a4 as oe,W as se,Q as Ce}from"./index-MALlFgrV.js";import{C as De,_ as we,a as Ne}from"./index-Bnq6UEKk.js";import{M as $e,_ as Se,a as he,b as Ie}from"./index-DH5PbOi1.js";import{P as ze}from"./PlusOutlined-BWMjCxSh.js";import{u as Fe,e as Oe,C as Z,I as Ue,_ as Be,B as Re,F as Ve}from"./index-CugiCOEZ.js";import{S as Ae,_ as je,a as Le,R as Pe}from"./index-7lrl1L47.js";import{I as Ge}from"./index-CDtEKow-.js";import"./FolderOutlined-CrVkkCOo.js";import"./RightOutlined-C9nq_yjJ.js";const Ee={small:8,middle:16,large:24},Me=()=>({prefixCls:String,size:{type:[String,Number,Array]},direction:te.oneOf(ae("horizontal","vertical")).def("horizontal"),align:te.oneOf(ae("start","end","center","baseline")),wrap:be()});function qe(l){return typeof l=="string"?Ee[l]:l||0}const B=W({compatConfig:{MODE:3},name:"ASpace",inheritAttrs:!1,props:Me(),slots:Object,setup(l,G){let{slots:r,attrs:D}=G;const{prefixCls:y,space:b,direction:F}=_e("space",l),[E,R]=Fe(y),g=Oe(),p=z(()=>{var d,_,k;return(k=(d=l.size)!==null&&d!==void 0?d:(_=b==null?void 0:b.value)===null||_===void 0?void 0:_.size)!==null&&k!==void 0?k:"small"}),w=c(),v=c();fe(p,()=>{[w.value,v.value]=(Array.isArray(p.value)?p.value:[p.value,p.value]).map(d=>qe(d))},{immediate:!0});const o=z(()=>l.align===void 0&&l.direction==="horizontal"?"center":l.align),T=z(()=>ye(y.value,R.value,`${y.value}-${l.direction}`,{[`${y.value}-rtl`]:F.value==="rtl",[`${y.value}-align-${o.value}`]:o.value})),M=z(()=>F.value==="rtl"?"marginLeft":"marginRight"),V=z(()=>{const d={};return g.value&&(d.columnGap=`${w.value}px`,d.rowGap=`${v.value}px`),P(P({},d),l.wrap&&{flexWrap:"wrap",marginBottom:`${-v.value}px`})});return()=>{var d,_;const{wrap:k,direction:A="horizontal"}=l,j=(d=r.default)===null||d===void 0?void 0:d.call(r),f=ge(j),N=f.length;if(N===0)return null;const $=(_=r.split)===null||_===void 0?void 0:_.call(r),L=`${y.value}-item`,n=w.value,t=N-1;return e("div",ee(ee({},D),{},{class:[T.value,D.class],style:[V.value,D.style]}),[f.map((u,i)=>{let x=j.indexOf(u);x===-1&&(x=`$$space-${i}`);let C={};return g.value||(A==="vertical"?i<t&&(C={marginBottom:`${n/($?2:1)}px`}):C=P(P({},i<t&&{[M.value]:`${n/($?2:1)}px`}),k&&{paddingBottom:`${v.value}px`})),E(e(Q,{key:x},[e("div",{class:L,style:C},[u]),i<t&&$&&e("span",{class:`${L}-split`,style:C},[$])]))})])}}});B.Compact=Z;B.install=function(l){return l.component(B.name,B),l.component(Z.name,Z),l};const We=B,I={getList:l=>h({method:"get",url:"dict/list",params:l}),getDetail:l=>h({method:"get",url:"dict/detail",params:{id:l}}),remove:l=>h({method:"get",url:"dict/remove",params:{id:l}}),add:l=>h({method:"post",url:"dict/add",data:l}),update:l=>h({method:"post",url:"dict/update",data:l}),getDictTypeList:()=>h({method:"get",url:"dict/dictTypeList"})},Qe={class:"dict"},Ze={class:"tools"},He=W({__name:"DictView",setup(l){const G=W({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),r=Te({keyword:"",dictType:"",pageNumber:1,pageSize:10}),D=c([]),y=c([{title:"归属字典",key:"dictTypeDesc",dataIndex:"dictTypeDesc"},{title:"字典描述",key:"label",dataIndex:"label"},{title:"字典值",key:"value",dataIndex:"value"},{title:"状态",key:"status",dataIndex:"status"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),b=c(!1),F=c(),E=()=>{var n;(n=F.value)==null||n.resetFields(),g()},R=c(0),g=()=>{b.value=!0,I.getList(r).then(n=>{const{code:t,data:u}=n;t==200&&(D.value=u.data,R.value=u.total),b.value=!1})},p=c([]),w=async()=>{const{code:n,data:t,msg:u}=await I.getDictTypeList();n==200&&(p.value=t)};ke(()=>{g(),w()});const v=c(!1),o=c({label:"",value:"",dictType:"",dictTypeDesc:"",sortNum:0}),T=c("add"),M=z(()=>({add:"新增字典",edit:"编辑字典"})[T.value]),V=c(),d=()=>{T.value="add",v.value=!0,o.value={label:"",value:"",dictType:"",dictTypeDesc:"",sortNum:0}},_=async n=>{const{code:t,data:u}=await I.getDetail(n.id);t==200&&(o.value=u,T.value="edit",v.value=!0)},k=async n=>{const{code:t,msg:u,data:i}=await I.remove(n.id);t==200&&(le.success(i),g())},A=()=>{var n;(n=V.value)==null||n.resetFields()},j=()=>{let n;T.value=="add"?n=I.add:n=I.update,n(o.value).then(t=>{const{code:u}=t;u==200&&(le.success(T.value=="add"?"新增成功":"编辑成功"),g(),w(),N.value=[]),A(),v.value=!1})},f=c(""),N=c([]),$=n=>{n.preventDefault(),p.value.push({dictType:f.value,dictTypeDesc:f.value}),N.value.push(f.value),f.value=""},L=()=>{o.value.dictTypeDesc=p.value.find(n=>n.dictType==o.value.dictType).dictTypeDesc};return(n,t)=>{const u=Ue,i=Be,x=we,C=Ae,S=Re,ue=Ne,H=Ve,J=De,K=je,X=Se,ie=he,de=Ie,ce=We,re=Ge,Y=Le,pe=Pe,ve=$e;return U(),q("div",Qe,[e(J,{class:"search-area"},{default:a(()=>[e(H,{ref_key:"searchFormRef",ref:F,model:r,onFinish:g},{default:a(()=>[e(ue,{gutter:24},{default:a(()=>[e(x,{span:4},{default:a(()=>[e(i,{label:"字典描述",name:"keyword"},{default:a(()=>[e(u,{value:r.keyword,"onUpdate:value":t[0]||(t[0]=s=>r.keyword=s)},null,8,["value"])]),_:1})]),_:1}),e(x,{span:4},{default:a(()=>[e(i,{label:"归属字典",name:"dictType"},{default:a(()=>[e(C,{value:r.dictType,"onUpdate:value":t[1]||(t[1]=s=>r.dictType=s),fieldNames:{label:"dictTypeDesc",value:"dictType"},allowClear:"",options:p.value},null,8,["value","options"])]),_:1})]),_:1}),e(x,{span:4,style:{"text-align":"right"}},{default:a(()=>[e(S,{type:"primary","html-type":"submit"},{default:a(()=>[m("搜索")]),_:1}),e(S,{style:{margin:"0 8px"},onClick:E},{default:a(()=>[m(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(J,null,{default:a(()=>[xe("div",Ze,[e(S,{type:"primary",onClick:d},{default:a(()=>[m("新增")]),_:1})]),e(de,{loading:b.value,columns:y.value,"data-source":D.value,pagination:{current:r.pageNumber,total:R.value}},{bodyCell:a(({column:s,record:O})=>[s.key=="status"?(U(),q(Q,{key:0},[O.status?(U(),ne(K,{key:0,color:"#87d068"},{default:a(()=>[m("启用")]),_:1})):(U(),ne(K,{key:1,color:"#f50"},{default:a(()=>[m("停用")]),_:1}))],64)):oe("",!0),s.key=="action"?(U(),q(Q,{key:1},[e(S,{type:"link",onClick:me=>_(O)},{default:a(()=>[m("编辑")]),_:2},1032,["onClick"]),e(X,{type:"vertical"}),e(ie,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:me=>k(O)},{default:a(()=>[e(S,{type:"link",danger:""},{default:a(()=>[m("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):oe("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1}),e(ve,{open:v.value,"onUpdate:open":t[10]||(t[10]=s=>v.value=s),onOk:j,title:M.value,onCancel:A},{default:a(()=>[e(H,{model:o.value,"label-col":{span:8},ref_key:"modalFormRef",ref:V},{default:a(()=>[e(i,{label:"字典类型"},{default:a(()=>[e(C,{value:o.value.dictType,"onUpdate:value":t[3]||(t[3]=s=>o.value.dictType=s),fieldNames:{label:"dictType",value:"dictType"},options:p.value,onChange:L},{dropdownRender:a(({menuNode:s})=>[e(se(G),{vnodes:s},null,8,["vnodes"]),e(X,{style:{margin:"4px 0"}}),e(ce,{style:{padding:"4px 8px"}},{default:a(()=>[e(u,{ref:"inputRef",value:f.value,"onUpdate:value":t[2]||(t[2]=O=>f.value=O),placeholder:"请输入字典类型"},null,8,["value"]),e(S,{type:"text",onClick:$},{icon:a(()=>[e(se(ze))]),default:a(()=>[m(" 增加类型 ")]),_:1})]),_:1})]),_:1},8,["value","options"])]),_:1}),e(i,{label:"字典类型描述"},{default:a(()=>[e(u,{value:o.value.dictTypeDesc,"onUpdate:value":t[4]||(t[4]=s=>o.value.dictTypeDesc=s),disabled:!N.value.includes(o.value.dictType)},null,8,["value","disabled"])]),_:1}),e(i,{label:"字典描述"},{default:a(()=>[e(u,{value:o.value.label,"onUpdate:value":t[5]||(t[5]=s=>o.value.label=s)},null,8,["value"])]),_:1}),e(i,{label:"字典值"},{default:a(()=>[e(u,{value:o.value.value,"onUpdate:value":t[6]||(t[6]=s=>o.value.value=s)},null,8,["value"])]),_:1}),e(i,{label:"排序号"},{default:a(()=>[e(re,{value:o.value.sortNum,"onUpdate:value":t[7]||(t[7]=s=>o.value.sortNum=s)},null,8,["value"])]),_:1}),e(i,{label:"状态"},{default:a(()=>[e(pe,{value:o.value.status,"onUpdate:value":t[8]||(t[8]=s=>o.value.status=s),"button-style":"solid"},{default:a(()=>[e(Y,{value:1},{default:a(()=>[m("启用 ")]),_:1}),e(Y,{value:0},{default:a(()=>[m("停用 ")]),_:1})]),_:1},8,["value"])]),_:1}),e(i,{label:"描述"},{default:a(()=>[e(u,{type:"textarea",value:o.value.desc,"onUpdate:value":t[9]||(t[9]=s=>o.value.desc=s)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),ot=Ce(He,[["__scopeId","data-v-7051c37f"]]);export{ot as default};
