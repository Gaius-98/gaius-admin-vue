import{c as y,_ as G}from"./index-bp98ELWv.js";import{g as J,m as K,r as _,n as Q,o as d,q as x,l as e,w as a,ab as W,ac as Z,h as p,ad as S,a6 as s,L as ee,F as ae,y as le,N as T,O as i,ae as te,i as D,af as oe,ag as ne,ah as se,X as ue,V as ce,a4 as de,a1 as re,ai as _e,R as ie,Y as pe,$ as ve,a0 as fe,aj as me,ak as ge,al as be,am as ye}from"./.pnpm-CWzuy1aI.js";const he={class:"over"},Ie={class:"device-container"},ke={class:"device-title"},Ce=["title"],we={style:{height:"215px"}},xe=J({__name:"HomeView",setup(Te){const o=K({keyword:"",pageNumber:1,pageSize:10,type:""}),m=_([]),$=_({}),F=_([]),N=_([]),q=_(),z=()=>{var n;(n=q.value)==null||n.resetFields(),I()},B=_(0),M=()=>{o.pageNumber=1,o.pageSize=10,I()},P=_([]),h=_(!0),I=()=>{h.value=!0,y.getOverview(o).then(n=>{const{code:t,data:c}=n;t==200&&(P.value=c.data,B.value=c.total),h.value=!1})},R=n=>{},E=n=>{},g=_(""),H=n=>{if(g.value==n.deviceId){g.value="";return}g.value=n.deviceId};return Q(()=>{I(),y.getOrgTree().then(n=>{const{code:t,data:c,msg:u}=n;t==200&&(F.value=c)}),y.getAllUser().then(n=>{const{code:t,data:c,msg:u}=n;t==200&&(N.value=c)}),y.getDict(["deviceBelongType"]).then(n=>{const{code:t,data:c,msg:u}=n;t==200&&(m.value=c.deviceBelongType,$.value=m.value.reduce((v,b)=>(v[b.value]=b.label,v),{}))})}),(n,t)=>{const c=ue,u=ce,v=de,b=re,U=_e,V=ie,k=W,C=pe,w=ve,j=fe,r=me,L=ge,A=be,X=ye,Y=Z("loading");return d(),x("div",he,[e(k,{class:"search-area"},{default:a(()=>[e(V,{ref_key:"searchFormRef",ref:q,model:o,layout:"inline",onFinish:M},{default:a(()=>[e(u,{label:"设备编号",prop:"deviceId"},{default:a(()=>[e(c,{value:o.deviceId,"onUpdate:value":t[0]||(t[0]=l=>o.deviceId=l),options:m.value,"show-search":"",allowClear:"",optionFilterProp:"label",style:{width:"200px"}},null,8,["value","options"])]),_:1}),e(u,{label:"所属类型",prop:"belongType"},{default:a(()=>[e(v,{value:o.belongType,"onUpdate:value":t[1]||(t[1]=l=>o.belongType=l),options:m.value,"show-search":"",allowClear:"",optionFilterProp:"label",style:{width:"200px"}},null,8,["value","options"])]),_:1}),o.belongType=="1"?(d(),p(u,{key:0,label:"所属机构",prop:"belongId"},{default:a(()=>[e(b,{value:o.belongId,"onUpdate:value":t[2]||(t[2]=l=>o.belongId=l),"tree-node-filter-prop":"label","show-search":"","allow-clear":"",treeData:F.value,"field-names":{children:"children",label:"name",value:"id"},style:{width:"200px"}},null,8,["value","treeData"])]),_:1})):S("",!0),o.belongType=="0"?(d(),p(u,{key:1,label:"所属人",prop:"belongId"},{default:a(()=>[e(v,{value:o.belongId,"onUpdate:value":t[3]||(t[3]=l=>o.belongId=l),options:N.value,"show-search":"",allowClear:"",optionFilterProp:"label",style:{width:"200px"}},null,8,["value","options"])]),_:1})):S("",!0),e(u,null,{default:a(()=>[e(U,{type:"primary","html-type":"submit"},{default:a(()=>[s("搜索")]),_:1}),e(U,{style:{margin:"0 8px"},onClick:z},{default:a(()=>[s(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(k,null,{default:a(()=>[ee((d(),x("div",Ie,[(d(!0),x(ae,null,le(P.value,l=>(d(),p(k,{class:"device-item",key:l.id},{title:a(()=>[T("div",ke,[s(" 设备编号： "+i(l.deviceId)+" ",1),T("span",{class:te(["device-circle",l.mqttInfo.status?"online":""]),title:l.mqttInfo.status?"在线":"离线"},null,10,Ce)])]),cover:a(()=>[T("div",we,[g.value==l.deviceId?(d(),p(V,{key:0,style:{padding:"10px"},labelCol:{span:8}},{default:a(()=>[e(u,{label:"总开关"},{default:a(()=>[e(C)]),_:1}),e(u,{label:"等离子开关"},{default:a(()=>[e(C)]),_:1}),e(u,{label:"负离子开关"},{default:a(()=>[e(C)]),_:1}),e(u,{label:"风扇挡位"},{default:a(()=>[e(j,{"button-style":"solid"},{default:a(()=>[e(w,{value:"a"},{default:a(()=>[s("低")]),_:1}),e(w,{value:"b"},{default:a(()=>[s("中")]),_:1}),e(w,{value:"c"},{default:a(()=>[s("高")]),_:1})]),_:1})]),_:1})]),_:1})):(d(),p(A,{key:1,title:"",size:"small",column:2,style:{padding:"10px"}},{default:a(()=>[e(r,{label:"所属人/机构",span:2},{default:a(()=>{var f,O;return[s(i(l.belongType=="1"?(f=l==null?void 0:l.orgInfo)==null?void 0:f.name:(O=l==null?void 0:l.userInfo)==null?void 0:O.username),1)]}),_:2},1024),e(r,{label:"是否过保"},{default:a(()=>[l.isExpired=="0"?(d(),p(L,{key:0,color:"#87d068"},{default:a(()=>[s("未过保")]),_:1})):(d(),p(L,{key:1,color:"#f50"},{default:a(()=>[s("已过保")]),_:1}))]),_:2},1024),e(r,{label:"甲醛浓度"},{default:a(()=>[s(i(l.mqttInfo.fa||.1),1)]),_:2},1024),e(r,{label:"温度"},{default:a(()=>[s(i(l.mqttInfo.temp||20),1)]),_:2},1024),e(r,{label:"湿度"},{default:a(()=>[s(i(l.mqttInfo.rh||20),1)]),_:2},1024),e(r,{label:"PM2.5"},{default:a(()=>[s(i(l.mqttInfo.pm||5),1)]),_:2},1024),e(r,{label:"空气质量"},{default:a(()=>[s(i(l.mqttInfo.air||"良"),1)]),_:2},1024),e(r,{label:"保修日期",span:2},{default:a(()=>[s(i(l.expireDate),1)]),_:2},1024),e(r,{label:"设备位置",span:2})]),_:2},1024))])]),actions:a(()=>[e(D(oe),{title:"启动",onClick:f=>R(l)},null,8,["onClick"]),e(D(ne),{title:"停止",onClick:f=>E(l)},null,8,["onClick"]),e(D(se),{title:"更多",onClick:f=>H(l)},null,8,["onClick"])]),_:2},1024))),128))])),[[Y,h.value]]),e(X,{current:o.pageNumber,"onUpdate:current":t[4]||(t[4]=l=>o.pageNumber=l),total:B.value,"show-less-items":"",class:"pag"},null,8,["current","total"])]),_:1})])}}}),Ne=G(xe,[["__scopeId","data-v-2f46de57"]]);export{Ne as default};
