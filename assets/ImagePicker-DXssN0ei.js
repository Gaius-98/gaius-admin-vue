import{a as w}from"./resource-jfZ_6qSl.js";import{P as U,b as F,r as V,R as q}from"./@ant-design-Bw6LI3J4.js";import{r as D,M as E,a as J,B as T,s as j}from"./ant-design-vue-xt7LDby6.js";import{d as A,aa as G,ab as H,r as c,o as K,R as m,S as u,c as o,u as i,a8 as C,J as Q,U as _,h as y,F as W,a1 as X,_ as Y,ad as Z,ae as ee}from"./@vue-aP0pPEyH.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BnrNeXAj.js";import"./pinia-BukgqtI9.js";/* empty css                      */import"./axios-B4uVmeYG.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-CowBZe0U.js";import"./vue-router-CblwwlxB.js";import"./uuid-CQkTLCs1.js";import"./@babel-BiFW4_mA.js";import"./@ctrl-DOFZgDuz.js";import"./lodash-es-PU94eZQX.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./dayjs-X-x4l2Bb.js";import"./throttle-debounce-CUWDS_la.js";import"./async-validator-DKvM95Vc.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";const te=p=>(Z("data-v-1cda4572"),p=p(),ee(),p),oe={class:"image-picker"},se=te(()=>_("div",{class:"select-image-text"},"选择图片",-1)),ne={key:1,class:"preview-image"},ie={class:"image-container"},le={class:"image-list"},ce=["src","onClick"],pe=A({__name:"ImagePicker",props:{value:{},valueModifiers:{}},emits:G(["change"],["update:value"]),setup(p,{emit:S}){const h=H(p,"value"),f=c([]),d=c([]),a=c({pageSize:3,pageNumber:1,keyword:""}),I=c(0),v="/prod",g=c(""),M=e=>{g.value=e},P=()=>{a.value.pageNumber++,$()},$=()=>{w.getList(a.value).then(e=>{const{code:t,data:s,msg:l}=e;t==200&&(f.value=f.value.concat(s.data),d.value=s.data,I.value=s.total)})},z=()=>{a.value.pageNumber--,d.value=f.value.slice((a.value.pageNumber-1)*a.value.pageSize,a.value.pageSize)},L=e=>{const t=new FormData;t.append("file",e.file,encodeURIComponent(e.file.name)),w.add(t).then(s=>{const{code:l,data:b,msg:x}=s;l==200&&(k(`${v}/${b.path}`),J.success(x),r.value=!1)})},r=c(!1),O=()=>{r.value=!0},B=S,k=e=>{h.value=e,B("change",e)},R=()=>{k(g.value),N()},N=()=>{g.value="",r.value=!1};return K(()=>{$()}),(e,t)=>{const s=D,l=T,b=j,x=E;return m(),u("div",oe,[h.value?(m(),u("div",ne,[o(i(F),{onClick:t[0]||(t[0]=n=>k("")),style:{position:"absolute",top:"5px",right:"5px",color:"#999","z-index":"99"}}),o(s,{src:h.value,width:"100px",height:"100px"},null,8,["src"])])):(m(),u("div",{key:0,class:"select-image",onClick:O},[o(i(U)),se])),o(x,{open:r.value,"onUpdate:open":t[1]||(t[1]=n=>r.value=n),title:"选择图片",onOk:R,onCancel:N},{default:C(()=>[o(b,{name:"file",accept:"image/*",customRequest:L,maxCount:"1",showUploadList:!1},{default:C(()=>[o(l,{type:"primary"},{default:C(()=>[Q("自定义")]),_:1})]),_:1}),_("div",ie,[o(l,{type:"ghost",icon:y(i(V)),onClick:z,disabled:a.value.pageNumber==1},null,8,["icon","disabled"]),_("div",le,[(m(!0),u(W,null,X(d.value,n=>(m(),u("div",{key:n.id,class:Y(["image-item",{selected:g.value==`${i(v)}/${n.path}`}])},[_("img",{src:`${i(v)}/${n.path}`,onClick:re=>M(`${i(v)}/${n.path}`),height:"100px",width:"100px"},null,8,ce)],2))),128))]),o(l,{type:"ghost",icon:y(i(q)),onClick:P,disabled:a.value.pageSize*(a.value.pageNumber-1)+d.value.length==I.value},null,8,["icon","disabled"])])]),_:1},8,["open"])])}}}),Fe=ae(pe,[["__scopeId","data-v-1cda4572"]]);export{Fe as default};
