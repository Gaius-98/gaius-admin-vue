import{B as le,I as re,_ as ne,F as se}from"./index-BHY8-qA4.js";import{d as S,r as g,D as r,I,S as U,K as T,Y as z,E as i,F as d,M as $,N as E,a0 as Ue,a1 as $e,V as G,W as Te,au as V,X as Q,p as q,w as ce,G as o,g as y,av as k,aw as pe,ax as ie,b as Ve,U as x,ay as Fe,R as Ae,az as Le,aA as ze,A as Be,B as Y,aB as X,$ as Ke,J as ae,aC as Ne,aD as Ee,aE as qe,h as Ye,aF as Re}from"./index-BKVUJ49Y.js";import{V as Ge}from"./vue-draggable-next.esm-bundler-209fPSDV.js";import{_ as Z,a as ue,D as de,l as Oe,S as H}from"./SchemaForm-DPaHjFeH.js";import{_ as me,a as fe}from"./index-DRFPdzkk.js";import{C as _e,a as ve,T as Je,_ as We}from"./ActionButton-CJJ0zyet.js";import{_ as be}from"./index-OY7l33W6.js";import{_ as ye,C as he}from"./index-DalzOi1G.js";import{S as ge,a as Pe}from"./index-C6L_XfkU.js";import{_ as we}from"./index-C8iWyXjd.js";import{c as Xe}from"./common-GcDQZo6k.js";import{h as je,_ as He}from"./html2canvas.esm-Z2nexxoG.js";import{a as R}from"./form-Dy4UUKWO.js";import{C as Qe,D as Ze}from"./DeleteFilled-DDWhYTzd.js";import{d as j}from"./dict-DrHtWIb_.js";import{M as eo}from"./index-lN2lfoOB.js";import{S as oo}from"./index-BNu7rJFq.js";import{T as to}from"./index-KTZ4ZaWk.js";import"./index-BiMXlLES.js";import"./SwapRightOutlined-CvrqlWKA.js";import"./index-CzOiOUBF.js";import"./PlusOutlined-B1JrIy6C.js";import"./ArrowRightOutlined-BBBrtYbM.js";import"./index-ByRX77fU.js";const De=s=>(Ue("data-v-7e72941f"),s=s(),$e(),s),ao={class:"material-area"},lo={class:"material-layout-area"},ro=De(()=>U("div",{class:"title"},"布局组件",-1)),no={class:"content"},so={class:"material-data-area"},co=De(()=>U("div",{class:"title"},"基础组件",-1)),po={class:"content"},io=S({__name:"MaterialArea",setup(s){const c=g({layoutMaterials:[{label:"栅格",value:"grid"},{label:"卡片",value:"card"},{label:"分割线",value:"divider"},{label:"折叠框",value:"collapse"}],dataMaterials:[{label:"输入框",value:"input"},{label:"选择器",value:"select"},{label:"日期选择器",value:"date"},{label:"数字输入框",value:"number"},{label:"开关",value:"switch"},{label:"单选框",value:"radio"},{label:"多选框",value:"checkbox"}]}),t=e=>{var p;const l=e.target;(p=e.dataTransfer)==null||p.setData("material",l.dataset.material)};return(e,l)=>{const p=le;return r(),I("div",ao,[U("div",lo,[ro,U("div",no,[(r(!0),I(T,null,z(c.value.layoutMaterials,m=>(r(),i(p,{type:"dashed",key:m.value,draggable:"true",onDragstart:t,"data-material":m.value},{default:d(()=>[$(E(m.label),1)]),_:2},1032,["data-material"]))),128))])]),U("div",so,[co,U("div",po,[(r(!0),I(T,null,z(c.value.dataMaterials,m=>(r(),i(p,{type:"dashed",key:m.value,draggable:"true",onDragstart:t,"data-material":m.value},{default:d(()=>[$(E(m.label),1)]),_:2},1032,["data-material"]))),128))])])])}}}),uo=G(io,[["__scopeId","data-v-7e72941f"]]),L={formItemProp:{label:"",name:"",required:!1},show:void 0},mo={...L,controlProp:{allowClear:!0,bordered:!0,disabled:!1,maxlength:null,size:"middle"},type:"input",id:""},fo={...L,controlProp:{allowClear:!0,bordered:!0,disabled:!1,mode:null,size:"middle",virtual:!0},type:"select",id:""},_o={...L,controlProp:{disabled:!1,size:"middle"},type:"switch",id:""},vo={...L,controlProp:{disabled:!1,size:"middle",buttonStyle:"solid",optionType:"button"},type:"radio",id:""},bo={...L,controlProp:{disabled:!1},type:"checkbox",id:""},yo={...L,controlProp:{allowClear:!1,bordered:!0,disabled:!1,format:"YYYY-MM-DD",mode:"",valueFormat:"YYYY-MM-DD",size:"middle",picker:""},type:"date",id:""},ho={...L,controlProp:{disabled:!1,size:"middle",bordered:!0,controls:!0,max:null,min:null,precision:null,step:1},type:"number",id:""},go={type:"grid",controlProp:{gutter:0,colNumber:2,children:[]},id:"",show:void 0},Po={type:"card",controlProp:{title:"",bordered:!0,hoverable:!1,children:[]},id:"",show:void 0},wo={type:"divider",controlProp:{type:"horizontal",plain:!1,orientation:"left",dashed:!1,title:""},id:"",show:void 0},Do={type:"collapse",controlProp:{bordered:!0,ghost:!1,header:"折叠面板",showArrow:!0,defaultExpanded:!0,children:[]},id:"",show:void 0},Co=[mo,_o,fo,vo,bo,go,Po,yo,ho,wo,Do],ko=()=>"field"+new Date().getTime().toString().slice(-4),Ce=(s,c)=>{const t=Co.find(e=>e.type===s);if(t){const e=Z.cloneDeep(t);if(e.formItemProp){const l=ko();e.formItemProp.label=l,e.formItemProp.name=l}return e.id=new Date().getTime().toString(),{...e,...c}}else throw new Error(`ControlDefault中${s}不存在,加载配置失败。`)},Io=S({__name:"MaterialGrid",props:Te({gutter:{},colNumber:{}},{children:{required:!0},childrenModifiers:{}}),emits:["update:children"],setup(s){const c=s,{gutter:t,colNumber:e}=V(c),l=Q(s,"children"),p=q(()=>24/e.value);return ce(()=>e.value,()=>{l.value?l.value.length>e.value?l.value=l.value.slice(0,e.value):l.value=l.value.concat(Array.from({length:e.value-l.value.length}).map(()=>[])):l.value=Array.from({length:e.value}).map(()=>[])},{immediate:!0}),(m,h)=>{const u=me,b=fe;return r(),i(b,{gutter:o(t)},{default:d(()=>[(r(!0),I(T,null,z(l.value,(P,w)=>(r(),i(u,{class:"gutter-col",span:p.value,key:w},{default:d(()=>[(r(),i(J,{modelValue:l.value[w],"onUpdate:modelValue":n=>l.value[w]=n,key:w},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["span"]))),128))]),_:1},8,["gutter"])}}}),So=G(Io,[["__scopeId","data-v-bd13b1ec"]]),xo=S({__name:"MaterialCard",props:{children:{required:!0},childrenModifiers:{}},emits:["update:children"],setup(s){const c=Q(s,"children");return(t,e)=>{const l=_e;return r(),i(l,k(t.$attrs,{bodyStyle:{padding:0,"min-height":"40px"}}),{default:d(()=>[y(J,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=p=>c.value=p)},null,8,["modelValue"])]),_:1},16)}}}),Mo=S({__name:"MaterialDivider",props:{type:{},plain:{type:Boolean},orientation:{},dashed:{type:Boolean},title:{}},setup(s){const c=s,{title:t,dashed:e,orientation:l,plain:p,type:m}=V(c);return(h,u)=>{const b=be;return r(),i(b,{dashed:o(e),orientation:o(l),plain:o(p),type:o(m)},{default:d(()=>[$(E(o(t)),1)]),_:1},8,["dashed","orientation","plain","type"])}}}),Uo=S({__name:"MaterialCollapse",props:{bordered:{type:Boolean},ghost:{type:Boolean},title:{},showArrow:{type:Boolean},defaultExpanded:{type:Boolean},children:{}},setup(s){const c=s,{title:t,showArrow:e,bordered:l,ghost:p,defaultExpanded:m,children:h}=V(c),u=g(""),b=g(pe());return m.value&&(u.value=b.value),(P,w)=>{const n=ye,f=he;return r(),i(f,{activeKey:u.value,"onUpdate:activeKey":w[1]||(w[1]=v=>u.value=v),bordered:o(l),ghost:o(p)},{default:d(()=>[(r(),i(n,{key:b.value,header:o(t),showArrow:o(e)},{default:d(()=>[y(J,{modelValue:o(h),"onUpdate:modelValue":w[0]||(w[0]=v=>ie(h)?h.value=v:null)},null,8,["modelValue"])]),_:1},8,["header","showArrow"]))]),_:1},8,["activeKey","bordered","ghost"])}}}),$o={input:re,select:ge,radio:Pe,switch:ue,number:we,checkbox:ve,grid:So,card:xo,date:de,divider:Mo,collapse:Uo},To=S({__name:"LowCodeCard",props:{schema:{},formData:{}},setup(s){const c=s,{schema:t,formData:e}=V(c);return(l,p)=>{const m=_e;return r(),i(m,{bodyStyle:{padding:0,"min-height":"40px"},title:o(t).controlProp.title,bordered:o(t).controlProp.bordered,hoverable:o(t).controlProp.hoverable},{default:d(()=>[y(O,{schema:o(t).controlProp.children,formData:o(e)},null,8,["schema","formData"])]),_:1},8,["title","bordered","hoverable"])}}}),Vo=S({__name:"LowCodeGrid",props:{schema:{},formData:{}},setup(s){const c=s,{schema:t,formData:e}=V(c),l=q(()=>24/t.value.controlProp.colNumber);return(p,m)=>{const h=me,u=fe;return r(),i(u,{gutter:o(t).controlProp.gutter},{default:d(()=>[(r(!0),I(T,null,z(o(t).controlProp.children,(b,P)=>(r(),i(h,{class:"gutter-col",span:l.value,key:P},{default:d(()=>[y(O,{schema:b,formData:o(e)},null,8,["schema","formData"])]),_:2},1032,["span"]))),128))]),_:1},8,["gutter"])}}}),Fo=S({__name:"LowCodeCollapse",props:{schema:{},formData:{}},setup(s){const c=s,{schema:t,formData:e}=V(c),l=g(""),p=g(pe());return t.value.controlProp.defaultExpanded.value&&(l.value=p.value),(m,h)=>{const u=ye,b=he;return r(),i(b,{activeKey:l.value,"onUpdate:activeKey":h[0]||(h[0]=P=>l.value=P),bordered:o(t).controlProp.bordered,ghost:o(t).controlProp.ghost},{default:d(()=>[(r(),i(u,{key:p.value,header:o(t).controlProp.title,showArrow:o(t).controlProp.showArrow},{default:d(()=>[y(O,{schema:o(t).controlProp.children,formData:o(e)},null,8,["schema","formData"])]),_:1},8,["header","showArrow"]))]),_:1},8,["activeKey","bordered","ghost"])}}}),O=S({__name:"LowCodeFormItem",props:{schema:{},formData:{}},setup(s){const c=s,{schema:t,formData:e}=V(c),l=g([]),p=g({});(()=>{t.value.map(u=>{"dict"in u.controlProp&&l.value.push(u.controlProp.dict)})})();const h=()=>{l.value.length>0&&Xe.getDict(l.value).then(u=>{const{code:b,data:P,msg:w}=u;b==200&&l.value.map(n=>{p.value[n]=P[n]})})};return Ve(()=>{h()}),(u,b)=>{const P=be,w=re,n=ge,f=Pe,v=de,_=we,C=ve,F=ue,B=ne;return r(!0),I(T,null,z(o(t),a=>(r(),I(T,null,[["grid","card","collapse","divider"].includes(a.type)?(r(),I(T,{key:0},[a.type=="card"?(r(),i(To,{key:a.name,schema:a,formData:o(e)},null,8,["schema","formData"])):x("",!0),a.type=="grid"?(r(),i(Vo,{key:a.name,schema:a,formData:o(e)},null,8,["schema","formData"])):x("",!0),a.type=="collapse"?(r(),i(Fo,{key:a.name,schema:a,formData:o(e)},null,8,["schema","formData"])):x("",!0),a.type=="divider"?(r(),i(P,k({key:3,ref_for:!0},a.controlProp,{key:a.name}),{default:d(()=>[$(E(a.controlProp.title),1)]),_:2},1040)):x("",!0)],64)):(r(),i(B,{label:a.formItemProp.label,name:a.formItemProp.name,key:a.name,required:a.formItemProp.required},{default:d(()=>[a.type=="input"?(r(),i(w,k({key:0,value:o(e)[a.formItemProp.name],"onUpdate:value":D=>o(e)[a.formItemProp.name]=D,ref_for:!0},a.controlProp),null,16,["value","onUpdate:value"])):x("",!0),a.type=="select"?(r(),i(n,k({key:1,value:o(e)[a.formItemProp.name],"onUpdate:value":D=>o(e)[a.formItemProp.name]=D,ref_for:!0},a.controlProp,{options:p.value[a.controlProp.dict]}),null,16,["value","onUpdate:value","options"])):x("",!0),a.type=="radio"?(r(),i(f,k({key:2,value:o(e)[a.formItemProp.name],"onUpdate:value":D=>o(e)[a.formItemProp.name]=D,ref_for:!0},a.controlProp,{options:p.value[a.controlProp.dict]}),null,16,["value","onUpdate:value","options"])):x("",!0),a.type=="date"?(r(),i(v,k({key:3,value:o(e)[a.formItemProp.name],"onUpdate:value":D=>o(e)[a.formItemProp.name]=D,ref_for:!0},a.controlProp),null,16,["value","onUpdate:value"])):x("",!0),a.type=="number"?(r(),i(_,k({key:4,value:o(e)[a.formItemProp.name],"onUpdate:value":D=>o(e)[a.formItemProp.name]=D,ref_for:!0},a.controlProp),null,16,["value","onUpdate:value"])):x("",!0),a.type=="checkbox"?(r(),i(C,k({key:5,value:o(e)[a.formItemProp.name],"onUpdate:value":D=>o(e)[a.formItemProp.name]=D,ref_for:!0},a.controlProp,{options:p.value[a.controlProp.dict]}),null,16,["value","onUpdate:value","options"])):x("",!0),a.type=="switch"?(r(),i(F,k({key:6,checked:o(e)[a.formItemProp.name],"onUpdate:checked":D=>o(e)[a.formItemProp.name]=D,ref_for:!0},a.controlProp),null,16,["checked","onUpdate:checked"])):x("",!0)]),_:2},1032,["label","name","required"]))],64))),256)}}}),ke=S({__name:"LowCodeForm",props:{schema:{},formData:{}},setup(s){const c=s,{schema:t,formData:e}=V(c);return(l,p)=>{const m=se;return r(),i(m,k({model:o(e)},o(t).formConfig),{default:d(()=>[y(O,{formData:o(e),schema:o(t).formCfgItemList},null,8,["formData","schema"])]),_:1},16,["model"])}}}),ee=Fe("formDesign",()=>{const s=g([]),c=g({}),t=g({}),e=g(""),l=n=>{const{id:f,schema:v,name:_,description:C,status:F}=n;e.value=f,m.value={name:_,description:C,status:F},s.value=v.formCfgItemList,c.value=v.formConfig},p=(n,f)=>{const v=f.findIndex(_=>_.id===n);v!=-1&&(t.value=f[v])},m=g({name:"",description:"",status:1}),h=(n,f)=>{const v=f.findIndex(_=>_.id===n);v!=-1&&f.splice(v,1)},u=()=>{const n=Z.cloneDeep(t.value);Reflect.deleteProperty(n,"id");const f=Ce(t.value.type,n);s.value.push(f)},b=g(!1),P=()=>{const n=document.createElement("div");n.className="preview-form",n.style.width="720px",n.style.height="500px",n.style.overflowY="auto",n.style.padding="10px",Le(ke,{schema:{formCfgItemList:s.value,formConfig:c.value},formData:{}}).mount(n).$el,document.body.appendChild(n)};return{curControlCfg:t,formCfgItemList:s,onSelectControlItem:p,copyControlItem:u,removeControlItem:h,extraFormConfig:m,onSave:async()=>{b.value=!0;let n="";if(P(),document.querySelector(".preview-form")){const F=await je(document.querySelector(".preview-form"));F&&(n=F.toDataURL("image/png"),document.body.removeChild(document.querySelector(".preview-form")))}let f=R.add;const v={schema:{formCfgItemList:s.value,formConfig:c.value},...m.value,img:n};e.value&&(f=R.update,v.id=e.value);const{code:_,msg:C}=await f(v);_==200&&Ae.success(C),b.value=!1},id:e,saveLoading:b,setFormDetail:l,formConfig:c}}),Ao=["onClick"],Lo={class:"material-util"},zo=["onClick"],Bo=S({__name:"MaterialView",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(s){ze(n=>({"5215800a":o(t).colorPrimary}));const c=Be(),{themeCfg:t}=Y(c),e=ee(),{curControlCfg:l}=Y(e),{onSelectControlItem:p,copyControlItem:m,removeControlItem:h}=e,u=Q(s,"modelValue"),b=n=>$o[n],P=(n,f)=>{const v=Oe.cloneDeep(n);switch(f){case"radio":v.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break;case"checkbox":v.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break;case"select":v.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break}return v},w=n=>{if(n.dataTransfer.getData("material")){const f=Ce(n.dataTransfer.getData("material"));u.value.push(f)}};return(n,f)=>{const v=ne;return r(),i(o(Ge),{list:u.value,"onUpdate:list":f[1]||(f[1]=_=>u.value=_),class:"material-view",onDragover:f[2]||(f[2]=X(()=>{},["prevent","stop"])),onDrop:X(w,["stop"]),animation:"300",group:{name:"form",pull:!0,put:!0},"ghost-class":"ghost"},{default:d(()=>[(r(!0),I(T,null,z(u.value,_=>(r(),I("div",{key:_,onClick:X(C=>o(p)(_.id,u.value),["stop"]),class:Ke(["material-item",{active:_.id===o(l).id}])},[_.formItemProp?(r(),i(v,{key:0,label:_.formItemProp.label,name:_.formItemProp.name},{default:d(()=>[(r(),i(ae(b(_.type)),k({ref_for:!0},P(_.controlProp,_.type),{key:_.id}),null,16))]),_:2},1032,["label","name"])):(r(),i(ae(b(_.type)),k({key:1,ref_for:!0},P(_.controlProp,_.type),{children:_.controlProp.children,"onUpdate:children":C=>_.controlProp.children=C,key:_.id}),null,16,["children","onUpdate:children"])),U("div",Lo,[U("div",{class:"icon-btn",onClick:f[0]||(f[0]=(...C)=>o(m)&&o(m)(...C))},[y(o(Qe))]),U("div",{class:"icon-btn",onClick:C=>o(h)(_.id,u.value)},[y(o(Ze))],8,zo)])],10,Ao))),128))]),_:1},8,["list"])}}}),J=G(Bo,[["__scopeId","data-v-bb0b0231"]]),Ko=[{type:"input",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},show:{type:"string",label:"显隐条件"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.maxlength":{type:"number",label:"最大长度"}}},{type:"select",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},show:{type:"string",label:"显隐条件"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.virtual":{type:"switch",label:"虚拟滚动"},"controlProp.mode":{type:"select",label:"模式",component:{dataSource:[{label:"多选",value:"multiple"},{label:"标签",value:"tag"}],allowClear:!0}},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:s,data:c,msg:t}=await j.getDictTypeList();return s==200?c.map(e=>({label:e.dictTypeDesc,value:e.dictType})):[]}}}}},{type:"switch",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},show:{type:"string",label:"显隐条件"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}}}},{type:"radio",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},show:{type:"string",label:"显隐条件"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.buttonStyle":{type:"radio",label:"样式",component:{dataSource:[{label:"描边",value:"outline"},{label:"填色",value:"solid"}]}},"controlProp.optionType":{type:"radio",label:"类型",component:{dataSource:[{label:"默认",value:"default"},{label:"按钮",value:"button"}]}},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:s,data:c,msg:t}=await j.getDictTypeList();return s==200?c.map(e=>({label:e.dictTypeDesc,value:e.dictType})):[]}}}}},{type:"checkbox",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},show:{type:"string",label:"显隐条件"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:s,data:c,msg:t}=await j.getDictTypeList();return s==200?c.map(e=>({label:e.dictTypeDesc,value:e.dictType})):[]}}}}},{type:"number",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},show:{type:"string",label:"显隐条件"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.controls":{type:"switch",label:"控件"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.max":{type:"number",label:"最大值"},"controlProp.min":{type:"number",label:"最小值"},"controlProp.precision":{type:"number",label:"精度"},"controlProp.step":{type:"number",label:"步长"}}},{type:"date",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},show:{type:"string",label:"显隐条件"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.format":{type:"string",label:"显示格式化"},"controlProp.valueFormat":{type:"string",label:"值格式化"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.mode":{type:"radio",label:"面板",component:{dataSource:[{label:"时间",value:"time"},{label:"日期",value:"date"},{label:"月",value:"month"},{label:"年",value:"year"}]}},"controlProp.picker":{type:"radio",label:"类型",component:{dataSource:[{label:"日期",value:"date"},{label:"周",value:"week"},{label:"月",value:"month"},{label:"年",value:"year"}]}}}},{type:"grid",properties:{show:{type:"string",label:"显隐条件"},"controlProp.gutter":{type:"number",label:"栅格间距"},"controlProp.colNumber":{type:"radio",label:"列配置",component:{dataSource:[{label:"一",value:1},{label:"二",value:2},{label:"三",value:3},{label:"四",value:4}]}}}},{type:"card",properties:{show:{type:"string",label:"显隐条件"},"controlProp.title":{type:"string",label:"标题"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.hoverable":{type:"switch",label:"悬浮效果"}}},{type:"divider",properties:{show:{type:"string",label:"显隐条件"},"controlProp.title":{type:"string",label:"标题"},"controlProp.orientation":{type:"radio",label:"标题位置",component:{dataSource:[{label:"左",value:"left"},{label:"中",value:"center"},{label:"右",value:"right"}]}},"controlProp.dashed":{type:"switch",label:"虚线"},"controlProp.plain":{type:"switch",label:"普通正文"}}},{type:"collapse",properties:{show:{type:"string",label:"显隐条件"},"controlProp.title":{type:"string",label:"标题"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.ghost":{type:"switch",label:"透明效果"},"controlProp.defaultExpanded":{type:"switch",label:"默认展开"},"controlProp.showArrow":{type:"switch",label:"显示箭头"}}}],No={key:1},Eo=S({__name:"MaterialCfg",setup(s){const c=ee(),{curControlCfg:t,formConfig:e}=Y(c),l=g({layout:{layout:"horizontal",labelAlign:"right",labelCol:{span:8},wrapperCol:{span:16}},properties:{}}),p=g({layout:{layout:"horizontal",labelAlign:"right",labelCol:{span:8},wrapperCol:{span:16}},properties:{labelAlign:{label:"对齐方式",type:"radio",component:{dataSource:[{label:"左对齐",value:"left"},{label:"右对齐",value:"right"}]}},"labelCol.span":{label:"标签宽度",type:"number"},"labelCol.offset":{label:"偏移量",type:"number"}}}),m=g("item");return ce(()=>t.value.type,()=>{if(t.value.type){let h=Ko.find(u=>u.type===t.value.type);h&&(l.value.properties=Z.cloneDeep(h.properties))}},{immediate:!0}),(h,u)=>{const b=Ne,P=We,w=Je;return r(),i(w,{activeKey:m.value,"onUpdate:activeKey":u[0]||(u[0]=n=>m.value=n)},{default:d(()=>[y(P,{key:"item",tab:"控件配置"},{default:d(()=>[o(t).id?(r(),i(o(H),{layout:l.value.layout,properties:l.value.properties,formData:o(t),key:o(t).id},null,8,["layout","properties","formData"])):(r(),I("div",No,[y(b)]))]),_:1}),y(P,{key:"form",tab:"表单配置"},{default:d(()=>[y(o(H),{layout:p.value.layout,properties:p.value.properties,formData:o(e)},null,8,["layout","properties","formData"])]),_:1})]),_:1},8,["activeKey"])}}}),qo={class:"form-design"},Yo={class:"middle-part"},Ro=S({__name:"FormEditor",props:{id:{}},setup(s){const c=s,{id:t}=V(c),e=ee(),{formCfgItemList:l,extraFormConfig:p,saveLoading:m,formConfig:h}=Y(e),{onSave:u,setFormDetail:b}=e;t.value?R.getDetail(t.value).then(N=>{const{code:M,data:A,msg:W}=N;M==200&&b(A)}):b({id:"",name:"",description:"",schema:{formCfgItemList:[],formConfig:{labelCol:{span:void 0,offset:void 0},labelAlign:"left"}},img:"",status:1});const P=q(()=>t.value?p.value.name:"新建表单"),w=q(()=>t.value?p.value.description:""),n=g(!1),f=g({layout:{labelAlign:"left",layout:"horizontal",labelCol:{span:4}},properties:{name:{type:"string",label:"表单名称"},description:{type:"string",label:"备注"},status:{type:"radio",label:"状态",component:{buttonStyle:"solid",dataSource:[{label:"启用",value:1},{label:"停用",value:0}]}}}}),v=()=>{n.value=!0},_=Ee(),C=()=>{_.go(-1)},F=()=>{u().then(()=>{C()}),n.value=!1},B=g(!1),a=g({}),D=()=>{B.value=!0},Ie=()=>{R.getTemplate(t.value).then(N=>{const{code:M,data:A,msg:W}=N;M==200&&Re(A,p.value.name,"vue")})};return(N,M)=>{const A=le,W=oo,oe=to,Se=He,xe=se,te=eo,Me=qe("loading");return r(),I(T,null,[y(Se,{title:P.value,subTitle:w.value,onBack:C,ghost:!1,style:{padding:"10px 24px"}},{extra:d(()=>[y(W,null,{default:d(()=>[o(t)?(r(),i(A,{key:0,onClick:Ie},{default:d(()=>[$(" 导出 ")]),_:1})):x("",!0),y(A,{onClick:D},{default:d(()=>[$(" 预览 ")]),_:1}),y(A,{onClick:v,type:"primary"},{default:d(()=>[$(" 保存 ")]),_:1})]),_:1})]),tags:d(()=>[o(p).status?(r(),i(oe,{key:0,color:"#87d068"},{default:d(()=>[$("启用")]),_:1})):(r(),i(oe,{key:1,color:"#f50"},{default:d(()=>[$("停用")]),_:1}))]),_:1},8,["title","subTitle"]),Ye((r(),I("div",qo,[y(uo,{class:"left-part"}),U("div",Yo,[y(xe,k(o(h),{class:"middle-part-content"}),{default:d(()=>[y(J,{modelValue:o(l),"onUpdate:modelValue":M[0]||(M[0]=K=>ie(l)?l.value=K:null)},null,8,["modelValue"])]),_:1},16)]),y(Eo,{class:"right-part"})])),[[Me,o(m),void 0,{fullscreen:!0}]]),y(te,{open:n.value,"onUpdate:open":M[1]||(M[1]=K=>n.value=K),title:"保存",onOk:F},{default:d(()=>[y(o(H),{layout:f.value.layout,properties:f.value.properties,"form-data":o(p)},null,8,["layout","properties","form-data"])]),_:1},8,["open"]),y(te,{open:B.value,"onUpdate:open":M[2]||(M[2]=K=>B.value=K),title:"预览"},{default:d(()=>[y(ke,{formData:a.value,schema:{formCfgItemList:o(l),formConfig:o(h)}},null,8,["formData","schema"])]),_:1},8,["open"])],64)}}}),_t=G(Ro,[["__scopeId","data-v-69e27a11"]]);export{_t as default};
