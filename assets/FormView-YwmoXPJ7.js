import{B as Ht,I as hn,_ as mn}from"./index-Bcw6g2LH.js";import{d as se,e as me,N as I,O as le,a3 as V,Z as Le,aJ as qe,U as X,V as J,a0 as vt,a6 as Nt,aK as gn,aL as vn,Q as nt,aM as Ft,aN as bn,L as yn,ah as _n,M as Ct,h as wn,w as Wt,W as O,k as H,aO as bt,aP as Dn,aQ as En,R as Sn,S as Ke,aR as rt,aS as Cn,Y as kt,aF as In,aT as Pn}from"./index-DKz2Y_to.js";import{_ as It,l as Tn}from"./lodash-CmFMvF3r.js";import{_ as xn,a as On,C as An,d as Mn,M as Nn}from"./index-DvUDOUI-.js";import{S as Fn,R as kn}from"./index-CRjxXs3l.js";import{a as Ln,D as Rn,S as qt}from"./SchemaForm-CigfZpGY.js";import{I as $n}from"./index-CjuKPHtH.js";import{C as Yn,D as Vn}from"./DeleteFilled-sX_Z7wdH.js";import{d as at}from"./dict-XyMQwm6s.js";import"./PlusOutlined-4zZLP-Nt.js";import"./index-BGAOehmi.js";const Kt=t=>(gn("data-v-22dd1147"),t=t(),vn(),t),Xn={class:"material-area"},Bn={class:"material-layout-area"},zn=Kt(()=>V("div",{class:"title"},"布局组件",-1)),jn={class:"content"},Gn={class:"material-data-area"},Un=Kt(()=>V("div",{class:"title"},"基础组件",-1)),Hn={class:"content"},Wn=se({__name:"MaterialArea",setup(t){const e=me({layoutMaterials:[{label:"栅格",value:"grid"},{label:"卡片",value:"card"}],dataMaterials:[{label:"输入框",value:"input"},{label:"选择器",value:"select"},{label:"日期选择器",value:"date"},{label:"数字输入框",value:"number"},{label:"开关",value:"switch"},{label:"单选框",value:"radio"},{label:"多选框",value:"checkbox"}]}),n=o=>{var a;const r=o.target;(a=o.dataTransfer)==null||a.setData("material",r.dataset.material)};return(o,r)=>{const a=Ht;return I(),le("div",Xn,[V("div",Bn,[zn,V("div",jn,[(I(!0),le(Le,null,qe(e.value.layoutMaterials,i=>(I(),X(a,{type:"dashed",key:i.value,draggable:"true",onDragstart:n,"data-material":i.value},{default:J(()=>[vt(Nt(i.label),1)]),_:2},1032,["data-material"]))),128))])]),V("div",Gn,[Un,V("div",Hn,[(I(!0),le(Le,null,qe(e.value.dataMaterials,i=>(I(),X(a,{type:"dashed",key:i.value,draggable:"true",onDragstart:n,"data-material":i.value},{default:J(()=>[vt(Nt(i.label),1)]),_:2},1032,["data-material"]))),128))])])])}}}),qn=nt(Wn,[["__scopeId","data-v-22dd1147"]]);/*!
  * vue-draggable-next v2.2.0
  * (c) 2023 Anish George
  * @license MIT
  *//**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,o)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lt(Object(n),!0).forEach(function(o){Kn(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function je(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?je=function(e){return typeof e}:je=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(t)}function Kn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ee(){return ee=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ee.apply(this,arguments)}function Qn(t,e){if(t==null)return{};var n={},o=Object.keys(t),r,a;for(a=0;a<o.length;a++)r=o[a],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Zn(t,e){if(t==null)return{};var n=Qn(t,e),o,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)o=a[r],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}var Jn="1.14.0";function Z(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var te=Z(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Re=Z(/Edge/i),Rt=Z(/firefox/i),Ae=Z(/safari/i)&&!Z(/chrome/i)&&!Z(/android/i),Qt=Z(/iP(ad|od|hone)/i),eo=Z(/chrome/i)&&Z(/android/i),Zt={capture:!1,passive:!1};function w(t,e,n){t.addEventListener(e,n,!te&&Zt)}function _(t,e,n){t.removeEventListener(e,n,!te&&Zt)}function Qe(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function to(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function U(t,e,n,o){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Qe(t,e):Qe(t,e))||o&&t===n)return t;if(t===n)break}while(t=to(t))}return null}var $t=/\s+/g;function L(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace($t," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace($t," ")}}function h(t,e,n){var o=t&&t.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=n+(typeof n=="string"?"":"px")}}function we(t,e){var n="";if(typeof t=="string")n=t;else do{var o=h(t,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function Jt(t,e,n){if(t){var o=t.getElementsByTagName(e),r=0,a=o.length;if(n)for(;r<a;r++)n(o[r],r);return o}return[]}function W(){var t=document.scrollingElement;return t||document.documentElement}function P(t,e,n,o,r){if(!(!t.getBoundingClientRect&&t!==window)){var a,i,s,l,u,p,d;if(t!==window&&t.parentNode&&t!==W()?(a=t.getBoundingClientRect(),i=a.top,s=a.left,l=a.bottom,u=a.right,p=a.height,d=a.width):(i=0,s=0,l=window.innerHeight,u=window.innerWidth,p=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!te))do if(r&&r.getBoundingClientRect&&(h(r,"transform")!=="none"||n&&h(r,"position")!=="static")){var g=r.getBoundingClientRect();i-=g.top+parseInt(h(r,"border-top-width")),s-=g.left+parseInt(h(r,"border-left-width")),l=i+a.height,u=s+a.width;break}while(r=r.parentNode);if(o&&t!==window){var v=we(r||t),y=v&&v.a,f=v&&v.d;v&&(i/=f,s/=y,d/=y,p/=f,l=i+p,u=s+d)}return{top:i,left:s,bottom:l,right:u,width:d,height:p}}}function Yt(t,e,n){for(var o=ie(t,!0),r=P(t)[e];o;){var a=P(o)[n],i=void 0;if(i=r>=a,!i)return o;if(o===W())break;o=ie(o,!1)}return!1}function De(t,e,n,o){for(var r=0,a=0,i=t.children;a<i.length;){if(i[a].style.display!=="none"&&i[a]!==m.ghost&&(o||i[a]!==m.dragged)&&U(i[a],n.draggable,t,!1)){if(r===e)return i[a];r++}a++}return null}function Pt(t,e){for(var n=t.lastElementChild;n&&(n===m.ghost||h(n,"display")==="none"||e&&!Qe(n,e));)n=n.previousElementSibling;return n||null}function Y(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==m.clone&&(!e||Qe(t,e))&&n++;return n}function Vt(t){var e=0,n=0,o=W();if(t)do{var r=we(t),a=r.a,i=r.d;e+=t.scrollLeft*a,n+=t.scrollTop*i}while(t!==o&&(t=t.parentNode));return[e,n]}function no(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n)}return-1}function ie(t,e){if(!t||!t.getBoundingClientRect)return W();var n=t,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=h(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return W();if(o||e)return n;o=!0}}while(n=n.parentNode);return W()}function oo(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function it(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Me;function en(t,e){return function(){if(!Me){var n=arguments,o=this;n.length===1?t.call(o,n[0]):t.apply(o,n),Me=setTimeout(function(){Me=void 0},e)}}}function ro(){clearTimeout(Me),Me=void 0}function tn(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function nn(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var $="Sortable"+new Date().getTime();function ao(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(r){if(!(h(r,"display")==="none"||r===m.ghost)){t.push({target:r,rect:P(r)});var a=q({},t[t.length-1].rect);if(r.thisAnimationDuration){var i=we(r,!0);i&&(a.top-=i.f,a.left-=i.e)}r.fromRect=a}})}},addAnimationState:function(o){t.push(o)},removeAnimationState:function(o){t.splice(no(t,{target:o}),1)},animateAll:function(o){var r=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var a=!1,i=0;t.forEach(function(s){var l=0,u=s.target,p=u.fromRect,d=P(u),g=u.prevFromRect,v=u.prevToRect,y=s.rect,f=we(u,!0);f&&(d.top-=f.f,d.left-=f.e),u.toRect=d,u.thisAnimationDuration&&it(g,d)&&!it(p,d)&&(y.top-d.top)/(y.left-d.left)===(p.top-d.top)/(p.left-d.left)&&(l=lo(y,g,v,r.options)),it(d,p)||(u.prevFromRect=p,u.prevToRect=d,l||(l=r.options.animation),r.animate(u,y,d,l)),l&&(a=!0,i=Math.max(i,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),a?e=setTimeout(function(){typeof o=="function"&&o()},i):typeof o=="function"&&o(),t=[]},animate:function(o,r,a,i){if(i){h(o,"transition",""),h(o,"transform","");var s=we(this.el),l=s&&s.a,u=s&&s.d,p=(r.left-a.left)/(l||1),d=(r.top-a.top)/(u||1);o.animatingX=!!p,o.animatingY=!!d,h(o,"transform","translate3d("+p+"px,"+d+"px,0)"),this.forRepaintDummy=io(o),h(o,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),h(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){h(o,"transition",""),h(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},i)}}}}function io(t){return t.offsetWidth}function lo(t,e,n,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*o.animation}var ve=[],lt={initializeByDefault:!0},$e={mount:function(e){for(var n in lt)lt.hasOwnProperty(n)&&!(n in e)&&(e[n]=lt[n]);ve.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ve.push(e)},pluginEvent:function(e,n,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var a=e+"Global";ve.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][a]&&n[i.pluginName][a](q({sortable:n},o)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](q({sortable:n},o)))})},initializePlugins:function(e,n,o,r){ve.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[l]=u,ee(o,u.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);typeof i<"u"&&(e.options[a]=i)}},getEventProperties:function(e,n){var o={};return ve.forEach(function(r){typeof r.eventProperties=="function"&&ee(o,r.eventProperties.call(n[r.pluginName],e))}),o},modifyOption:function(e,n,o){var r;return ve.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(r=a.optionListeners[n].call(e[a.pluginName],o))}),r}};function so(t){var e=t.sortable,n=t.rootEl,o=t.name,r=t.targetEl,a=t.cloneEl,i=t.toEl,s=t.fromEl,l=t.oldIndex,u=t.newIndex,p=t.oldDraggableIndex,d=t.newDraggableIndex,g=t.originalEvent,v=t.putSortable,y=t.extraEventProperties;if(e=e||n&&n[$],!!e){var f,T=e.options,K="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!te&&!Re?f=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent(o,!0,!0)),f.to=i||n,f.from=s||n,f.item=r||n,f.clone=a,f.oldIndex=l,f.newIndex=u,f.oldDraggableIndex=p,f.newDraggableIndex=d,f.originalEvent=g,f.pullMode=v?v.lastPutMode:void 0;var M=q(q({},y),$e.getEventProperties(o,e));for(var B in M)f[B]=M[B];n&&n.dispatchEvent(f),T[K]&&T[K].call(e,f)}}var uo=["evt"],F=function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.evt,a=Zn(o,uo);$e.pluginEvent.bind(m)(e,n,q({dragEl:c,parentEl:E,ghostEl:b,rootEl:D,nextEl:he,lastDownEl:Ge,cloneEl:S,cloneHidden:ae,dragStarted:Te,putSortable:x,activeSortable:m.active,originalEvent:r,oldIndex:_e,oldDraggableIndex:Ne,newIndex:R,newDraggableIndex:re,hideGhostForTarget:ln,unhideGhostForTarget:sn,cloneNowHidden:function(){ae=!0},cloneNowShown:function(){ae=!1},dispatchSortableEvent:function(s){N({sortable:n,name:s,originalEvent:r})}},a))};function N(t){so(q({putSortable:x,cloneEl:S,targetEl:c,rootEl:D,oldIndex:_e,oldDraggableIndex:Ne,newIndex:R,newDraggableIndex:re},t))}var c,E,b,D,he,Ge,S,ae,_e,R,Ne,re,Ve,x,ye=!1,Ze=!1,Je=[],pe,z,st,ut,Xt,Bt,Te,be,Fe,ke=!1,Xe=!1,Ue,A,ct=[],yt=!1,et=[],ot=typeof document<"u",Be=Qt,zt=Re||te?"cssFloat":"float",co=ot&&!eo&&!Qt&&"draggable"in document.createElement("div"),on=function(){if(ot){if(te)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),rn=function(e,n){var o=h(e),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),a=De(e,0,n),i=De(e,1,n),s=a&&h(a),l=i&&h(i),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+P(a).width,p=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+P(i).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return i&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return a&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=r&&o[zt]==="none"||i&&o[zt]==="none"&&u+p>r)?"vertical":"horizontal"},po=function(e,n,o){var r=o?e.left:e.top,a=o?e.right:e.bottom,i=o?e.width:e.height,s=o?n.left:n.top,l=o?n.right:n.bottom,u=o?n.width:n.height;return r===s||a===l||r+i/2===s+u/2},fo=function(e,n){var o;return Je.some(function(r){var a=r[$].options.emptyInsertThreshold;if(!(!a||Pt(r))){var i=P(r),s=e>=i.left-a&&e<=i.right+a,l=n>=i.top-a&&n<=i.bottom+a;if(s&&l)return o=r}}),o},an=function(e){function n(a,i){return function(s,l,u,p){var d=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(a==null&&(i||d))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return n(a(s,l,u,p),i)(s,l,u,p);var g=(i?s:l).options.group.name;return a===!0||typeof a=="string"&&a===g||a.join&&a.indexOf(g)>-1}}var o={},r=e.group;(!r||je(r)!="object")&&(r={name:r}),o.name=r.name,o.checkPull=n(r.pull,!0),o.checkPut=n(r.put),o.revertClone=r.revertClone,e.group=o},ln=function(){!on&&b&&h(b,"display","none")},sn=function(){!on&&b&&h(b,"display","")};ot&&document.addEventListener("click",function(t){if(Ze)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ze=!1,!1},!0);var fe=function(e){if(c){e=e.touches?e.touches[0]:e;var n=fo(e.clientX,e.clientY);if(n){var o={};for(var r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[$]._onDragOver(o)}}},ho=function(e){c&&c.parentNode[$]._isOutsideThisEl(e.target)};function m(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ee({},e),t[$]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return rn(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,s){i.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:m.supportPointer!==!1&&"PointerEvent"in window&&!Ae,emptyInsertThreshold:5};$e.initializePlugins(this,t,n);for(var o in n)!(o in e)&&(e[o]=n[o]);an(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:co,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?w(t,"pointerdown",this._onTapStart):(w(t,"mousedown",this._onTapStart),w(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(w(t,"dragover",this),w(t,"dragenter",this)),Je.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ee(this,ao())}m.prototype={constructor:m,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(be=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,c):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,o=this.el,r=this.options,a=r.preventOnFilter,i=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,p=r.filter;if(Do(o),!c&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||r.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Ae&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=U(l,r.draggable,o,!1),!(l&&l.animated)&&Ge!==l)){if(_e=Y(l),Ne=Y(l,r.draggable),typeof p=="function"){if(p.call(this,e,l,this)){N({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:o,fromEl:o}),F("filter",n,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(p&&(p=p.split(",").some(function(d){if(d=U(u,d.trim(),o,!1),d)return N({sortable:n,rootEl:d,name:"filter",targetEl:l,fromEl:o,toEl:o}),F("filter",n,{evt:e}),!0}),p)){a&&e.cancelable&&e.preventDefault();return}r.handle&&!U(u,r.handle,o,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,o){var r=this,a=r.el,i=r.options,s=a.ownerDocument,l;if(o&&!c&&o.parentNode===a){var u=P(o);if(D=a,c=o,E=c.parentNode,he=c.nextSibling,Ge=o,Ve=i.group,m.dragged=c,pe={target:c,clientX:(n||e).clientX,clientY:(n||e).clientY},Xt=pe.clientX-u.left,Bt=pe.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,c.style["will-change"]="all",l=function(){if(F("delayEnded",r,{evt:e}),m.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Rt&&r.nativeDraggable&&(c.draggable=!0),r._triggerDragStart(e,n),N({sortable:r,name:"choose",originalEvent:e}),L(c,i.chosenClass,!0)},i.ignore.split(",").forEach(function(p){Jt(c,p.trim(),dt)}),w(s,"dragover",fe),w(s,"mousemove",fe),w(s,"touchmove",fe),w(s,"mouseup",r._onDrop),w(s,"touchend",r._onDrop),w(s,"touchcancel",r._onDrop),Rt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,c.draggable=!0),F("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Re||te))){if(m.eventCanceled){this._onDrop();return}w(s,"mouseup",r._disableDelayedDrag),w(s,"touchend",r._disableDelayedDrag),w(s,"touchcancel",r._disableDelayedDrag),w(s,"mousemove",r._delayedDragTouchMoveHandler),w(s,"touchmove",r._delayedDragTouchMoveHandler),i.supportPointer&&w(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,i.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){c&&dt(c),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;_(e,"mouseup",this._disableDelayedDrag),_(e,"touchend",this._disableDelayedDrag),_(e,"touchcancel",this._disableDelayedDrag),_(e,"mousemove",this._delayedDragTouchMoveHandler),_(e,"touchmove",this._delayedDragTouchMoveHandler),_(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?w(document,"pointermove",this._onTouchMove):n?w(document,"touchmove",this._onTouchMove):w(document,"mousemove",this._onTouchMove):(w(c,"dragend",this),w(D,"dragstart",this._onDragStart));try{document.selection?He(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ye=!1,D&&c){F("dragStarted",this,{evt:n}),this.nativeDraggable&&w(document,"dragover",ho);var o=this.options;!e&&L(c,o.dragClass,!1),L(c,o.ghostClass,!0),m.active=this,e&&this._appendGhost(),N({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(z){this._lastX=z.clientX,this._lastY=z.clientY,ln();for(var e=document.elementFromPoint(z.clientX,z.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(z.clientX,z.clientY),e!==n);)n=e;if(c.parentNode[$]._isOutsideThisEl(e),n)do{if(n[$]){var o=void 0;if(o=n[$]._onDragOver({clientX:z.clientX,clientY:z.clientY,target:e,rootEl:n}),o&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);sn()}},_onTouchMove:function(e){if(pe){var n=this.options,o=n.fallbackTolerance,r=n.fallbackOffset,a=e.touches?e.touches[0]:e,i=b&&we(b,!0),s=b&&i&&i.a,l=b&&i&&i.d,u=Be&&A&&Vt(A),p=(a.clientX-pe.clientX+r.x)/(s||1)+(u?u[0]-ct[0]:0)/(s||1),d=(a.clientY-pe.clientY+r.y)/(l||1)+(u?u[1]-ct[1]:0)/(l||1);if(!m.active&&!ye){if(o&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(b){i?(i.e+=p-(st||0),i.f+=d-(ut||0)):i={a:1,b:0,c:0,d:1,e:p,f:d};var g="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");h(b,"webkitTransform",g),h(b,"mozTransform",g),h(b,"msTransform",g),h(b,"transform",g),st=p,ut=d,z=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!b){var e=this.options.fallbackOnBody?document.body:D,n=P(c,!0,Be,!0,e),o=this.options;if(Be){for(A=e;h(A,"position")==="static"&&h(A,"transform")==="none"&&A!==document;)A=A.parentNode;A!==document.body&&A!==document.documentElement?(A===document&&(A=W()),n.top+=A.scrollTop,n.left+=A.scrollLeft):A=W(),ct=Vt(A)}b=c.cloneNode(!0),L(b,o.ghostClass,!1),L(b,o.fallbackClass,!0),L(b,o.dragClass,!0),h(b,"transition",""),h(b,"transform",""),h(b,"box-sizing","border-box"),h(b,"margin",0),h(b,"top",n.top),h(b,"left",n.left),h(b,"width",n.width),h(b,"height",n.height),h(b,"opacity","0.8"),h(b,"position",Be?"absolute":"fixed"),h(b,"zIndex","100000"),h(b,"pointerEvents","none"),m.ghost=b,e.appendChild(b),h(b,"transform-origin",Xt/parseInt(b.style.width)*100+"% "+Bt/parseInt(b.style.height)*100+"%")}},_onDragStart:function(e,n){var o=this,r=e.dataTransfer,a=o.options;if(F("dragStart",this,{evt:e}),m.eventCanceled){this._onDrop();return}F("setupClone",this),m.eventCanceled||(S=nn(c),S.draggable=!1,S.style["will-change"]="",this._hideClone(),L(S,this.options.chosenClass,!1),m.clone=S),o.cloneId=He(function(){F("clone",o),!m.eventCanceled&&(o.options.removeCloneOnHide||D.insertBefore(S,c),o._hideClone(),N({sortable:o,name:"clone"}))}),!n&&L(c,a.dragClass,!0),n?(Ze=!0,o._loopId=setInterval(o._emulateDragOver,50)):(_(document,"mouseup",o._onDrop),_(document,"touchend",o._onDrop),_(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(o,r,c)),w(document,"drop",o),h(c,"transform","translateZ(0)")),ye=!0,o._dragStartId=He(o._dragStarted.bind(o,n,e)),w(document,"selectstart",o),Te=!0,Ae&&h(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,o=e.target,r,a,i,s=this.options,l=s.group,u=m.active,p=Ve===l,d=s.sort,g=x||u,v,y=this,f=!1;if(yt)return;function T(Pe,pn){F(Pe,y,q({evt:e,isOwner:p,axis:v?"vertical":"horizontal",revert:i,dragRect:r,targetRect:a,canSort:d,fromSortable:g,target:o,completed:M,onMove:function(Mt,fn){return ze(D,n,c,r,Mt,P(Mt),e,fn)},changed:B},pn))}function K(){T("dragOverAnimationCapture"),y.captureAnimationState(),y!==g&&g.captureAnimationState()}function M(Pe){return T("dragOverCompleted",{insertion:Pe}),Pe&&(p?u._hideClone():u._showClone(y),y!==g&&(L(c,x?x.options.ghostClass:u.options.ghostClass,!1),L(c,s.ghostClass,!0)),x!==y&&y!==m.active?x=y:y===m.active&&x&&(x=null),g===y&&(y._ignoreWhileAnimating=o),y.animateAll(function(){T("dragOverAnimationComplete"),y._ignoreWhileAnimating=null}),y!==g&&(g.animateAll(),g._ignoreWhileAnimating=null)),(o===c&&!c.animated||o===n&&!o.animated)&&(be=null),!s.dragoverBubble&&!e.rootEl&&o!==document&&(c.parentNode[$]._isOutsideThisEl(e.target),!Pe&&fe(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),f=!0}function B(){R=Y(c),re=Y(c,s.draggable),N({sortable:y,name:"change",toEl:n,newIndex:R,newDraggableIndex:re,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=U(o,s.draggable,n,!0),T("dragOver"),m.eventCanceled)return f;if(c.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||y._ignoreWhileAnimating===o)return M(!1);if(Ze=!1,u&&!s.disabled&&(p?d||(i=E!==D):x===this||(this.lastPutMode=Ve.checkPull(this,u,c,e))&&l.checkPut(this,u,c,e))){if(v=this._getDirection(e,o)==="vertical",r=P(c),T("dragOverValid"),m.eventCanceled)return f;if(i)return E=D,K(),this._hideClone(),T("revert"),m.eventCanceled||(he?D.insertBefore(c,he):D.appendChild(c)),M(!0);var j=Pt(n,s.draggable);if(!j||bo(e,v,this)&&!j.animated){if(j===c)return M(!1);if(j&&n===e.target&&(o=j),o&&(a=P(o)),ze(D,n,c,r,o,a,e,!!o)!==!1)return K(),n.appendChild(c),E=n,B(),M(!0)}else if(j&&vo(e,v,this)){var ue=De(n,0,s,!0);if(ue===c)return M(!1);if(o=ue,a=P(o),ze(D,n,c,r,o,a,e,!1)!==!1)return K(),n.insertBefore(c,ue),E=n,B(),M(!0)}else if(o.parentNode===n){a=P(o);var G=0,ce,Ee=c.parentNode!==n,k=!po(c.animated&&c.toRect||r,o.animated&&o.toRect||a,v),Se=v?"top":"left",ne=Yt(o,"top","top")||Yt(c,"top","top"),Ce=ne?ne.scrollTop:void 0;be!==o&&(ce=a[Se],ke=!1,Xe=!k&&s.invertSwap||Ee),G=yo(e,o,a,v,k?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Xe,be===o);var Q;if(G!==0){var de=Y(c);do de-=G,Q=E.children[de];while(Q&&(h(Q,"display")==="none"||Q===b))}if(G===0||Q===o)return M(!1);be=o,Fe=G;var Ie=o.nextElementSibling,oe=!1;oe=G===1;var Ye=ze(D,n,c,r,o,a,e,oe);if(Ye!==!1)return(Ye===1||Ye===-1)&&(oe=Ye===1),yt=!0,setTimeout(go,30),K(),oe&&!Ie?n.appendChild(c):o.parentNode.insertBefore(c,oe?Ie:o),ne&&tn(ne,0,Ce-ne.scrollTop),E=c.parentNode,ce!==void 0&&!Xe&&(Ue=Math.abs(ce-P(o)[Se])),B(),M(!0)}if(n.contains(c))return M(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){_(document,"mousemove",this._onTouchMove),_(document,"touchmove",this._onTouchMove),_(document,"pointermove",this._onTouchMove),_(document,"dragover",fe),_(document,"mousemove",fe),_(document,"touchmove",fe)},_offUpEvents:function(){var e=this.el.ownerDocument;_(e,"mouseup",this._onDrop),_(e,"touchend",this._onDrop),_(e,"pointerup",this._onDrop),_(e,"touchcancel",this._onDrop),_(document,"selectstart",this)},_onDrop:function(e){var n=this.el,o=this.options;if(R=Y(c),re=Y(c,o.draggable),F("drop",this,{evt:e}),E=c&&c.parentNode,R=Y(c),re=Y(c,o.draggable),m.eventCanceled){this._nulling();return}ye=!1,Xe=!1,ke=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_t(this.cloneId),_t(this._dragStartId),this.nativeDraggable&&(_(document,"drop",this),_(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ae&&h(document.body,"user-select",""),h(c,"transform",""),e&&(Te&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),b&&b.parentNode&&b.parentNode.removeChild(b),(D===E||x&&x.lastPutMode!=="clone")&&S&&S.parentNode&&S.parentNode.removeChild(S),c&&(this.nativeDraggable&&_(c,"dragend",this),dt(c),c.style["will-change"]="",Te&&!ye&&L(c,x?x.options.ghostClass:this.options.ghostClass,!1),L(c,this.options.chosenClass,!1),N({sortable:this,name:"unchoose",toEl:E,newIndex:null,newDraggableIndex:null,originalEvent:e}),D!==E?(R>=0&&(N({rootEl:E,name:"add",toEl:E,fromEl:D,originalEvent:e}),N({sortable:this,name:"remove",toEl:E,originalEvent:e}),N({rootEl:E,name:"sort",toEl:E,fromEl:D,originalEvent:e}),N({sortable:this,name:"sort",toEl:E,originalEvent:e})),x&&x.save()):R!==_e&&R>=0&&(N({sortable:this,name:"update",toEl:E,originalEvent:e}),N({sortable:this,name:"sort",toEl:E,originalEvent:e})),m.active&&((R==null||R===-1)&&(R=_e,re=Ne),N({sortable:this,name:"end",toEl:E,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){F("nulling",this),D=c=E=b=he=S=Ge=ae=pe=z=Te=R=re=_e=Ne=be=Fe=x=Ve=m.dragged=m.ghost=m.clone=m.active=null,et.forEach(function(e){e.checked=!0}),et.length=st=ut=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":c&&(this._onDragOver(e),mo(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,o=this.el.children,r=0,a=o.length,i=this.options;r<a;r++)n=o[r],U(n,i.draggable,this.el,!1)&&e.push(n.getAttribute(i.dataIdAttr)||wo(n));return e},sort:function(e,n){var o={},r=this.el;this.toArray().forEach(function(a,i){var s=r.children[i];U(s,this.options.draggable,r,!1)&&(o[a]=s)},this),n&&this.captureAnimationState(),e.forEach(function(a){o[a]&&(r.removeChild(o[a]),r.appendChild(o[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return U(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var o=this.options;if(n===void 0)return o[e];var r=$e.modifyOption(this,e,n);typeof r<"u"?o[e]=r:o[e]=n,e==="group"&&an(o)},destroy:function(){F("destroy",this);var e=this.el;e[$]=null,_(e,"mousedown",this._onTapStart),_(e,"touchstart",this._onTapStart),_(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(_(e,"dragover",this),_(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Je.splice(Je.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ae){if(F("hideClone",this),m.eventCanceled)return;h(S,"display","none"),this.options.removeCloneOnHide&&S.parentNode&&S.parentNode.removeChild(S),ae=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ae){if(F("showClone",this),m.eventCanceled)return;c.parentNode==D&&!this.options.group.revertClone?D.insertBefore(S,c):he?D.insertBefore(S,he):D.appendChild(S),this.options.group.revertClone&&this.animate(c,S),h(S,"display",""),ae=!1}}};function mo(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function ze(t,e,n,o,r,a,i,s){var l,u=t[$],p=u.options.onMove,d;return window.CustomEvent&&!te&&!Re?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=o,l.related=r||e,l.relatedRect=a||P(e),l.willInsertAfter=s,l.originalEvent=i,t.dispatchEvent(l),p&&(d=p.call(u,l,i)),d}function dt(t){t.draggable=!1}function go(){yt=!1}function vo(t,e,n){var o=P(De(n.el,0,n.options,!0)),r=10;return e?t.clientX<o.left-r||t.clientY<o.top&&t.clientX<o.right:t.clientY<o.top-r||t.clientY<o.bottom&&t.clientX<o.left}function bo(t,e,n){var o=P(Pt(n.el,n.options.draggable)),r=10;return e?t.clientX>o.right+r||t.clientX<=o.right&&t.clientY>o.bottom&&t.clientX>=o.left:t.clientX>o.right&&t.clientY>o.top||t.clientX<=o.right&&t.clientY>o.bottom+r}function yo(t,e,n,o,r,a,i,s){var l=o?t.clientY:t.clientX,u=o?n.height:n.width,p=o?n.top:n.left,d=o?n.bottom:n.right,g=!1;if(!i){if(s&&Ue<u*r){if(!ke&&(Fe===1?l>p+u*a/2:l<d-u*a/2)&&(ke=!0),ke)g=!0;else if(Fe===1?l<p+Ue:l>d-Ue)return-Fe}else if(l>p+u*(1-r)/2&&l<d-u*(1-r)/2)return _o(e)}return g=g||i,g&&(l<p+u*a/2||l>d-u*a/2)?l>p+u/2?1:-1:0}function _o(t){return Y(c)<Y(t)?1:-1}function wo(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function Do(t){et.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&et.push(o)}}function He(t){return setTimeout(t,0)}function _t(t){return clearTimeout(t)}ot&&w(document,"touchmove",function(t){(m.active||ye)&&t.cancelable&&t.preventDefault()});m.utils={on:w,off:_,css:h,find:Jt,is:function(e,n){return!!U(e,n,e,!1)},extend:oo,throttle:en,closest:U,toggleClass:L,clone:nn,index:Y,nextTick:He,cancelNextTick:_t,detectDirection:rn,getChild:De};m.get=function(t){return t[$]};m.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(m.utils=q(q({},m.utils),o.utils)),$e.mount(o)})};m.create=function(t,e){return new m(t,e)};m.version=Jn;var C=[],xe,wt,Dt=!1,pt,ft,tt,Oe;function Eo(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):this.options.supportPointer?w(document,"pointermove",this._handleFallbackAutoScroll):o.touches?w(document,"touchmove",this._handleFallbackAutoScroll):w(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):(_(document,"pointermove",this._handleFallbackAutoScroll),_(document,"touchmove",this._handleFallbackAutoScroll),_(document,"mousemove",this._handleFallbackAutoScroll)),jt(),We(),ro()},nulling:function(){tt=wt=xe=Dt=Oe=pt=ft=null,C.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var r=this,a=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(a,i);if(tt=n,o||this.options.forceAutoScrollFallback||Re||te||Ae){ht(n,this.options,s,o);var l=ie(s,!0);Dt&&(!Oe||a!==pt||i!==ft)&&(Oe&&jt(),Oe=setInterval(function(){var u=ie(document.elementFromPoint(a,i),!0);u!==l&&(l=u,We()),ht(n,r.options,u,o)},10),pt=a,ft=i)}else{if(!this.options.bubbleScroll||ie(s,!0)===W()){We();return}ht(n,this.options,ie(s,!1),!1)}}},ee(t,{pluginName:"scroll",initializeByDefault:!0})}function We(){C.forEach(function(t){clearInterval(t.pid)}),C=[]}function jt(){clearInterval(Oe)}var ht=en(function(t,e,n,o){if(e.scroll){var r=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,s=e.scrollSpeed,l=W(),u=!1,p;wt!==n&&(wt=n,We(),xe=e.scroll,p=e.scrollFn,xe===!0&&(xe=ie(n,!0)));var d=0,g=xe;do{var v=g,y=P(v),f=y.top,T=y.bottom,K=y.left,M=y.right,B=y.width,j=y.height,ue=void 0,G=void 0,ce=v.scrollWidth,Ee=v.scrollHeight,k=h(v),Se=v.scrollLeft,ne=v.scrollTop;v===l?(ue=B<ce&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),G=j<Ee&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(ue=B<ce&&(k.overflowX==="auto"||k.overflowX==="scroll"),G=j<Ee&&(k.overflowY==="auto"||k.overflowY==="scroll"));var Ce=ue&&(Math.abs(M-r)<=i&&Se+B<ce)-(Math.abs(K-r)<=i&&!!Se),Q=G&&(Math.abs(T-a)<=i&&ne+j<Ee)-(Math.abs(f-a)<=i&&!!ne);if(!C[d])for(var de=0;de<=d;de++)C[de]||(C[de]={});(C[d].vx!=Ce||C[d].vy!=Q||C[d].el!==v)&&(C[d].el=v,C[d].vx=Ce,C[d].vy=Q,clearInterval(C[d].pid),(Ce!=0||Q!=0)&&(u=!0,C[d].pid=setInterval((function(){o&&this.layer===0&&m.active._onTouchMove(tt);var Ie=C[this.layer].vy?C[this.layer].vy*s:0,oe=C[this.layer].vx?C[this.layer].vx*s:0;typeof p=="function"&&p.call(m.dragged.parentNode[$],oe,Ie,t,tt,C[this.layer].el)!=="continue"||tn(C[this.layer].el,oe,Ie)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&g!==l&&(g=ie(g,!1)));Dt=u}},30),un=function(e){var n=e.originalEvent,o=e.putSortable,r=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var u=o||a;s();var p=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(p.clientX,p.clientY);l(),u&&!u.el.contains(d)&&(i("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function Tt(){}Tt.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=De(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:un};ee(Tt,{pluginName:"revertOnSpill"});function xt(){}xt.prototype={onSpill:function(e){var n=e.dragEl,o=e.putSortable,r=o||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:un};ee(xt,{pluginName:"removeOnSpill"});m.mount(new Eo);m.mount(xt,Tt);function So(){return typeof window<"u"?window.console:global.console}const Co=So();function Io(t){const e=Object.create(null);return function(o){return e[o]||(e[o]=t(o))}}const Po=/-(\w)/g,Gt=Io(t=>t.replace(Po,(e,n)=>n?n.toUpperCase():""));function mt(t){t.parentElement!==null&&t.parentElement.removeChild(t)}function Ut(t,e,n){const o=n===0?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,o)}function To(t,e){return Object.values(t).indexOf(e)}function xo(t,e,n,o){if(!t)return[];const r=Object.values(t),a=e.length-o;return[...e].map((s,l)=>l>=a?r.length:r.indexOf(s))}function cn(t,e){this.$nextTick(()=>this.$emit(t.toLowerCase(),e))}function Oo(t){return e=>{this.realList!==null&&this["onDrag"+t](e),cn.call(this,t,e)}}function Ao(t){return["transition-group","TransitionGroup"].includes(t)}function Mo(t){if(!t||t.length!==1)return!1;const[{type:e}]=t;return e?Ao(e.name):!1}function No(t,e){return e?{...e.props,...e.attrs}:t}const Et=["Start","Add","Remove","Update","End"],St=["Choose","Unchoose","Sort","Filter","Clone"],Fo=["Move",...Et,...St].map(t=>"on"+t);let gt=null;const ko={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:t=>t},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},Lo=se({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...Et.map(t=>t.toLowerCase()),...St.map(t=>t.toLowerCase())],props:ko,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const t=this.$slots.default?this.$slots.default():null,e=No(this.$attrs,this.componentData);return t?(this.transitionMode=Mo(t),Ft(this.getTag(),e,t)):Ft(this.getTag(),e,[])},created(){this.list!==null&&this.modelValue!==null&&Co.error("list props are mutually exclusive! Please set one.")},mounted(){const t={};Et.forEach(r=>{t["on"+r]=Oo.call(this,r)}),St.forEach(r=>{t["on"+r]=cn.bind(this,r)});const e=Object.keys(this.$attrs).reduce((r,a)=>(r[Gt(a)]=this.$attrs[a],r),{}),n=Object.assign({},e,t,{onMove:(r,a)=>this.onDragMove(r,a)});!("draggable"in n)&&(n.draggable=">*");const o=this.$el.nodeType===1?this.$el:this.$el.parentElement;this._sortable=new m(o,n),o.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{this._sortable!==void 0&&this._sortable.destroy()}catch{}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(t){this.updateOptions(t)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?bn(this.component):this.tag},updateOptions(t){for(var e in t){const n=Gt(e);Fo.indexOf(n)===-1&&this._sortable.option(n,t[e])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick(()=>{this.visibleIndexes=xo(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)})},getUnderlyingVm(t){const e=To(this.getChildrenNodes()||[],t);if(e===-1)return null;const n=this.realList[e];return{index:e,element:n}},emitChanges(t){this.$nextTick(()=>{this.$emit("change",t)})},alterList(t){if(this.list){t(this.list);return}const e=[...this.modelValue];t(e),this.$emit("update:modelValue",e)},spliceList(){const t=e=>e.splice(...arguments);this.alterList(t)},updatePosition(t,e){const n=o=>o.splice(e,0,o.splice(t,1)[0]);this.alterList(n)},getVmIndex(t){const e=this.visibleIndexes,n=e.length;return t>n-1?n:e[t]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(t){if(!this.noTransitionOnDrag||!this.transitionMode)return;var e=this.getChildrenNodes();e[t].data=null;const n=this.getComponent();n.children=[],n.kept=void 0},onDragStart(t){this.computeIndexes(),this.context=this.getUnderlyingVm(t.item),this.context&&(t.item._underlying_vm_=this.clone(this.context.element),gt=t.item)},onDragAdd(t){const e=t.item._underlying_vm_;if(e===void 0)return;mt(t.item);const n=this.getVmIndex(t.newIndex);this.spliceList(n,0,e),this.computeIndexes();const o={element:e,newIndex:n};this.emitChanges({added:o})},onDragRemove(t){if(Ut(this.$el,t.item,t.oldIndex),t.pullMode==="clone"){mt(t.clone);return}if(!this.context)return;const e=this.context.index;this.spliceList(e,1);const n={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:n})},onDragUpdate(t){mt(t.item),Ut(t.from,t.item,t.oldIndex);const e=this.context.index,n=this.getVmIndex(t.newIndex);this.updatePosition(e,n);const o={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:o})},updateProperty(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},onDragMove(t,e){const n=this.move;if(!n||!this.realList)return!0;const o=this.getRelatedContextFromMoveEvent(t),r=this.context,a=this.computeFutureIndex(o,t);Object.assign(r,{futureIndex:a});const i=Object.assign({},t,{relatedContext:o,draggedContext:r});return n(i,e)},onDragEnd(){this.computeIndexes(),gt=null},getTrargetedComponent(t){return t.__draggable_component__},getRelatedContextFromMoveEvent({to:t,related:e}){const n=this.getTrargetedComponent(t);if(!n)return{component:n};const o=n.realList,r={list:o,component:n};if(t!==e&&o&&n.getUnderlyingVm){const a=n.getUnderlyingVm(e);if(a)return Object.assign(a,r)}return r},computeFutureIndex(t,e){const n=[...e.to.children].filter(i=>i.style.display!=="none");if(n.length===0)return 0;const o=n.indexOf(e.related),r=t.component.getVmIndex(o);return n.indexOf(gt)!==-1||!e.willInsertAfter?r:r+1}}}),ge={formItemProp:{label:"",name:"",required:!1}},Ro={...ge,controlProp:{allowClear:!0,bordered:!0,disabled:!1,maxlength:null,size:"middle"},type:"input",id:""},$o={...ge,controlProp:{allowClear:!0,bordered:!0,disabled:!1,mode:null,size:"middle",virtual:!0},type:"select",id:""},Yo={...ge,controlProp:{disabled:!1,size:"middle"},type:"switch",id:""},Vo={...ge,controlProp:{disabled:!1,size:"middle",buttonStyle:"solid",optionType:"button"},type:"radio",id:""},Xo={...ge,controlProp:{disabled:!1},type:"checkbox",id:""},Bo={...ge,controlProp:{allowClear:!1,bordered:!0,disabled:!1,format:"YYYY-MM-DD",mode:"",valueFormat:"YYYY-MM-DD",size:"middle",picker:""},type:"date",id:""},zo={...ge,controlProp:{disabled:!1,size:"middle",bordered:!0,controls:!0,max:null,min:null,precision:null,step:1},type:"number",id:""},jo={type:"grid",controlProp:{gutter:0,colNumber:2,children:[]},id:""},Go={type:"card",controlProp:{title:"",bordered:!0,hoverable:!1,children:[]},id:""},Uo=[Ro,Yo,$o,Vo,Xo,jo,Go,Bo,zo],Ho=()=>"field"+new Date().getTime().toString().slice(-4),dn=(t,e)=>{const n=Uo.find(o=>o.type===t);if(n){const o=It.cloneDeep(n);if(o.formItemProp){const r=Ho();o.formItemProp.label=r,o.formItemProp.name=r}return o.id=new Date().getTime().toString(),{...o,...e}}else throw new Error(`ControlDefault中${t}不存在,加载配置失败。`)},Wo=se({__name:"MaterialGrid",props:yn({gutter:{},colNumber:{}},{children:{required:!0},childrenModifiers:{}}),emits:["update:children"],setup(t){const e=t,{gutter:n,colNumber:o}=_n(e),r=Ct(t,"children"),a=wn(()=>24/o.value);return Wt(()=>o.value,()=>{r.value=Array.from({length:o.value}).map(()=>[])},{immediate:!0}),(i,s)=>{const l=xn,u=On;return I(),X(u,{gutter:O(n)},{default:J(()=>[(I(!0),le(Le,null,qe(r.value,(p,d)=>(I(),X(l,{class:"gutter-col",span:a.value,key:d},{default:J(()=>[(I(),X(At,{modelValue:r.value[d],"onUpdate:modelValue":g=>r.value[d]=g,key:d},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["span"]))),128))]),_:1},8,["gutter"])}}}),qo=nt(Wo,[["__scopeId","data-v-3168d6d3"]]),Ko=se({__name:"MaterialCard",props:{children:{required:!0},childrenModifiers:{}},emits:["update:children"],setup(t){const e=Ct(t,"children");return(n,o)=>{const r=An;return I(),X(r,bt(n.$attrs,{bodyStyle:{padding:0,"min-height":"40px"}}),{default:J(()=>[H(At,{modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=a=>e.value=a)},null,8,["modelValue"])]),_:1},16)}}}),Qo={input:hn,select:Fn,radio:kn,switch:Ln,number:$n,checkbox:Mn,grid:qo,card:Ko,date:Rn},Ot=Dn("formDesign",()=>{const t=me([]),e=me({}),n=(s,l)=>{const u=l.findIndex(p=>p.id===s);u!=-1&&(e.value=l[u])},o=me({name:""});return{curControlCfg:e,formConfig:t,onSelectControlItem:n,copyControlItem:()=>{const s=It.cloneDeep(e.value);Reflect.deleteProperty(s,"id");const l=dn(e.value.type,s);t.value.push(l)},removeControlItem:(s,l)=>{const u=l.findIndex(p=>p.id===s);u!=-1&&l.splice(u,1)},extraFormConfig:o,onSave:()=>{console.log({...t.value,...o.value})}}}),Zo=["onClick"],Jo={class:"material-util"},er=["onClick"],tr=se({__name:"MaterialView",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(t){En(g=>({33456708:O(n).colorPrimary}));const e=Sn(),{themeCfg:n}=Ke(e),o=Ot(),{curControlCfg:r}=Ke(o),{onSelectControlItem:a,copyControlItem:i,removeControlItem:s}=o,l=Ct(t,"modelValue"),u=g=>Qo[g],p=(g,v)=>{const y=Tn.cloneDeep(g);switch(v){case"radio":y.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break;case"checkbox":y.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break;case"select":y.options=[{label:"1",value:"1"},{label:"2",value:"2"}];break}return y},d=g=>{if(g.dataTransfer.getData("material")){const v=dn(g.dataTransfer.getData("material"));l.value.push(v)}};return(g,v)=>{const y=mn;return I(),X(O(Lo),{list:l.value,"onUpdate:list":v[1]||(v[1]=f=>l.value=f),class:"material-view",onDragover:v[2]||(v[2]=rt(()=>{},["prevent","stop"])),onDrop:rt(d,["stop"]),animation:"300",group:{name:"form",pull:!0,put:!0},"ghost-class":"ghost"},{default:J(()=>[(I(!0),le(Le,null,qe(l.value,f=>(I(),le("div",{key:f,onClick:rt(T=>O(a)(f.id,l.value),["stop"]),class:Cn(["material-item",{active:f.id===O(r).id}])},[f.formItemProp?(I(),X(y,{key:0,label:f.formItemProp.label,name:f.formItemProp.name},{default:J(()=>[(I(),X(kt(u(f.type)),bt({ref_for:!0},p(f.controlProp,f.type),{key:f.id}),null,16))]),_:2},1032,["label","name"])):(I(),X(kt(u(f.type)),bt({key:1,ref_for:!0},p(f.controlProp,f.type),{children:f.controlProp.children,"onUpdate:children":T=>f.controlProp.children=T,key:f.id}),null,16,["children","onUpdate:children"])),V("div",Jo,[V("div",{class:"icon-btn",onClick:v[0]||(v[0]=(...T)=>O(i)&&O(i)(...T))},[H(O(Yn))]),V("div",{class:"icon-btn",onClick:T=>O(s)(f.id,l.value)},[H(O(Vn))],8,er)])],10,Zo))),128))]),_:1},8,["list"])}}}),At=nt(tr,[["__scopeId","data-v-99b268c1"]]),nr=[{type:"input",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.maxlength":{type:"number",label:"最大长度"}}},{type:"select",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.allowClear":{type:"switch",label:"可清除"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.virtual":{type:"switch",label:"虚拟滚动"},"controlProp.mode":{type:"select",label:"模式",component:{dataSource:[{label:"多选",value:"multiple"},{label:"标签",value:"tag"}],allowClear:!0}},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:t,data:e,msg:n}=await at.getDictTypeList();return t==200?e.map(o=>({label:o.dictTypeDesc,value:o.dictType})):[]}}}}},{type:"switch",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}}}},{type:"radio",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.buttonStyle":{type:"radio",label:"样式",component:{dataSource:[{label:"描边",value:"outline"},{label:"填色",value:"solid"}]}},"controlProp.optionType":{type:"radio",label:"类型",component:{dataSource:[{label:"默认",value:"default"},{label:"按钮",value:"button"}]}},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:t,data:e,msg:n}=await at.getDictTypeList();return t==200?e.map(o=>({label:o.dictTypeDesc,value:o.dictType})):[]}}}}},{type:"checkbox",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.dict":{type:"select",label:"字典",component:{asyncData:async()=>{const{code:t,data:e,msg:n}=await at.getDictTypeList();return t==200?e.map(o=>({label:o.dictTypeDesc,value:o.dictType})):[]}}}}},{type:"number",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.controls":{type:"switch",label:"控件"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.max":{type:"number",label:"最大值"},"controlProp.min":{type:"number",label:"最小值"},"controlProp.precision":{type:"number",label:"精度"},"controlProp.step":{type:"number",label:"步长"}}},{type:"date",properties:{"formItemProp.label":{type:"string",label:"标签文本"},"formItemProp.name":{type:"string",label:"字段名"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.disabled":{type:"switch",label:"禁用"},"controlProp.format":{type:"string",label:"显示格式化"},"controlProp.valueFormat":{type:"string",label:"值格式化"},"controlProp.size":{type:"radio",label:"大小",component:{dataSource:[{label:"大",value:"large"},{label:"中",value:"middle"},{label:"小",value:"small"}]}},"controlProp.mode":{type:"radio",label:"面板",component:{dataSource:[{label:"时间",value:"time"},{label:"日期",value:"date"},{label:"月",value:"month"},{label:"年",value:"year"}]}},"controlProp.picker":{type:"radio",label:"类型",component:{dataSource:[{label:"日期",value:"date"},{label:"周",value:"week"},{label:"月",value:"month"},{label:"年",value:"year"}]}}}},{type:"grid",properties:{"controlProp.gutter":{type:"number",label:"栅格间距"},"controlProp.colNumber":{type:"radio",label:"列配置",component:{dataSource:[{label:"一列",value:1},{label:"两列",value:2},{label:"三列",value:3},{label:"四列",value:4}]}}}},{type:"card",properties:{"controlProp.title":{type:"string",label:"标题"},"controlProp.bordered":{type:"switch",label:"边框"},"controlProp.hoverable":{type:"switch",label:"悬浮效果"}}}],or={key:1},rr=se({__name:"MaterialCfg",setup(t){const e=Ot(),{curControlCfg:n}=Ke(e),o=me({layout:{layout:"horizontal",labelAlign:"right",labelCol:{span:8},wrapperCol:{span:16}},properties:{}});return Wt(()=>n.value.type,()=>{if(n.value.type){let r=nr.find(a=>a.type===n.value.type);r&&(o.value.properties=It.cloneDeep(r.properties)),console.log("curControlCfg.value.type",o.value.properties)}}),(r,a)=>{const i=In;return O(n).id?(I(),X(O(qt),{layout:o.value.layout,properties:o.value.properties,formData:O(n),key:O(n).id},null,8,["layout","properties","formData"])):(I(),le("div",or,[H(i)]))}}}),ar={class:"form-design"},ir={class:"middle-part"},lr={class:"middle-part-header"},sr=se({__name:"FormDesign",setup(t){const e=Ot(),{formConfig:n,extraFormConfig:o}=Ke(e),{onSave:r}=e,a=me(!1),i=me({layout:{labelAlign:"left",layout:"horizontal"},properties:{name:{type:"string",label:"表单名称"}}}),s=()=>{a.value=!0},l=()=>{r(),a.value=!1};return(u,p)=>{const d=Ht,g=Nn;return I(),le(Le,null,[V("div",ar,[H(qn,{class:"left-part"}),V("div",ir,[V("div",lr,[H(d,{onClick:s,type:"primary"},{default:J(()=>[vt(" 保存 ")]),_:1})]),H(At,{modelValue:O(n),"onUpdate:modelValue":p[0]||(p[0]=v=>Pn(n)?n.value=v:null),class:"middle-part-content"},null,8,["modelValue"])]),H(rr,{class:"right-part"})]),H(g,{open:a.value,"onUpdate:open":p[1]||(p[1]=v=>a.value=v),title:"保存",onOk:l},{default:J(()=>[H(O(qt),{layout:i.value.layout,properties:i.value.properties,"form-data":O(o)},null,8,["layout","properties","form-data"])]),_:1},8,["open"])],64)}}}),ur=nt(sr,[["__scopeId","data-v-75552515"]]),Dr=se({__name:"FormView",setup(t){return(e,n)=>(I(),X(ur))}});export{Dr as default};
