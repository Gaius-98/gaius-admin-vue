import{a as i}from"./menu-BMQDZaom.js";import{_ as ae}from"./IconSelect.vue_vue_type_script_setup_true_lang-CFueqe6h.js";import{c as oe}from"./common-CN-aWtrW.js";import{d as ne,Q as le,r,b as ue,p as se,D as d,I as w,g as e,F as a,R as $,M as s,S as pe,K as R,U as m,E as y,V as re}from"./index-62taYEQH.js";import{C as de,_ as me,a as ie}from"./index-BXnrkyVC.js";import{M as _e}from"./index-BZFUI0pn.js";import{I as ce,_ as fe,B as ve,F as ye}from"./index-DZQTn4pk.js";import{_ as be}from"./index-9N-4r1tS.js";import{_ as ge}from"./index-CsKikAWr.js";import{T as ke}from"./index-BrcjJnKB.js";import{_ as Te}from"./index-BitTgvgq.js";import{_ as we,S as Ce}from"./index-Cb9fpvQZ.js";import{_ as xe}from"./index-BvwlwyQN.js";import{_ as Fe}from"./index-DeU7utib.js";import{_ as De}from"./index-BfK_qSF2.js";import"./index-C_4N5SMF.js";import"./ArrowRightOutlined-zCSNOykD.js";import"./SwapRightOutlined-BgQkWkNq.js";import"./FolderOutlined-CXzUvaUV.js";import"./DeleteFilled-QQZ36RRT.js";import"./DeleteOutlined-C_-v-d5d.js";import"./DownloadOutlined-BQF4bZ5o.js";import"./EditOutlined-CBNkJCI4.js";import"./PlusOutlined-BDlYUGhE.js";import"./FileTwoTone-v6A1co38.js";import"./PlusCircleOutlined-BuUBIxoK.js";import"./SwapOutlined-Czt2o70v.js";import"./SyncOutlined-CZDMBqXS.js";import"./index-BKM5uM1G.js";import"./index-DMRKYUQy.js";import"./ActionButton-BIE5fbqS.js";import"./useDestroyed-DDHGbKFe.js";import"./index-L619cFvN.js";import"./useBreakpoint-CF0F-7Rd.js";const Ie={class:"menu"},Me={class:"tools"},Ne=ne({__name:"MenuView",setup(Ue){const b=le({keyword:""}),C=r([]),L=r([{title:"名称",key:"label",dataIndex:"label"},{title:"类型",key:"menuType",dataIndex:"menuType"},{title:"地址",key:"address",dataIndex:"address"},{title:"排序号",key:"sortNum",dataIndex:"sortNum"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),T=r(!1),x=r(),S=()=>{var o;(o=x.value)==null||o.resetFields(),_()},F=r([]),h=()=>{oe.getDict(["menuType"]).then(o=>{const{code:t,data:u,msg:p}=o;t==200&&(F.value=u.menuType)})},_=()=>{T.value=!0,i.getList(b.keyword).then(o=>{const{code:t,data:u}=o;t==200&&(C.value=u),T.value=!1})};ue(()=>{_(),h()});const c=r(!1),n=r({label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""}),f=r("add"),E=se(()=>({add:"新增菜单",edit:"编辑菜单"})[f.value]),D=r(),K=()=>{n.value={label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""},f.value="add",c.value=!0,M()},j=async o=>await i.getDetail(o),A=async o=>{const{code:t,data:u}=await j(o.id);t==200&&(n.value=u,f.value="edit",c.value=!0,M())},P=async o=>{const{code:t,msg:u}=await i.remove(o.id);t==200&&($.success(u),_())},Q=()=>{var o;(o=D.value)==null||o.resetFields()},q=()=>{let o;f.value=="add"?o=i.add:o=i.update,o(n.value).then(t=>{const{code:u}=t;u==200&&($.success(f.value=="add"?"新增成功":"编辑成功"),_()),Q(),c.value=!1})},I=r([]),M=()=>{i.dict().then(o=>{const{code:t,data:u}=o;t==200&&(I.value=u)})},z=o=>{let t=o||"";n.value.pid=t};return(o,t)=>{const u=ce,p=fe,N=me,v=ve,G=ie,U=ye,V=de,H=be,J=ge,B=ke,W=Te,g=xe,O=we,X=Fe,Y=De,Z=Ce,ee=_e;return d(),w("div",Ie,[e(V,{class:"search-area"},{default:a(()=>[e(U,{ref_key:"searchFormRef",ref:x,model:b,onFinish:_},{default:a(()=>[e(G,{gutter:24},{default:a(()=>[e(N,{span:4},{default:a(()=>[e(p,{label:"名称",name:"keyword"},{default:a(()=>[e(u,{value:b.keyword,"onUpdate:value":t[0]||(t[0]=l=>b.keyword=l)},null,8,["value"])]),_:1})]),_:1}),e(N,{span:4,style:{"text-align":"right"}},{default:a(()=>[e(v,{type:"primary","html-type":"submit"},{default:a(()=>[s("搜索")]),_:1}),e(v,{style:{margin:"0 8px"},onClick:S},{default:a(()=>[s(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(V,null,{default:a(()=>[pe("div",Me,[e(v,{type:"primary",onClick:K},{default:a(()=>[s("新增")]),_:1})]),e(W,{rowKey:l=>l.id,loading:T.value,columns:L.value,"data-source":C.value,pagination:!1,scroll:{y:500}},{bodyCell:a(({column:l,record:k})=>[l.key=="action"?(d(),w(R,{key:0},[e(v,{type:"link",onClick:te=>A(k)},{default:a(()=>[s("编辑")]),_:2},1032,["onClick"]),e(H,{type:"vertical"}),e(J,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:te=>P(k)},{default:a(()=>[e(v,{type:"link",danger:""},{default:a(()=>[s("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):m("",!0),l.key=="menuType"?(d(),w(R,{key:1},[k.menuType=="app"?(d(),y(B,{key:0,color:"#2db7f5"},{default:a(()=>[s("菜单")]),_:1})):m("",!0),k.menuType=="directory"?(d(),y(B,{key:1,color:"#87d068"},{default:a(()=>[s("目录")]),_:1})):m("",!0)],64)):m("",!0)]),_:1},8,["rowKey","loading","columns","data-source"])]),_:1}),e(ee,{open:c.value,"onUpdate:open":t[9]||(t[9]=l=>c.value=l),onOk:q,title:E.value},{default:a(()=>[e(U,{model:n.value,"label-col":{span:8},ref_key:"modalFormRef",ref:D},{default:a(()=>[e(p,{label:"名称",name:"label"},{default:a(()=>[e(u,{value:n.value.label,"onUpdate:value":t[1]||(t[1]=l=>n.value.label=l)},null,8,["value"])]),_:1}),e(p,{label:"类型",name:"menuType"},{default:a(()=>[e(O,{value:n.value.menuType,"onUpdate:value":t[2]||(t[2]=l=>n.value.menuType=l),"button-style":"solid"},{default:a(()=>[e(g,{value:"directory"},{default:a(()=>[s(" 目录 ")]),_:1}),e(g,{value:"app"},{default:a(()=>[s(" 菜单 ")]),_:1})]),_:1},8,["value"])]),_:1}),n.value.menuType=="app"?(d(),y(p,{key:0,label:"地址",name:"address"},{default:a(()=>[e(u,{value:n.value.address,"onUpdate:value":t[3]||(t[3]=l=>n.value.address=l)},null,8,["value"])]),_:1})):m("",!0),e(p,{label:"上级节点",name:"pid"},{default:a(()=>[e(X,{value:n.value.pid,"onUpdate:value":t[4]||(t[4]=l=>n.value.pid=l),"tree-node-filter-prop":"label","show-search":"","allow-clear":"",treeData:I.value,"field-names":{children:"children",label:"label",value:"id"},onChange:z},null,8,["value","treeData"])]),_:1}),e(p,{label:"图标",name:"icon"},{default:a(()=>[e(ae,{modelValue:n.value.icon,"onUpdate:modelValue":t[5]||(t[5]=l=>n.value.icon=l)},null,8,["modelValue"])]),_:1}),e(p,{label:"排序号",name:"sortNum"},{default:a(()=>[e(Y,{value:n.value.sortNum,"onUpdate:value":t[6]||(t[6]=l=>n.value.sortNum=l)},null,8,["value"])]),_:1}),n.value.menuType=="app"?(d(),y(p,{key:1,label:"是否外链",name:"openType"},{default:a(()=>[e(O,{value:n.value.openType,"onUpdate:value":t[7]||(t[7]=l=>n.value.openType=l),"button-style":"solid"},{default:a(()=>[e(g,{value:"_blank"},{default:a(()=>[s(" 是 ")]),_:1}),e(g,{value:"_self"},{default:a(()=>[s(" 否 ")]),_:1})]),_:1},8,["value"])]),_:1})):m("",!0),n.value.openType=="_self"&&n.value.menuType=="app"?(d(),y(p,{key:2,label:"页面类型",name:"type"},{default:a(()=>[e(Z,{value:n.value.type,"onUpdate:value":t[8]||(t[8]=l=>n.value.type=l),options:F.value,"show-search":"",allowClear:""},null,8,["value","options"])]),_:1})):m("",!0)]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),mt=re(Ne,[["__scopeId","data-v-b6cf1b2d"]]);export{mt as default};
