import{d as r}from"./dict-BW_iM1s8.js";import{e as _e,m as me,r as u,n as ve,L as Y,o as _,q as b,j as e,w as a,c as N,U as ye,V as fe,J as s,P as ke,F as w,g as F,W as I,T as ge,Y as Te,Z as De,$ as be,a0 as Ce,a1 as xe,a3 as Ne,K as we,a2 as Fe,a4 as Ie,X as Ue,a5 as Oe,a6 as $e,a8 as Re}from"./.pnpm-Ciqk_aY1.js";import{_ as Ve}from"./index-ChcIlpw2.js";const je={class:"dict"},Be={class:"tools"},Le=_e({__name:"DictView",setup(Pe){const c=me({keyword:"",dictType:"",pageNumber:1,pageSize:10}),V=u([]),Z=u([{title:"字典类型描述",key:"dictTypeDesc",dataIndex:"dictTypeDesc"},{title:"字典类型值",key:"dictType",dataIndex:"dictType"},{title:"状态",key:"status",dataIndex:"status"},{title:"备注",key:"remark",dataIndex:"remark"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),G=u([{title:"字典值",key:"value",dataIndex:"value"},{title:"字典翻译",key:"label",dataIndex:"label"},{title:"排序号",key:"sortNum",dataIndex:"sortNum"},{title:"状态",key:"status",dataIndex:"status"},{title:"备注",key:"remark",dataIndex:"remark"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),U=u(!1),j=u(),H=()=>{var l;(l=j.value)==null||l.resetFields(),m()},B=u(0),Q=()=>{c.pageNumber=1,c.pageSize=10,m()},h=l=>{const{current:t,pageSize:o}=l;c.pageNumber=t,c.pageSize=o,m()},m=()=>{U.value=!0,r.getTypeList(c).then(l=>{const{code:t,data:o}=l;t==200&&(V.value=o.data,B.value=o.total),U.value=!1})},O=u([]),L=async()=>{const{code:l,data:t,msg:o}=await r.getDictTypeList();l==200&&(O.value=t)};ve(()=>{m(),L()});const g=u(!1),p=u({dictType:"",dictTypeDesc:"",remark:"",status:1}),y=u("add"),ee=Y(()=>({add:"新增字典类型",edit:"编辑字典类型"})[y.value]),$=u("add"),te=Y(()=>({add:"新增字典",edit:"编辑字典"})[$.value]),P=u(),ae=()=>{y.value="add",g.value=!0,p.value={dictType:"",dictTypeDesc:"",status:1,remark:""}},le=async l=>{const{code:t,data:o}=await r.getTypeDetail(l.id);t==200&&(p.value=o,y.value="edit",g.value=!0)},ne=async l=>{const{code:t,msg:o,data:i}=await r.removeType(l.id);t==200&&(N.success(i),c.pageNumber=1,m())},oe=async l=>{const{code:t,msg:o,data:i}=await r.removeData(l.id);t==200&&(N.success(i),m())},S=()=>{var l;(l=P.value)==null||l.resetFields()},z=()=>{var l;(l=E.value)==null||l.resetFields()},se=()=>{let l;y.value=="add"?l=r.addType:l=r.updateType,l(p.value).then(t=>{const{code:o}=t;o==200&&(N.success(y.value=="add"?"新增成功":"编辑成功"),m()),S(),g.value=!1})},ue=()=>{let l;y.value=="add"?l=r.addData:l=r.updateData,l(d.value).then(t=>{const{code:o}=t;o==200&&(N.success(y.value=="add"?"新增成功":"编辑成功"),m(),L()),z(),T.value=!1})},T=u(!1),de=async l=>{const{code:t,data:o}=await r.getDictDetail(l.id);t==200&&(T.value=!0,$.value="edit",d.value=o)},ie=l=>{T.value=!0,$.value="add",d.value={dictType:l.dictType,label:"",value:"",status:1,sortNum:0}},d=u({label:"",value:"",sortNum:0,status:1,dictType:""}),E=u();return(l,t)=>{const o=ge,i=Te,M=De,v=be,ce=Ce,R=xe,A=ye,C=Ne,K=we,q=Fe,J=Ie,D=Ue,x=Oe,W=$e,X=fe,pe=Re;return _(),b("div",je,[e(A,{class:"search-area"},{default:a(()=>[e(R,{ref_key:"searchFormRef",ref:j,model:c,onFinish:Q},{default:a(()=>[e(ce,{gutter:24},{default:a(()=>[e(M,{span:4},{default:a(()=>[e(i,{label:"字典类型",name:"dictType"},{default:a(()=>[e(o,{value:c.dictType,"onUpdate:value":t[0]||(t[0]=n=>c.dictType=n),fieldNames:{label:"dictTypeDesc",value:"dictType"},optionFilterProp:"dictTypeDesc","show-search":"",allowClear:"",options:O.value},null,8,["value","options"])]),_:1})]),_:1}),e(M,{span:4,style:{"text-align":"right"}},{default:a(()=>[e(v,{type:"primary","html-type":"submit"},{default:a(()=>[s("搜索")]),_:1}),e(v,{style:{margin:"0 8px"},onClick:H},{default:a(()=>[s(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(A,null,{default:a(()=>[ke("div",Be,[e(v,{type:"primary",onClick:ae},{default:a(()=>[s("新增")]),_:1})]),e(J,{loading:U.value,columns:Z.value,"data-source":V.value,pagination:{current:c.pageNumber,total:B.value},current:c.pageNumber,"onUpdate:current":t[1]||(t[1]=n=>c.pageNumber=n),onChange:h,scroll:{y:440},rowKey:"id"},{bodyCell:a(({column:n,record:f})=>[n.key=="status"?(_(),b(w,{key:0},[f.status?(_(),F(C,{key:0,color:"#87d068"},{default:a(()=>[s("启用")]),_:1})):(_(),F(C,{key:1,color:"#f50"},{default:a(()=>[s("停用")]),_:1}))],64)):I("",!0),n.key=="action"?(_(),b(w,{key:1},[e(v,{type:"link",onClick:k=>ie(f)},{default:a(()=>[s("新增")]),_:2},1032,["onClick"]),e(v,{type:"link",onClick:k=>le(f)},{default:a(()=>[s("编辑")]),_:2},1032,["onClick"]),e(K,{type:"vertical"}),e(q,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:k=>ne(f)},{default:a(()=>[e(v,{type:"link",danger:""},{default:a(()=>[s("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):I("",!0)]),expandedRowRender:a(({record:n})=>[e(J,{columns:G.value,pagination:!1,"data-source":n.dictDataList},{bodyCell:a(({column:f,record:k})=>[f.key=="status"?(_(),b(w,{key:0},[k.status?(_(),F(C,{key:0,color:"#87d068"},{default:a(()=>[s("启用")]),_:1})):(_(),F(C,{key:1,color:"#f50"},{default:a(()=>[s("停用")]),_:1}))],64)):I("",!0),f.key=="action"?(_(),b(w,{key:1},[e(v,{type:"link",onClick:re=>de(k)},{default:a(()=>[s("编辑")]),_:2},1032,["onClick"]),e(K,{type:"vertical"}),e(q,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:re=>oe(k)},{default:a(()=>[e(v,{type:"link",danger:""},{default:a(()=>[s("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):I("",!0)]),_:2},1032,["columns","data-source"])]),_:1},8,["loading","columns","data-source","pagination","current"])]),_:1}),e(X,{open:g.value,"onUpdate:open":t[6]||(t[6]=n=>g.value=n),onOk:se,title:ee.value,onCancel:S},{default:a(()=>[e(R,{model:p.value,"label-col":{span:8},ref_key:"modalFormRef",ref:P},{default:a(()=>[e(i,{label:"字典类型值"},{default:a(()=>[e(D,{value:p.value.dictType,"onUpdate:value":t[2]||(t[2]=n=>p.value.dictType=n)},null,8,["value"])]),_:1}),e(i,{label:"字典类型描述"},{default:a(()=>[e(D,{value:p.value.dictTypeDesc,"onUpdate:value":t[3]||(t[3]=n=>p.value.dictTypeDesc=n)},null,8,["value"])]),_:1}),e(i,{label:"状态"},{default:a(()=>[e(W,{value:p.value.status,"onUpdate:value":t[4]||(t[4]=n=>p.value.status=n),"button-style":"solid"},{default:a(()=>[e(x,{value:1},{default:a(()=>[s("启用 ")]),_:1}),e(x,{value:0},{default:a(()=>[s("停用 ")]),_:1})]),_:1},8,["value"])]),_:1}),e(i,{label:"描述"},{default:a(()=>[e(D,{type:"textarea",value:p.value.remark,"onUpdate:value":t[5]||(t[5]=n=>p.value.remark=n)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),e(X,{open:T.value,"onUpdate:open":t[12]||(t[12]=n=>T.value=n),title:te.value,onOk:ue,onCancel:z},{default:a(()=>[e(R,{model:d.value,"label-col":{span:8},ref_key:"modalDictDataRef",ref:E},{default:a(()=>[e(i,{label:"所属类型"},{default:a(()=>[e(o,{value:d.value.dictType,"onUpdate:value":t[7]||(t[7]=n=>d.value.dictType=n),fieldNames:{label:"dictTypeDesc",value:"dictType"},optionFilterProp:"dictTypeDesc","show-search":"",allowClear:"",options:O.value,disabled:""},null,8,["value","options"])]),_:1}),e(i,{label:"字典值"},{default:a(()=>[e(D,{value:d.value.value,"onUpdate:value":t[8]||(t[8]=n=>d.value.value=n)},null,8,["value"])]),_:1}),e(i,{label:"字典翻译"},{default:a(()=>[e(D,{value:d.value.label,"onUpdate:value":t[9]||(t[9]=n=>d.value.label=n)},null,8,["value"])]),_:1}),e(i,{label:"排序号"},{default:a(()=>[e(pe,{min:0,step:1,value:d.value.sortNum,"onUpdate:value":t[10]||(t[10]=n=>d.value.sortNum=n)},null,8,["value"])]),_:1}),e(i,{label:"状态"},{default:a(()=>[e(W,{value:d.value.status,"onUpdate:value":t[11]||(t[11]=n=>d.value.status=n),"button-style":"solid"},{default:a(()=>[e(x,{value:1},{default:a(()=>[s("启用 ")]),_:1}),e(x,{value:0},{default:a(()=>[s("停用 ")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),Me=Ve(Le,[["__scopeId","data-v-3e1e6178"]]);export{Me as default};
