import{a as w}from"./resource-MWxUvSDQ.js";import{g as U,H as q,I as F,r as u,n as R,o as p,q as r,l as t,j as o,ac as V,ad as j,w as b,J as D,P as _,ae as I,af as E,F as H,y as J,Q,ag as T,e as W,ah as A,a1 as G,ai as K,W as X,aj as Y,ak as Z}from"./.pnpm-BDh_-suK.js";import{_ as ee}from"./index-C2YmM_0H.js";const ae=i=>(Y("data-v-4de6bf9d"),i=i(),Z(),i),te={class:"image-picker"},se=ae(()=>_("div",{class:"select-image-text"},"选择图片",-1)),oe={key:1,class:"preview-image"},ne={class:"image-container"},le={class:"image-list"},ce=["src","onClick"],ie=U({__name:"ImagePicker",props:{value:{type:String,required:!0},valueModifiers:{}},emits:q(["change"],["update:value"]),setup(i,{emit:N}){const v=F(i,"value"),h=u([]),n=u({pageSize:3,pageNumber:1,keyword:""}),y=u(0),m="/prod",g=u(""),P=e=>{g.value=e},L=()=>{n.value.pageNumber++,f()},f=()=>{w.getList(n.value).then(e=>{const{code:a,data:l,msg:c}=e;a==200&&(h.value=l.data,y.value=l.total)})},M=()=>{n.value.pageNumber--,f()},O=e=>{const a=new FormData;a.append("file",e.file,encodeURIComponent(e.file.name)),w.add(a).then(l=>{const{code:c,data:x,msg:C}=l;c==200&&(k(`${m}/${x.path}`),W.success(C),d.value=!1)})},d=u(!1),S=()=>{d.value=!0},z=N,k=e=>{v.value=e,z("change",e)},B=()=>{k(g.value),$()},$=()=>{g.value="",d.value=!1};return R(()=>{f()}),(e,a)=>{const l=A,c=G,x=K,C=X;return p(),r("div",te,[v.value?(p(),r("div",oe,[t(o(j),{onClick:a[0]||(a[0]=s=>k("")),style:{position:"absolute",top:"5px",right:"5px",color:"#999","z-index":"99"}}),t(l,{src:v.value,width:"100px",height:"100px"},null,8,["src"])])):(p(),r("div",{key:0,class:"select-image",onClick:S},[t(o(V)),se])),t(C,{open:d.value,"onUpdate:open":a[1]||(a[1]=s=>d.value=s),title:"选择图片",onOk:B,onCancel:$},{default:b(()=>[t(x,{name:"file",accept:"image/*",customRequest:O,maxCount:"1",showUploadList:!1},{default:b(()=>[t(c,{type:"primary"},{default:b(()=>[D("自定义")]),_:1})]),_:1}),_("div",ne,[t(c,{type:"ghost",icon:I(o(E)),onClick:M,disabled:n.value.pageNumber==1},null,8,["icon","disabled"]),_("div",le,[(p(!0),r(H,null,J(h.value,s=>(p(),r("div",{key:s.id,class:Q(["image-item",{selected:g.value==`${o(m)}/${s.path}`}])},[_("img",{src:`${o(m)}/${s.path}`,onClick:de=>P(`${o(m)}/${s.path}`),height:"100px",width:"100px"},null,8,ce)],2))),128))]),t(c,{type:"ghost",icon:I(o(T)),onClick:L,disabled:n.value.pageSize*(n.value.pageNumber-1)+h.value.length==y.value},null,8,["icon","disabled"])])]),_:1},8,["open"])])}}}),me=ee(ie,[["__scopeId","data-v-4de6bf9d"]]);export{me as default};
