import{a as r}from"./menu-BXXUuz9p.js";import{_ as Y}from"./IconSelect.vue_vue_type_script_setup_true_lang-BUSQOIXW.js";import{d as ee,a2 as ae,e as d,B as te,h as oe,N as _,O as T,k as e,V as a,a3 as O,a0 as s,a4 as ne,Z as $,a5 as v,U as w,Q as le}from"./index-CCtK2QNy.js";import{C as ue,_ as se,a as de}from"./index-Csg6p33q.js";import{M as pe}from"./index-CRVp5NL5.js";import{I as re,_ as _e,B as me,F as ie}from"./index-BlDBJIqW.js";import{_ as ce,a as fe,b as ve}from"./index-D5qSyGn8.js";import{T as ye,_ as be,a as ke}from"./index-Du_PT1vl.js";import{_ as ge}from"./index-a5JkKK2k.js";import{_ as Te}from"./index-CSBXufxv.js";import"./index-DphsaMHh.js";import"./DeleteFilled-BJa73-Jh.js";import"./SwapRightOutlined-CF25bxWZ.js";import"./FolderOutlined-B9lTtYnf.js";import"./DownloadOutlined-DoBjC97T.js";import"./PlusOutlined-BP0Thf2u.js";import"./PlusCircleOutlined-h9JgI6zS.js";import"./index-D8D3h1S0.js";const we={class:"menu"},Ce={class:"tools"},xe=ee({__name:"MenuView",setup(Fe){const y=ae({keyword:""}),C=d([]),R=d([{title:"名称",key:"label",dataIndex:"label"},{title:"类型",key:"menuType",dataIndex:"menuType"},{title:"地址",key:"address",dataIndex:"address"},{title:"排序号",key:"sortNum",dataIndex:"sortNum"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),g=d(!1),x=d(),h=()=>{var o;(o=x.value)==null||o.resetFields(),m()},m=()=>{g.value=!0,r.getList(y.keyword).then(o=>{const{code:t,data:u}=o;t==200&&(C.value=u),g.value=!1})};te(()=>{m()});const i=d(!1),l=d({label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""}),c=d("add"),L=oe(()=>({add:"新增菜单",edit:"编辑菜单"})[c.value]),F=d(),j=()=>{l.value={label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""},c.value="add",i.value=!0,I()},E=async o=>await r.getDetail(o),K=async o=>{const{code:t,data:u}=await E(o.id);t==200&&(l.value=u,c.value="edit",i.value=!0,I())},A=async o=>{const{code:t,msg:u}=await r.remove(o.id);t==200&&(O.success(u),m())},P=()=>{var o;(o=F.value)==null||o.resetFields()},Q=()=>{let o;c.value=="add"?o=r.add:o=r.update,o(l.value).then(t=>{const{code:u}=t;u==200&&(O.success(c.value=="add"?"新增成功":"编辑成功"),m()),P(),i.value=!1})},N=d([]),I=()=>{r.dict().then(o=>{const{code:t,data:u}=o;t==200&&(N.value=u)})},S=o=>{let t=o||"";l.value.pid=t};return(o,t)=>{const u=re,p=_e,U=se,f=me,Z=de,V=ie,M=ue,q=ce,z=fe,B=ye,G=ve,b=be,D=ke,H=ge,J=Te,W=pe;return _(),T("div",we,[e(M,{class:"search-area"},{default:a(()=>[e(V,{ref_key:"searchFormRef",ref:x,model:y,onFinish:m},{default:a(()=>[e(Z,{gutter:24},{default:a(()=>[e(U,{span:4},{default:a(()=>[e(p,{label:"名称",name:"keyword"},{default:a(()=>[e(u,{value:y.keyword,"onUpdate:value":t[0]||(t[0]=n=>y.keyword=n)},null,8,["value"])]),_:1})]),_:1}),e(U,{span:4,style:{"text-align":"right"}},{default:a(()=>[e(f,{type:"primary","html-type":"submit"},{default:a(()=>[s("搜索")]),_:1}),e(f,{style:{margin:"0 8px"},onClick:h},{default:a(()=>[s(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(M,null,{default:a(()=>[ne("div",Ce,[e(f,{type:"primary",onClick:j},{default:a(()=>[s("新增")]),_:1})]),e(G,{rowKey:n=>n.id,loading:g.value,columns:R.value,"data-source":C.value,pagination:!1,scroll:{y:440}},{bodyCell:a(({column:n,record:k})=>[n.key=="action"?(_(),T($,{key:0},[e(f,{type:"link",onClick:X=>K(k)},{default:a(()=>[s("编辑")]),_:2},1032,["onClick"]),e(q,{type:"vertical"}),e(z,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:X=>A(k)},{default:a(()=>[e(f,{type:"link",danger:""},{default:a(()=>[s("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):v("",!0),n.key=="menuType"?(_(),T($,{key:1},[k.menuType=="app"?(_(),w(B,{key:0,color:"#2db7f5"},{default:a(()=>[s("菜单")]),_:1})):v("",!0),k.menuType=="directory"?(_(),w(B,{key:1,color:"#87d068"},{default:a(()=>[s("目录")]),_:1})):v("",!0)],64)):v("",!0)]),_:1},8,["rowKey","loading","columns","data-source"])]),_:1}),e(W,{open:i.value,"onUpdate:open":t[8]||(t[8]=n=>i.value=n),onOk:Q,title:L.value},{default:a(()=>[e(V,{model:l.value,"label-col":{span:8},ref_key:"modalFormRef",ref:F},{default:a(()=>[e(p,{label:"名称",name:"label"},{default:a(()=>[e(u,{value:l.value.label,"onUpdate:value":t[1]||(t[1]=n=>l.value.label=n)},null,8,["value"])]),_:1}),e(p,{label:"类型",name:"menuType"},{default:a(()=>[e(D,{value:l.value.menuType,"onUpdate:value":t[2]||(t[2]=n=>l.value.menuType=n),"button-style":"solid"},{default:a(()=>[e(b,{value:"directory"},{default:a(()=>[s(" 目录 ")]),_:1}),e(b,{value:"app"},{default:a(()=>[s(" 菜单 ")]),_:1})]),_:1},8,["value"])]),_:1}),l.value.menuType=="app"?(_(),w(p,{key:0,label:"地址",name:"address"},{default:a(()=>[e(u,{value:l.value.address,"onUpdate:value":t[3]||(t[3]=n=>l.value.address=n)},null,8,["value"])]),_:1})):v("",!0),e(p,{label:"上级节点",name:"pid"},{default:a(()=>[e(H,{value:l.value.pid,"onUpdate:value":t[4]||(t[4]=n=>l.value.pid=n),"tree-node-filter-prop":"label","show-search":"","allow-clear":"",treeData:N.value,"field-names":{children:"children",label:"label",value:"id"},onChange:S},null,8,["value","treeData"])]),_:1}),e(p,{label:"图标",name:"icon"},{default:a(()=>[e(Y,{modelValue:l.value.icon,"onUpdate:modelValue":t[5]||(t[5]=n=>l.value.icon=n)},null,8,["modelValue"])]),_:1}),e(p,{label:"排序号",name:"sortNum"},{default:a(()=>[e(J,{value:l.value.sortNum,"onUpdate:value":t[6]||(t[6]=n=>l.value.sortNum=n)},null,8,["value"])]),_:1}),e(p,{label:"是否外链",name:"openType"},{default:a(()=>[e(D,{value:l.value.openType,"onUpdate:value":t[7]||(t[7]=n=>l.value.openType=n),"button-style":"solid"},{default:a(()=>[e(b,{value:"_blank"},{default:a(()=>[s(" 是 ")]),_:1}),e(b,{value:"_self"},{default:a(()=>[s(" 否 ")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),Se=le(xe,[["__scopeId","data-v-df62ca5b"]]);export{Se as default};
