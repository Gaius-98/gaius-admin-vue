import{d as W,j as te,ar as G,u as be,aN as Te,e as z,g as c,_ as u,C as Pe,i as x,y as H,P as S,o as M,K as he,aO as we,ac as Fe,ad as Be,aP as Ne,aQ as J,aR as Se,aS as Ae,aT as Oe,p as U,aU as Ie,as as $e,s as w,w as Z,G as Me,ax as je}from"./index-bmd1BFpa.js";import{u as Re,D as Ee}from"./index-CKZFhYXA.js";import{m as Le,n as De,B as ee,p as ze,o as He,t as We}from"./index-ccK5NkPn.js";import{A as ne}from"./ActionButton-Cn8iBn1C.js";var Qe=function(e,o){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,n=Object.getOwnPropertySymbols(e);f<n.length;f++)o.indexOf(n[f])<0&&Object.prototype.propertyIsEnumerable.call(e,n[f])&&(t[n[f]]=e[n[f]]);return t};let V;const _e=e=>{V={x:e.pageX,y:e.pageY},setTimeout(()=>V=null,100)};Le()&&De(document.documentElement,"click",_e,!0);const Ke=()=>({prefixCls:String,visible:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},confirmLoading:{type:Boolean,default:void 0},title:S.any,closable:{type:Boolean,default:void 0},closeIcon:S.any,onOk:Function,onCancel:Function,"onUpdate:visible":Function,"onUpdate:open":Function,onChange:Function,afterClose:Function,centered:{type:Boolean,default:void 0},width:[String,Number],footer:S.any,okText:S.any,okType:String,cancelText:S.any,icon:S.any,maskClosable:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},okButtonProps:M(),cancelButtonProps:M(),destroyOnClose:{type:Boolean,default:void 0},wrapClassName:String,maskTransitionName:String,transitionName:String,getContainer:{type:[String,Function,Boolean,Object],default:void 0},zIndex:Number,bodyStyle:M(),maskStyle:M(),mask:{type:Boolean,default:void 0},keyboard:{type:Boolean,default:void 0},wrapProps:Object,focusTriggerAfterClose:{type:Boolean,default:void 0},modalRender:Function,mousePosition:M()}),k=W({compatConfig:{MODE:3},name:"AModal",inheritAttrs:!1,props:te(Ke(),{width:520,confirmLoading:!1,okType:"primary"}),setup(e,o){let{emit:t,slots:n,attrs:f}=o;const[s]=G("Modal"),{prefixCls:C,rootPrefixCls:v,direction:b,getPopupContainer:r}=be("modal",e),[i,a]=Re(C);Te(e.visible===void 0);const y=m=>{t("update:visible",!1),t("update:open",!1),t("cancel",m),t("change",!1)},l=m=>{t("ok",m)},p=()=>{var m,g;const{okText:O=(m=n.okText)===null||m===void 0?void 0:m.call(n),okType:P,cancelText:d=(g=n.cancelText)===null||g===void 0?void 0:g.call(n),confirmLoading:T}=e;return c(he,null,[c(ee,x({onClick:y},e.cancelButtonProps),{default:()=>[d||s.value.cancelText]}),c(ee,x(x({},ze(P)),{},{loading:T,onClick:l},e.okButtonProps),{default:()=>[O||s.value.okText]})])};return()=>{var m,g;const{prefixCls:O,visible:P,open:d,wrapClassName:T,centered:h,getContainer:B,closeIcon:N=(m=n.closeIcon)===null||m===void 0?void 0:m.call(n),focusTriggerAfterClose:R=!0}=e,E=Qe(e,["prefixCls","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),Q=z(T,{[`${C.value}-centered`]:!!h,[`${C.value}-wrap-rtl`]:b.value==="rtl"});return i(c(Ee,x(x(x({},E),f),{},{rootClassName:a.value,class:z(a.value,f.class),getContainer:B||(r==null?void 0:r.value),prefixCls:C.value,wrapClassName:Q,visible:d??P,onClose:y,focusTriggerAfterClose:R,transitionName:H(v.value,"zoom",e.transitionName),maskTransitionName:H(v.value,"fade",e.maskTransitionName),mousePosition:(g=E.mousePosition)!==null&&g!==void 0?g:V}),u(u({},n),{footer:n.footer||p,closeIcon:()=>c("span",{class:`${C.value}-close-x`},[N||c(Pe,{class:`${C.value}-close-icon`},null)])})))}}});function A(e){return typeof e=="function"?e():e}const le=W({name:"ConfirmDialog",inheritAttrs:!1,props:["icon","onCancel","onOk","close","closable","zIndex","afterClose","visible","open","keyboard","centered","getContainer","maskStyle","okButtonProps","cancelButtonProps","okType","prefixCls","okCancel","width","mask","maskClosable","okText","cancelText","autoFocusButton","transitionName","maskTransitionName","type","title","content","direction","rootPrefixCls","bodyStyle","closeIcon","modalRender","focusTriggerAfterClose","wrapClassName","confirmPrefixCls","footer"],setup(e,o){let{attrs:t}=o;const[n]=G("Modal");return()=>{const{icon:f,onCancel:s,onOk:C,close:v,okText:b,closable:r=!1,zIndex:i,afterClose:a,keyboard:y,centered:l,getContainer:p,maskStyle:m,okButtonProps:g,cancelButtonProps:O,okCancel:P,width:d=416,mask:T=!0,maskClosable:h=!1,type:B,open:N,title:R,content:E,direction:Q,closeIcon:fe,modalRender:de,focusTriggerAfterClose:me,rootPrefixCls:L,bodyStyle:Ce,wrapClassName:pe,footer:X}=e;let I=f;if(!f&&f!==null)switch(B){case"info":I=c(Ne,null,null);break;case"success":I=c(Be,null,null);break;case"error":I=c(Fe,null,null);break;default:I=c(we,null,null)}const ve=e.okType||"primary",_=e.prefixCls||"ant-modal",$=`${_}-confirm`,ye=t.style||{},Y=P??B==="confirm",q=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",D=`${_}-confirm`,ge=z(D,`${D}-${e.type}`,{[`${D}-rtl`]:Q==="rtl"},t.class),K=n.value,xe=Y&&c(ne,{actionFn:s,close:v,autofocus:q==="cancel",buttonProps:O,prefixCls:`${L}-btn`},{default:()=>[A(e.cancelText)||K.cancelText]});return c(k,{prefixCls:_,class:ge,wrapClassName:z({[`${D}-centered`]:!!l},pe),onCancel:ke=>v==null?void 0:v({triggerCancel:!0},ke),open:N,title:"",footer:"",transitionName:H(L,"zoom",e.transitionName),maskTransitionName:H(L,"fade",e.maskTransitionName),mask:T,maskClosable:h,maskStyle:m,style:ye,bodyStyle:Ce,width:d,zIndex:i,afterClose:a,keyboard:y,centered:l,getContainer:p,closable:r,closeIcon:fe,modalRender:de,focusTriggerAfterClose:me},{default:()=>[c("div",{class:`${$}-body-wrapper`},[c("div",{class:`${$}-body`},[A(I),R===void 0?null:c("span",{class:`${$}-title`},[A(R)]),c("div",{class:`${$}-content`},[A(E)])]),X!==void 0?A(X):c("div",{class:`${$}-btns`},[xe,c(ne,{type:ve,actionFn:C,close:v,autofocus:q==="ok",buttonProps:g,prefixCls:`${L}-btn`},{default:()=>[A(b)||(Y?K.okText:K.justOkText)]})])])]})}}}),F=[],j=e=>{const o=document.createDocumentFragment();let t=u(u({},He(e,["parentContext","appContext"])),{close:s,open:!0}),n=null;function f(){n&&(J(null,o),n=null);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];const y=i.some(l=>l&&l.triggerCancel);e.onCancel&&y&&e.onCancel(()=>{},...i.slice(1));for(let l=0;l<F.length;l++)if(F[l]===s){F.splice(l,1);break}}function s(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];t=u(u({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),f.apply(this,i)}}),t.visible&&delete t.visible,C(t)}function C(r){typeof r=="function"?t=r(t):t=u(u({},t),r),n&&We(n,t,o)}const v=r=>{const i=Ae,a=i.prefixCls,y=r.prefixCls||`${a}-modal`,l=i.iconPrefixCls,p=Oe();return c(Se,x(x({},i),{},{prefixCls:a}),{default:()=>[c(le,x(x({},r),{},{rootPrefixCls:a,prefixCls:y,iconPrefixCls:l,locale:p,cancelText:r.cancelText||p.cancelText}),null)]})};function b(r){const i=c(v,u({},r));return i.appContext=e.parentContext||e.appContext||i.appContext,J(i,o),i}return n=b(t),F.push(s),{destroy:s,update:C}};function ae(e){return u(u({},e),{type:"warning"})}function re(e){return u(u({},e),{type:"info"})}function se(e){return u(u({},e),{type:"success"})}function ie(e){return u(u({},e),{type:"error"})}function ce(e){return u(u({},e),{type:"confirm"})}const Ue=()=>({config:Object,afterClose:Function,destroyAction:Function,open:Boolean}),Ve=W({name:"HookModal",inheritAttrs:!1,props:te(Ue(),{config:{width:520,okType:"primary"}}),setup(e,o){let{expose:t}=o;var n;const f=U(()=>e.open),s=U(()=>e.config),{direction:C,getPrefixCls:v}=Ie(),b=v("modal"),r=v(),i=()=>{var p,m;e==null||e.afterClose(),(m=(p=s.value).afterClose)===null||m===void 0||m.call(p)},a=function(){e.destroyAction(...arguments)};t({destroy:a});const y=(n=s.value.okCancel)!==null&&n!==void 0?n:s.value.type==="confirm",[l]=G("Modal",$e.Modal);return()=>c(le,x(x({prefixCls:b,rootPrefixCls:r},s.value),{},{close:a,open:f.value,afterClose:i,okText:s.value.okText||(y?l==null?void 0:l.value.okText:l==null?void 0:l.value.justOkText),direction:s.value.direction||C.value,cancelText:s.value.cancelText||(l==null?void 0:l.value.cancelText)}),null)}});let oe=0;const Ge=W({name:"ElementsHolder",inheritAttrs:!1,setup(e,o){let{expose:t}=o;const n=w([]);return t({addModal:s=>(n.value.push(s),n.value=n.value.slice(),()=>{n.value=n.value.filter(C=>C!==s)})}),()=>n.value.map(s=>s())}});function Xe(){const e=w(null),o=w([]);Z(o,()=>{o.value.length&&([...o.value].forEach(C=>{C()}),o.value=[])},{immediate:!0});const t=s=>function(v){var b;oe+=1;const r=w(!0),i=w(null),a=w(Me(v)),y=w({});Z(()=>v,d=>{g(u(u({},je(d)?d.value:d),y.value))});const l=function(){r.value=!1;for(var d=arguments.length,T=new Array(d),h=0;h<d;h++)T[h]=arguments[h];const B=T.some(N=>N&&N.triggerCancel);a.value.onCancel&&B&&a.value.onCancel(()=>{},...T.slice(1))};let p;const m=()=>c(Ve,{key:`modal-${oe}`,config:s(a.value),ref:i,open:r.value,destroyAction:l,afterClose:()=>{p==null||p()}},null);p=(b=e.value)===null||b===void 0?void 0:b.addModal(m),p&&F.push(p);const g=d=>{a.value=u(u({},a.value),d)};return{destroy:()=>{i.value?l():o.value=[...o.value,l]},update:d=>{y.value=d,i.value?g(d):o.value=[...o.value,()=>g(d)]}}},n=U(()=>({info:t(re),success:t(se),error:t(ie),warning:t(ae),confirm:t(ce)})),f=Symbol("modalHolderKey");return[n.value,()=>c(Ge,{key:f,ref:e},null)]}function ue(e){return j(ae(e))}k.useModal=Xe;k.info=function(o){return j(re(o))};k.success=function(o){return j(se(o))};k.error=function(o){return j(ie(o))};k.warning=ue;k.warn=ue;k.confirm=function(o){return j(ce(o))};k.destroyAll=function(){for(;F.length;){const o=F.pop();o&&o()}};k.install=function(e){return e.component(k.name,k),e};export{k as M};
