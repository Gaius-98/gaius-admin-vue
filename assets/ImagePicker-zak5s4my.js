import{a as N}from"./resource-DGCjREfa.js";import{P as R,b as V,r as F,R as q}from"./@ant-design-DjS9GqSD.js";import{a as D,r as E,B as T,s as W,M as X}from"./ant-design-vue-CYBwGk2d.js";import{d as Z,S as j,U as A,r as p,o as G,V as m,W as u,c as o,u as i,a5 as b,L as H,X as _,h as w,F as J,Z as K,_ as Q,ac as Y,ad as ee}from"./@vue-BvA2MXdg.js";import{_ as ae}from"./index-BXhzo4w4.js";import"./@ctrl-DOFZgDuz.js";import"./@babel-BiFW4_mA.js";import"./lodash-es-PU94eZQX.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./dayjs-B73STPP_.js";import"./throttle-debounce-CUWDS_la.js";import"./async-validator-DKvM95Vc.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-OW4gUFyn.js";import"./pinia-DlKznUG5.js";/* empty css                      */import"./axios-BimPEqV4.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-CbJ3uXWy.js";import"./vue-router-iEIkon04.js";import"./uuid-CQkTLCs1.js";import"./echarts-DetEu2Tg.js";import"./tslib-BDyQ-Jie.js";import"./zrender-CDo53BfZ.js";import"./gaius-utils-DO2PX8Qd.js";const te=c=>(Y("data-v-f79f7f6a"),c=c(),ee(),c),oe={class:"image-picker"},se=te(()=>_("div",{class:"select-image-text"},"选择图片",-1)),ne={key:1,class:"preview-image"},ie={class:"image-container"},le={class:"image-list"},pe=["src","onClick"],ce=Z({__name:"ImagePicker",props:{value:{type:String,required:!0},valueModifiers:{}},emits:j(["change"],["update:value"]),setup(c,{emit:S}){const f=A(c,"value"),h=p([]),d=p([]),a=p({pageSize:3,pageNumber:1,keyword:""}),I=p(0),v="/prod",g=p(""),L=e=>{g.value=e},M=()=>{a.value.pageNumber++,$()},$=()=>{N.getList(a.value).then(e=>{const{code:t,data:s,msg:l}=e;t==200&&(h.value=h.value.concat(s.data),d.value=s.data,I.value=s.total)})},P=()=>{a.value.pageNumber--,d.value=h.value.slice((a.value.pageNumber-1)*a.value.pageSize,a.value.pageSize)},z=e=>{const t=new FormData;t.append("file",e.file,encodeURIComponent(e.file.name)),N.add(t).then(s=>{const{code:l,data:x,msg:C}=s;l==200&&(k(`${v}/${x.path}`),D.success(C),r.value=!1)})},r=p(!1),O=()=>{r.value=!0},B=S,k=e=>{f.value=e,B("change",e)},U=()=>{k(g.value),y()},y=()=>{g.value="",r.value=!1};return G(()=>{$()}),(e,t)=>{const s=E,l=T,x=W,C=X;return m(),u("div",oe,[f.value?(m(),u("div",ne,[o(i(V),{onClick:t[0]||(t[0]=n=>k("")),style:{position:"absolute",top:"5px",right:"5px",color:"#999","z-index":"99"}}),o(s,{src:f.value,width:"100px",height:"100px"},null,8,["src"])])):(m(),u("div",{key:0,class:"select-image",onClick:O},[o(i(R)),se])),o(C,{open:r.value,"onUpdate:open":t[1]||(t[1]=n=>r.value=n),title:"选择图片",onOk:U,onCancel:y},{default:b(()=>[o(x,{name:"file",accept:"image/*",customRequest:z,maxCount:"1",showUploadList:!1},{default:b(()=>[o(l,{type:"primary"},{default:b(()=>[H("自定义")]),_:1})]),_:1}),_("div",ie,[o(l,{type:"ghost",icon:w(i(F)),onClick:P,disabled:a.value.pageNumber==1},null,8,["icon","disabled"]),_("div",le,[(m(!0),u(J,null,K(d.value,n=>(m(),u("div",{key:n.id,class:Q(["image-item",{selected:g.value==`${i(v)}/${n.path}`}])},[_("img",{src:`${i(v)}/${n.path}`,onClick:re=>L(`${i(v)}/${n.path}`),height:"100px",width:"100px"},null,8,pe)],2))),128))]),o(l,{type:"ghost",icon:w(i(q)),onClick:M,disabled:a.value.pageSize*(a.value.pageNumber-1)+d.value.length==I.value},null,8,["icon","disabled"])])]),_:1},8,["open"])])}}}),De=ae(ce,[["__scopeId","data-v-f79f7f6a"]]);export{De as default};
