import{a as N}from"./resource-C8WK-QWc.js";import{P as U,b as V,r as F,R as q}from"./@ant-design-IRTEbH5T.js";import{a as D,r as E,B as J,s as T,M as W}from"./ant-design-vue-yNpjrsH-.js";import{d as Y,R as Z,S as j,r as p,o as A,U as m,V as u,c as o,u as i,a5 as b,J as G,W as _,h as w,F as H,Y as K,Z as Q,ac as X,ad as ee}from"./@vue-erW_et9m.js";import{_ as ae}from"./index-Br8gjNii.js";import"./@ctrl-DOFZgDuz.js";import"./@babel-BiFW4_mA.js";import"./lodash-es-PU94eZQX.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./dayjs-B73STPP_.js";import"./throttle-debounce-CUWDS_la.js";import"./async-validator-DKvM95Vc.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-OW4gUFyn.js";import"./pinia-DOycVbUI.js";/* empty css                      */import"./axios-C8DqakIB.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-DFKns4fX.js";import"./vue-router-CjQMd8cK.js";import"./uuid-CQkTLCs1.js";import"./echarts-DetEu2Tg.js";import"./tslib-BDyQ-Jie.js";import"./zrender-CDo53BfZ.js";import"./gaius-utils-FbSzq_Sh.js";const te=c=>(X("data-v-f79f7f6a"),c=c(),ee(),c),oe={class:"image-picker"},se=te(()=>_("div",{class:"select-image-text"},"选择图片",-1)),ne={key:1,class:"preview-image"},ie={class:"image-container"},le={class:"image-list"},pe=["src","onClick"],ce=Y({__name:"ImagePicker",props:{value:{type:String,required:!0},valueModifiers:{}},emits:Z(["change"],["update:value"]),setup(c,{emit:S}){const f=j(c,"value"),h=p([]),d=p([]),a=p({pageSize:3,pageNumber:1,keyword:""}),I=p(0),v="/prod",g=p(""),M=e=>{g.value=e},P=()=>{a.value.pageNumber++,$()},$=()=>{N.getList(a.value).then(e=>{const{code:t,data:s,msg:l}=e;t==200&&(h.value=h.value.concat(s.data),d.value=s.data,I.value=s.total)})},z=()=>{a.value.pageNumber--,d.value=h.value.slice((a.value.pageNumber-1)*a.value.pageSize,a.value.pageSize)},L=e=>{const t=new FormData;t.append("file",e.file,encodeURIComponent(e.file.name)),N.add(t).then(s=>{const{code:l,data:x,msg:C}=s;l==200&&(k(`${v}/${x.path}`),D.success(C),r.value=!1)})},r=p(!1),O=()=>{r.value=!0},B=S,k=e=>{f.value=e,B("change",e)},R=()=>{k(g.value),y()},y=()=>{g.value="",r.value=!1};return A(()=>{$()}),(e,t)=>{const s=E,l=J,x=T,C=W;return m(),u("div",oe,[f.value?(m(),u("div",ne,[o(i(V),{onClick:t[0]||(t[0]=n=>k("")),style:{position:"absolute",top:"5px",right:"5px",color:"#999","z-index":"99"}}),o(s,{src:f.value,width:"100px",height:"100px"},null,8,["src"])])):(m(),u("div",{key:0,class:"select-image",onClick:O},[o(i(U)),se])),o(C,{open:r.value,"onUpdate:open":t[1]||(t[1]=n=>r.value=n),title:"选择图片",onOk:R,onCancel:y},{default:b(()=>[o(x,{name:"file",accept:"image/*",customRequest:L,maxCount:"1",showUploadList:!1},{default:b(()=>[o(l,{type:"primary"},{default:b(()=>[G("自定义")]),_:1})]),_:1}),_("div",ie,[o(l,{type:"ghost",icon:w(i(F)),onClick:z,disabled:a.value.pageNumber==1},null,8,["icon","disabled"]),_("div",le,[(m(!0),u(H,null,K(d.value,n=>(m(),u("div",{key:n.id,class:Q(["image-item",{selected:g.value==`${i(v)}/${n.path}`}])},[_("img",{src:`${i(v)}/${n.path}`,onClick:re=>M(`${i(v)}/${n.path}`),height:"100px",width:"100px"},null,8,pe)],2))),128))]),o(l,{type:"ghost",icon:w(i(q)),onClick:P,disabled:a.value.pageSize*(a.value.pageNumber-1)+d.value.length==I.value},null,8,["icon","disabled"])])]),_:1},8,["open"])])}}}),De=ae(ce,[["__scopeId","data-v-f79f7f6a"]]);export{De as default};
