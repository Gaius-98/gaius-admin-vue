import{c as d,I as Z,b as ee}from"./index-XMdY5bGJ.js";import{a as B,g as ae,M as te,h as oe,i as ne,j as le,B as se,k as re,F as ue,T as ie,c as me,m as pe,n as de,s as ce,f as _e}from"./ant-design-vue-D_mFXu_Y.js";import{d as ve,a as fe,r as u,o as O,m as ge,U as c,V as I,c as e,a5 as t,J as m,W as ye,a4 as C,a6 as ke,ad as y,F as R}from"./@vue-CeHXljvD.js";import"./pinia-DZPz60mG.js";/* empty css                      */import"./axios-DsPaXkF5.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-N9TsG8xj.js";import"./vue-router-BsaqgHAe.js";import"./uuid-CQkTLCs1.js";import"./vue-codemirror-DAixPvWe.js";import"./codemirror-D_HKGbp9.js";import"./@codemirror-BNYy9MjX.js";import"./@lezer-Cp1Os4ub.js";import"./crelt-C8TCjufn.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./@ant-design-D3E7U7HN.js";import"./@ctrl-DOFZgDuz.js";import"./echarts-DetEu2Tg.js";import"./tslib-BDyQ-Jie.js";import"./zrender-CDo53BfZ.js";import"./gaius-utils-BQYB1CTP.js";import"./@babel-BiFW4_mA.js";import"./lodash-es-PU94eZQX.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./dayjs-X-x4l2Bb.js";import"./throttle-debounce-CUWDS_la.js";import"./async-validator-DKvM95Vc.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";const be={class:"user"},Ie={class:"tools"},Ce=ve({__name:"UserView",setup(we){const i=fe({keyword:"",pageNumber:1,pageSize:10}),w=u([]),z=u([{title:"用户名",key:"username",dataIndex:"username"},{title:"名称",key:"name",dataIndex:"name"},{title:"邮箱",key:"email",dataIndex:"email"},{title:"角色",key:"roleId",dataIndex:"roleId"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),k=u(!1),x=u(),$=()=>{var o;(o=x.value)==null||o.resetFields(),p()},F=u(0),j=()=>{i.pageNumber=1,i.pageSize=10,p()},L=o=>{const{current:a,pageSize:s}=o;i.pageNumber=a,i.pageSize=s,p()},p=()=>{k.value=!0,d.getList(i).then(o=>{const{code:a,data:s}=o;a==200&&(w.value=s.data,F.value=s.total),k.value=!1})};O(()=>{p()});const _=u(!1),l=u({username:"",name:"",password:"",email:"",avatar:"",roleId:""}),v=u("add"),M=ge(()=>({add:"新增用户",edit:"编辑用户"})[v.value]),U=u(),P=()=>{v.value="add",_.value=!0,l.value={username:"",name:"",password:"",email:"",avatar:"",roleId:""}},h=async o=>{const{code:a,data:s}=await d.getDetail(o.username);a==200&&(l.value=s,v.value="edit",_.value=!0)},E=async o=>{const{code:a,msg:s,data:r}=await d.remove(o.username);a==200&&(B.success(r),p())},N=()=>{var o;(o=U.value)==null||o.resetFields()},A=()=>{let o;v.value=="add"?o=d.add:o=d.update,o(l.value).then(a=>{const{code:s}=a;s==200&&(B.success(v.value=="add"?"新增成功":"编辑成功"),p()),N(),_.value=!1})},T=u([]),J=()=>{d.getRoleDict().then(o=>{const{code:a,data:s,msg:r}=o;a==200&&(T.value=s)})};return O(()=>{J()}),(o,a)=>{const s=oe,r=ne,D=le,f=se,W=re,S=ue,V=ae,b=ie,q=me,G=pe,H=de,K=ce,Q=_e,X=te;return c(),I("div",be,[e(V,{class:"search-area"},{default:t(()=>[e(S,{ref_key:"searchFormRef",ref:x,model:i,onFinish:j},{default:t(()=>[e(W,{gutter:24},{default:t(()=>[e(D,{span:4},{default:t(()=>[e(r,{label:"用户名",name:"keyword"},{default:t(()=>[e(s,{value:i.keyword,"onUpdate:value":a[0]||(a[0]=n=>i.keyword=n)},null,8,["value"])]),_:1})]),_:1}),e(D,{span:4,style:{"text-align":"right"}},{default:t(()=>[e(f,{type:"primary","html-type":"submit"},{default:t(()=>[m("搜索")]),_:1}),e(f,{style:{margin:"0 8px"},onClick:$},{default:t(()=>[m(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(V,null,{default:t(()=>[ye("div",Ie,[e(f,{type:"primary",onClick:P},{default:t(()=>[m("新增")]),_:1})]),e(H,{loading:k.value,columns:z.value,"data-source":w.value,scroll:{y:440},onChange:L,pagination:{current:i.pageNumber,total:F.value}},{bodyCell:t(({column:n,record:g})=>[n.key=="role"?(c(),C(b,{key:0},{default:t(()=>[m(ke(g.role),1)]),_:2},1024)):y("",!0),n.key=="action"?(c(),I(R,{key:1},[e(f,{type:"link",onClick:Y=>h(g)},{default:t(()=>[m("编辑")]),_:2},1032,["onClick"]),e(q,{type:"vertical"}),e(G,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:Y=>E(g)},{default:t(()=>[e(f,{type:"link",danger:""},{default:t(()=>[m("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):y("",!0),n.key=="userType"?(c(),I(R,{key:2},[g.userType=="app"?(c(),C(b,{key:0,color:"#2db7f5"},{default:t(()=>[m("菜单")]),_:1})):y("",!0),g.userType=="directory"?(c(),C(b,{key:1,color:"#87d068"},{default:t(()=>[m("目录")]),_:1})):y("",!0)],64)):y("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1}),e(X,{open:_.value,"onUpdate:open":a[7]||(a[7]=n=>_.value=n),onOk:A,title:M.value,onCancel:N},{default:t(()=>[e(S,{model:l.value,"label-col":{span:8},ref_key:"modalFormRef",ref:U},{default:t(()=>[e(r,{label:"用户名"},{default:t(()=>[e(s,{value:l.value.username,"onUpdate:value":a[1]||(a[1]=n=>l.value.username=n)},null,8,["value"])]),_:1}),e(r,{label:"密码"},{default:t(()=>[e(K,{value:l.value.password,"onUpdate:value":a[2]||(a[2]=n=>l.value.password=n)},null,8,["value"])]),_:1}),e(r,{label:"角色"},{default:t(()=>[e(Q,{value:l.value.roleId,"onUpdate:value":a[3]||(a[3]=n=>l.value.roleId=n),fieldNames:{label:"roleName",value:"roleId"},options:T.value},null,8,["value","options"])]),_:1}),e(r,{label:"头像"},{default:t(()=>[e(Z,{value:l.value.avatar,"onUpdate:value":a[4]||(a[4]=n=>l.value.avatar=n)},null,8,["value"])]),_:1}),e(r,{label:"名称"},{default:t(()=>[e(s,{value:l.value.name,"onUpdate:value":a[5]||(a[5]=n=>l.value.name=n)},null,8,["value"])]),_:1}),e(r,{label:"邮箱"},{default:t(()=>[e(s,{value:l.value.email,"onUpdate:value":a[6]||(a[6]=n=>l.value.email=n)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),la=ee(Ce,[["__scopeId","data-v-b63115a4"]]);export{la as default};
