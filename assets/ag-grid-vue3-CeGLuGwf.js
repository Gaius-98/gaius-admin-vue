import{A,_ as u,a as v,b as T,C as p,c as R,B as I,V as F,d as P}from"./ag-grid-community-pc37hWba.js";import{d as D,h as _,g as M,m as E,t as $,c as k,j as w}from"./@vue-BvA2MXdg.js";var x=t=>typeof t=="symbol",L=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})};new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(x));function m(t){const e=t&&t.__v_raw;return e?m(e):t}function l(t){return Object.isExtensible(t)&&L(t,"__v_skip",!0),t}var S=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),U=t=>`on${t.charAt(0).toUpperCase()}${t.substring(1,t.length)}`,O=t=>t&&(Object.isFrozen(t)?t:E($(t))),j=()=>{const t={};p.PUBLIC_EVENTS.map(i=>U(S(i))).forEach(i=>t[i]=void 0);const n={},r={modelValue:{handler(i,s){!this.gridCreated||!this.api||i!==s&&(i&&s&&i.length===s.length&&i.every((o,a)=>o===s[a])||u({rowData:i},this.api))},deep:!0}};return p.ALL_PROPERTIES.filter(i=>i!="gridOptions").forEach(i=>{t[i]={default:p.VUE_OMITTED_PROPERTY},r[i]={handler(s,o){let a=s;i==="rowData"&&s!=p.VUE_OMITTED_PROPERTY&&(a=O(s)),this.batchChanges[i]=a===p.VUE_OMITTED_PROPERTY?void 0:a,this.batchTimeout==null&&(this.batchTimeout=setTimeout(()=>{this.batchTimeout=null,u(this.batchChanges,this.api),this.batchChanges=E({})},0))},deep:!0}}),[t,n,r]};function C(t){P(`Could not find component with name of ${t}. Is it in Vue.components?`)}var f=class b{static getComponentDefinition(e,n){let r;return typeof e=="string"?r=this.searchForComponentInstance(n,e):r={extends:D({...e})},r||C(e),r.extends?(r.extends.setup&&(r.setup=r.extends.setup),r.extends.props=this.addParamsToProps(r.extends.props)):r.props=this.addParamsToProps(r.props),r}static addParamsToProps(e){return!e||Array.isArray(e)&&e.indexOf("params")===-1?e=["params",...e||[]]:typeof e=="object"&&!e.params&&(e.params={type:Object}),e}static createAndMountComponent(e,n,r,i){const s=b.getComponentDefinition(e,r);if(!s)return;const{vNode:o,destroy:a,el:d}=this.mount(s,{params:Object.freeze(n)},r,i||{});return{componentInstance:o.component.proxy,element:d,destroy:a}}static mount(e,n,r,i){let s=k(e,n);s.appContext=r.$.appContext,s.appContext.provides={...i,...s.appContext.provides?s.appContext.provides:{},...r.$parent.$options.provide?r.$parent.$options.provide:{}};let o=document.createElement("div");return w(s,o),{vNode:s,destroy:()=>{o&&w(null,o),o=null,s=null},el:o}}static searchForComponentInstance(e,n,r=10,i=!1){let s=null,o=e.$parent,a=0;for(;!s&&o&&o.$options&&++a<r;){const d=o;d.$options&&d.$options.components&&d.$options.components[n]?s=d.$options.components[n]:d[n]&&(s=d[n]),o=o.$parent}if(!s){const d=e.$.appContext.components;d&&d[n]&&(s=d[n])}return!s&&!i?(C(n),null):s}},V=class c extends I{constructor(e,n){super(),this.parent=e,c.provides||(c.provides=n)}createWrapper(e){const n=this;class r extends B{init(o){super.init(o)}hasMethod(o){const a=i.getFrameworkComponentInstance();return a[o]?!0:a.$.setupState[o]!=null}callMethod(o,a){var g;const d=this.getFrameworkComponentInstance(),h=i.getFrameworkComponentInstance();return h[o]?h[o].apply(d,a):(g=h.$.setupState[o])==null?void 0:g.apply(d,a)}addMethod(o,a){i[o]=a}processMethod(o,a){return o==="refresh"&&(this.getFrameworkComponentInstance().params=a[0]),this.hasMethod(o)?this.callMethod(o,a):o==="refresh"}createComponent(o){return n.createComponent(e,o)}}const i=new r;return i}createComponent(e,n){return f.createAndMountComponent(e,n,this.parent,c.provides)}createMethodProxy(e,n,r){return function(){return e.hasMethod(n)?e.callMethod(n,arguments):(r&&v("Framework component is missing the method "+n+"()"),null)}}destroy(){this.parent=null}},B=class{getGui(){return this.element}destroy(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy=="function"&&this.getFrameworkComponentInstance().destroy(),this.unmount()}getFrameworkComponentInstance(){return this.componentInstance}init(t){const{componentInstance:e,element:n,destroy:r}=this.createComponent(t);this.componentInstance=e,this.unmount=r,this.element=n.firstElementChild??n}},G=class extends F{constructor(t){super("vue"),this.parent=t}frameworkComponent(t,e){let n=f.searchForComponentInstance(this.parent,t,10,!0)?t:null;if(!n&&e&&e[t]){const r=e[t];n=f.searchForComponentInstance(this.parent,r,10,!0)?r:null}return n}isFrameworkComponent(t){return typeof t=="object"}},W=new Set(["rowDataUpdated","cellValueChanged","rowValueChanged"]),y="onUpdate:modelValue",Y="update:modelValue",[z,N,q]=j(),J=D({render(){return _("div")},props:{gridOptions:{type:Object,default:()=>({})},componentDependencies:{type:Array,default:()=>[]},plugins:[],modules:{type:Array,default:()=>[]},modelValue:{type:Array,default:void 0,required:!1},...z},data(){return{api:void 0,gridCreated:!1,isDestroyed:!1,gridReadyFired:!1,emitRowModel:void 0,batchTimeout:null,batchChanges:l({})}},computed:N,watch:q,methods:{globalEventListenerFactory(t){return e=>{if(this.isDestroyed)return;e==="gridReady"&&(this.gridReadyFired=!0);const n=A.has(e);n&&!t||!n&&t||this.updateModelIfUsed(e)}},processChanges(t,e,n){if(this.gridCreated){if(this.skipChange(t,e,n))return;const r={[t]:t==="rowData"?Object.isFrozen(e)?e:l(m(e)):e};u(r,this.api)}},checkForBindingConflicts(){const t=this;(t.rowData&&t.rowData!=="AG-VUE-OMITTED-PROPERTY"||this.gridOptions.rowData)&&t.modelValue&&v("Using both rowData and v-model. rowData will be ignored.")},getRowData(){var e;const t=[];return(e=this.api)==null||e.forEachNode(n=>{t.push(n.data)}),t},updateModelIfUsed(t){this.gridReadyFired&&this.$attrs[y]&&W.has(t)&&this.emitRowModel&&this.emitRowModel()},getRowDataBasedOnBindings(){const t=this,e=t.modelValue;return e||(t.rowData?t.rowData:t.gridOptions.rowData)},getProvides(){let t=M(),e={};for(;t;)t&&t.provides&&(e={...e,...t.provides}),t=t.parent;return e},skipChange(t,e,n){if(this.gridReadyFired&&t==="rowData"&&this.$attrs[y]){if(e===n)return!0;if(e&&n){const r=e,i=n;if(r.length===i.length){for(let s=0;s<r.length;s++)if(r[s]!==i[s])return!1;return!0}}}return!1},debounce(t,e){let n;return()=>{const r=function(){t()};window.clearTimeout(n),n=window.setTimeout(r,e)}}},mounted(){this.emitRowModel=this.debounce(()=>{this.$emit(Y,Object.freeze(this.getRowData()))},20);const t=this.getProvides(),e=new V(this,t),n=l(T(m(this.gridOptions),this));this.checkForBindingConflicts();const r=this.getRowDataBasedOnBindings();r!==p.VUE_OMITTED_PROPERTY&&(n.rowData=O(r));const i={globalEventListener:this.globalEventListenerFactory().bind(this),globalSyncEventListener:this.globalEventListenerFactory(!0).bind(this),frameworkOverrides:new G(this),providedBeanInstances:{frameworkComponentWrapper:e},modules:this.modules};this.api=R(this.$el,n,i),this.gridCreated=!0},unmounted(){var t;this.gridCreated&&((t=this.api)==null||t.destroy(),this.isDestroyed=!0)}});export{J as A};
