import{d as W,u as _e,h as F,e as c,w as fe,j as ye,_ as P,az as ge,k as e,Z as Q,l as ee,P as te,ag as ae,b as be,ay as h,ar as Te,B as xe,N as U,O as q,V as a,ax as le,a0 as m,al as ke,U as ne,ao as oe,W as se,Q as Ce}from"./index-D-DMxueM.js";import{C as De,M as we,_ as Ne,a as Se,b as $e,c as he,d as ze}from"./index-CTKbgCuu.js";import{P as Fe}from"./FolderOutlined-W7RJ59gV.js";import{m as Oe,I as Ie,_ as Ue,F as Be}from"./index-Cct7ndk0.js";import{S as Ve,T as Ae,_ as Re,g as je}from"./index-18WSJPcU.js";import{c as Le,C as Z,B as Pe}from"./index-DcMcWl_R.js";import{_ as Ee}from"./index-koTnhk1y.js";import"./RightOutlined-C4KZ8E22.js";const Ge={small:8,middle:16,large:24},Me=()=>({prefixCls:String,size:{type:[String,Number,Array]},direction:te.oneOf(ae("horizontal","vertical")).def("horizontal"),align:te.oneOf(ae("start","end","center","baseline")),wrap:be()});function qe(l){return typeof l=="string"?Ge[l]:l||0}const B=W({compatConfig:{MODE:3},name:"ASpace",inheritAttrs:!1,props:Me(),slots:Object,setup(l,E){let{slots:r,attrs:D}=E;const{prefixCls:y,space:b,direction:O}=_e("space",l),[G,V]=Le(y),g=Oe(),p=F(()=>{var d,_,x;return(x=(d=l.size)!==null&&d!==void 0?d:(_=b==null?void 0:b.value)===null||_===void 0?void 0:_.size)!==null&&x!==void 0?x:"small"}),w=c(),v=c();fe(p,()=>{[w.value,v.value]=(Array.isArray(p.value)?p.value:[p.value,p.value]).map(d=>qe(d))},{immediate:!0});const o=F(()=>l.align===void 0&&l.direction==="horizontal"?"center":l.align),T=F(()=>ye(y.value,V.value,`${y.value}-${l.direction}`,{[`${y.value}-rtl`]:O.value==="rtl",[`${y.value}-align-${o.value}`]:o.value})),M=F(()=>O.value==="rtl"?"marginLeft":"marginRight"),A=F(()=>{const d={};return g.value&&(d.columnGap=`${w.value}px`,d.rowGap=`${v.value}px`),P(P({},d),l.wrap&&{flexWrap:"wrap",marginBottom:`${-v.value}px`})});return()=>{var d,_;const{wrap:x,direction:R="horizontal"}=l,j=(d=r.default)===null||d===void 0?void 0:d.call(r),f=ge(j),N=f.length;if(N===0)return null;const S=(_=r.split)===null||_===void 0?void 0:_.call(r),L=`${y.value}-item`,n=w.value,t=N-1;return e("div",ee(ee({},D),{},{class:[T.value,D.class],style:[A.value,D.style]}),[f.map((u,i)=>{let k=j.indexOf(u);k===-1&&(k=`$$space-${i}`);let C={};return g.value||(R==="vertical"?i<t&&(C={marginBottom:`${n/(S?2:1)}px`}):C=P(P({},i<t&&{[M.value]:`${n/(S?2:1)}px`}),x&&{paddingBottom:`${v.value}px`})),G(e(Q,{key:k},[e("div",{class:L,style:C},[u]),i<t&&S&&e("span",{class:`${L}-split`,style:C},[S])]))})])}}});B.Compact=Z;B.install=function(l){return l.component(B.name,B),l.component(Z.name,Z),l};const z={getList:l=>h({method:"get",url:"dict/list",params:l}),getDetail:l=>h({method:"get",url:"dict/detail",params:{id:l}}),remove:l=>h({method:"get",url:"dict/remove",params:{id:l}}),add:l=>h({method:"post",url:"dict/add",data:l}),update:l=>h({method:"post",url:"dict/update",data:l}),getDictTypeList:()=>h({method:"get",url:"dict/dictTypeList"})},We={class:"dict"},Qe={class:"tools"},Ze=W({__name:"DictView",setup(l){const E=W({props:{vnodes:{type:Object,required:!0}},render(){return this.vnodes}}),r=Te({keyword:"",dictType:"",pageNumber:1,pageSize:10}),D=c([]),y=c([{title:"归属字典",key:"dictTypeDesc",dataIndex:"dictTypeDesc"},{title:"字典描述",key:"label",dataIndex:"label"},{title:"字典值",key:"value",dataIndex:"value"},{title:"状态",key:"status",dataIndex:"status"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),b=c(!1),O=c(),G=()=>{var n;(n=O.value)==null||n.resetFields(),g()},V=c(0),g=()=>{b.value=!0,z.getList(r).then(n=>{const{code:t,data:u}=n;t==200&&(D.value=u.data,V.value=u.total),b.value=!1})},p=c([]),w=async()=>{const{code:n,data:t,msg:u}=await z.getDictTypeList();n==200&&(p.value=t)};xe(()=>{g(),w()});const v=c(!1),o=c({label:"",value:"",dictType:"",dictTypeDesc:"",sortNum:0}),T=c("add"),M=F(()=>({add:"新增字典",edit:"编辑字典"})[T.value]),A=c(),d=()=>{T.value="add",v.value=!0,o.value={label:"",value:"",dictType:"",dictTypeDesc:"",sortNum:0}},_=async n=>{const{code:t,data:u}=await z.getDetail(n.id);t==200&&(o.value=u,T.value="edit",v.value=!0)},x=async n=>{const{code:t,msg:u,data:i}=await z.remove(n.id);t==200&&(le.success(i),g())},R=()=>{var n;(n=A.value)==null||n.resetFields()},j=()=>{let n;T.value=="add"?n=z.add:n=z.update,n(o.value).then(t=>{const{code:u}=t;u==200&&(le.success(T.value=="add"?"新增成功":"编辑成功"),g(),w(),N.value=[]),R(),v.value=!1})},f=c(""),N=c([]),S=n=>{n.preventDefault(),p.value.push({dictType:f.value,dictTypeDesc:f.value}),N.value.push(f.value),f.value=""},L=()=>{o.value.dictTypeDesc=p.value.find(n=>n.dictType==o.value.dictType).dictTypeDesc};return(n,t)=>{const u=Ie,i=Ue,k=Ne,C=Ve,$=Pe,ue=Se,H=Be,J=De,K=Ae,X=$e,ie=he,de=ze,ce=B,re=Ee,Y=Re,pe=je,ve=we;return U(),q("div",We,[e(J,{class:"search-area"},{default:a(()=>[e(H,{ref_key:"searchFormRef",ref:O,model:r,onFinish:g},{default:a(()=>[e(ue,{gutter:24},{default:a(()=>[e(k,{span:4},{default:a(()=>[e(i,{label:"字典描述",name:"keyword"},{default:a(()=>[e(u,{value:r.keyword,"onUpdate:value":t[0]||(t[0]=s=>r.keyword=s)},null,8,["value"])]),_:1})]),_:1}),e(k,{span:4},{default:a(()=>[e(i,{label:"归属字典",name:"dictType"},{default:a(()=>[e(C,{value:r.dictType,"onUpdate:value":t[1]||(t[1]=s=>r.dictType=s),fieldNames:{label:"dictTypeDesc",value:"dictType"},allowClear:"",options:p.value},null,8,["value","options"])]),_:1})]),_:1}),e(k,{span:4,style:{"text-align":"right"}},{default:a(()=>[e($,{type:"primary","html-type":"submit"},{default:a(()=>[m("搜索")]),_:1}),e($,{style:{margin:"0 8px"},onClick:G},{default:a(()=>[m(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(J,null,{default:a(()=>[ke("div",Qe,[e($,{type:"primary",onClick:d},{default:a(()=>[m("新增")]),_:1})]),e(de,{loading:b.value,columns:y.value,"data-source":D.value,pagination:{current:r.pageNumber,total:V.value}},{bodyCell:a(({column:s,record:I})=>[s.key=="status"?(U(),q(Q,{key:0},[I.status?(U(),ne(K,{key:0,color:"#87d068"},{default:a(()=>[m("启用")]),_:1})):(U(),ne(K,{key:1,color:"#f50"},{default:a(()=>[m("停用")]),_:1}))],64)):oe("",!0),s.key=="action"?(U(),q(Q,{key:1},[e($,{type:"link",onClick:me=>_(I)},{default:a(()=>[m("编辑")]),_:2},1032,["onClick"]),e(X,{type:"vertical"}),e(ie,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:me=>x(I)},{default:a(()=>[e($,{type:"link",danger:""},{default:a(()=>[m("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):oe("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1}),e(ve,{open:v.value,"onUpdate:open":t[10]||(t[10]=s=>v.value=s),onOk:j,title:M.value,onCancel:R},{default:a(()=>[e(H,{model:o.value,"label-col":{span:8},ref_key:"modalFormRef",ref:A},{default:a(()=>[e(i,{label:"字典类型"},{default:a(()=>[e(C,{value:o.value.dictType,"onUpdate:value":t[3]||(t[3]=s=>o.value.dictType=s),fieldNames:{label:"dictType",value:"dictType"},options:p.value,onChange:L},{dropdownRender:a(({menuNode:s})=>[e(se(E),{vnodes:s},null,8,["vnodes"]),e(X,{style:{margin:"4px 0"}}),e(ce,{style:{padding:"4px 8px"}},{default:a(()=>[e(u,{ref:"inputRef",value:f.value,"onUpdate:value":t[2]||(t[2]=I=>f.value=I),placeholder:"请输入字典类型"},null,8,["value"]),e($,{type:"text",onClick:S},{icon:a(()=>[e(se(Fe))]),default:a(()=>[m(" 增加类型 ")]),_:1})]),_:1})]),_:1},8,["value","options"])]),_:1}),e(i,{label:"字典类型描述"},{default:a(()=>[e(u,{value:o.value.dictTypeDesc,"onUpdate:value":t[4]||(t[4]=s=>o.value.dictTypeDesc=s),disabled:!N.value.includes(o.value.dictType)},null,8,["value","disabled"])]),_:1}),e(i,{label:"字典描述"},{default:a(()=>[e(u,{value:o.value.label,"onUpdate:value":t[5]||(t[5]=s=>o.value.label=s)},null,8,["value"])]),_:1}),e(i,{label:"字典值"},{default:a(()=>[e(u,{value:o.value.value,"onUpdate:value":t[6]||(t[6]=s=>o.value.value=s)},null,8,["value"])]),_:1}),e(i,{label:"排序号"},{default:a(()=>[e(re,{value:o.value.sortNum,"onUpdate:value":t[7]||(t[7]=s=>o.value.sortNum=s)},null,8,["value"])]),_:1}),e(i,{label:"状态"},{default:a(()=>[e(pe,{value:o.value.status,"onUpdate:value":t[8]||(t[8]=s=>o.value.status=s),"button-style":"solid"},{default:a(()=>[e(Y,{value:1},{default:a(()=>[m("启用 ")]),_:1}),e(Y,{value:0},{default:a(()=>[m("停用 ")]),_:1})]),_:1},8,["value"])]),_:1}),e(i,{label:"描述"},{default:a(()=>[e(u,{type:"textarea",value:o.value.desc,"onUpdate:value":t[9]||(t[9]=s=>o.value.desc=s)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),lt=Ce(Ze,[["__scopeId","data-v-7051c37f"]]);export{lt as default};
