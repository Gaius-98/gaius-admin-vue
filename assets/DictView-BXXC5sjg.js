import{r as v,_ as ye}from"./index-bp98ELWv.js";import{g as fe,m as ge,r as i,n as ke,a8 as Q,o as r,q as h,l as a,w as t,e as U,ab as De,ao as Te,ac as be,a6 as u,N as xe,L as x,h as _,F as O,ad as q,a4 as we,V as Ce,ai as he,R as Ne,ak as Fe,ap as Ie,a7 as Ue,aq as Oe,X as qe,$ as Re,a0 as Le,a5 as Se,a3 as ze}from"./.pnpm-CWzuy1aI.js";const y={getTypeList:d=>v({method:"get",url:"dict/list/type",params:d}),getTypeDetail:d=>v({method:"get",url:"dict/detail/type",params:{id:d}}),getDictDetail:d=>v({method:"get",url:"dict/detail/data",params:{id:d}}),removeType:d=>v({method:"get",url:"dict/remove/type",params:{id:d}}),removeData:d=>v({method:"get",url:"dict/remove/data",params:{id:d}}),addType:d=>v({method:"post",url:"dict/add/type",data:d}),addData:d=>v({method:"post",url:"dict/add/data",data:d}),updateType:d=>v({method:"post",url:"dict/update/type",data:d}),updateData:d=>v({method:"post",url:"dict/update/data",data:d}),getDictTypeList:()=>v({method:"get",url:"dict/dictTypeList"})},Ve={class:"dict"},$e={class:"tools"},Be=fe({__name:"DictView",setup(d){const c=ge({keyword:"",dictType:"",pageNumber:1,pageSize:10}),j=i([]),W=i([{title:"字典类型",key:"dictType",dataIndex:"dictType",width:"300px"},{title:"类型描述",key:"dictTypeDesc",dataIndex:"dictTypeDesc",width:"300px"},{title:"状态",key:"status",dataIndex:"status",width:"100px"},{title:"备注",key:"remark",dataIndex:"remark"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),Y=i([{title:"字典值",key:"value",dataIndex:"value",width:"300px"},{title:"翻译值",key:"label",dataIndex:"label",width:"300px"},{title:"排序号",key:"sortNum",dataIndex:"sortNum",width:"120px"},{title:"状态",key:"status",dataIndex:"status",width:"100px"},{title:"备注",key:"remark",dataIndex:"remark"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),R=i(!1),P=i(),Z=()=>{var l;(l=P.value)==null||l.resetFields(),f()},E=i(0),ee=()=>{c.pageNumber=1,c.pageSize=10,f()},te=l=>{const{current:e,pageSize:s}=l;c.pageNumber=e,c.pageSize=s,f()},f=()=>{R.value=!0,y.getTypeList(c).then(l=>{const{code:e,data:s}=l;e==200&&(j.value=s.data,E.value=s.total),R.value=!1})},L=i([]),M=async()=>{const{code:l,data:e,msg:s}=await y.getDictTypeList();l==200&&(L.value=e)};ke(()=>{f(),M()});const w=i(!1),m=i({dictType:"",dictTypeDesc:"",remark:"",status:"1"}),T=i("add"),ae=Q(()=>({add:"新增字典类型",edit:"编辑字典类型"})[T.value]),S=i("add"),le=Q(()=>({add:"新增字典",edit:"编辑字典"})[S.value]),z=i(),oe=()=>{T.value="add",w.value=!0,m.value={dictType:"",dictTypeDesc:"",status:"1",remark:""}},ne=async l=>{const{code:e,data:s}=await y.getTypeDetail(l.id);e==200&&(m.value=s,T.value="edit",w.value=!0)},de=async l=>{const{code:e,msg:s,data:n}=await y.removeType(l.id);e==200&&(U.success(n),c.pageNumber=1,f())},se=async l=>{const{code:e,msg:s,data:n}=await y.removeData(l.id);e==200&&(U.success(n),f())},A=()=>{var l;(l=z.value)==null||l.resetFields()},K=()=>{var l;(l=V.value)==null||l.resetFields()},ue=()=>{var l;(l=z.value)==null||l.validate().then(()=>{let e;T.value=="add"?e=y.addType:e=y.updateType,e(m.value).then(s=>{const{code:n}=s;n==200&&(U.success(T.value=="add"?"新增成功":"编辑成功"),f()),A(),w.value=!1})})},ie=()=>{var l;(l=V.value)==null||l.validate().then(()=>{let e;T.value=="add"?e=y.addData:e=y.updateData,e(p.value).then(s=>{const{code:n}=s;n==200&&(U.success(T.value=="add"?"新增成功":"编辑成功"),f(),M()),K(),C.value=!1})})},C=i(!1),re=async l=>{const{code:e,data:s}=await y.getDictDetail(l.id);e==200&&(C.value=!0,S.value="edit",p.value=s)},pe=l=>{C.value=!0,S.value="add",p.value={dictType:l.dictType,label:"",value:"",status:"1",sortNum:0}},p=i({label:"",value:"",sortNum:0,status:"1",dictType:""}),V=i();return(l,e)=>{const s=we,n=Ce,g=he,$=Ne,B=De,N=Fe,X=Ie,ce=Ue,G=Oe,F=qe,I=Re,H=Le,me=Se,J=Te,ve=ze,b=be("has-perm");return r(),h("div",Ve,[a(B,{class:"search-area"},{default:t(()=>[a($,{ref_key:"searchFormRef",ref:P,layout:"inline",model:c,onFinish:ee},{default:t(()=>[a(n,{label:"字典类型",name:"dictType"},{default:t(()=>[a(s,{value:c.dictType,"onUpdate:value":e[0]||(e[0]=o=>c.dictType=o),fieldNames:{label:"dictTypeDesc",value:"dictType"},optionFilterProp:"dictTypeDesc","show-search":"",allowClear:"",options:L.value,style:{width:"200px"}},null,8,["value","options"])]),_:1}),a(n,null,{default:t(()=>[a(g,{type:"primary","html-type":"submit"},{default:t(()=>[u("搜索")]),_:1}),a(g,{style:{margin:"0 8px"},onClick:Z},{default:t(()=>[u(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(B,null,{default:t(()=>[xe("div",$e,[x((r(),_(g,{type:"primary",onClick:oe},{default:t(()=>[u("新增")]),_:1})),[[b,"system:dict:add"]])]),a(G,{loading:R.value,columns:W.value,"data-source":j.value,pagination:{current:c.pageNumber,total:E.value,showSizeChanger:!0,pageSize:c.pageSize},current:c.pageNumber,"onUpdate:current":e[1]||(e[1]=o=>c.pageNumber=o),onChange:te,scroll:{y:560},rowKey:"id",class:"ant-table-striped"},{bodyCell:t(({column:o,record:k})=>[o.key=="status"?(r(),h(O,{key:0},[k.status=="1"?(r(),_(N,{key:0,color:"#87d068"},{default:t(()=>[u("启用")]),_:1})):(r(),_(N,{key:1,color:"#f50"},{default:t(()=>[u("停用")]),_:1}))],64)):q("",!0),o.key=="action"?(r(),h(O,{key:1},[x((r(),_(g,{type:"link",onClick:D=>pe(k)},{default:t(()=>[u("新增")]),_:2},1032,["onClick"])),[[b,"system:dict:add"]]),x((r(),_(g,{type:"link",onClick:D=>ne(k)},{default:t(()=>[u("编辑")]),_:2},1032,["onClick"])),[[b,"system:dict:update"]]),a(X,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:D=>de(k)},{default:t(()=>[x((r(),_(g,{type:"link",danger:""},{default:t(()=>[u("删除")]),_:1})),[[b,"system:dict:remove"]])]),_:2},1032,["onConfirm"])],64)):q("",!0)]),expandedRowRender:t(({record:o})=>[a(B,null,{default:t(()=>[a(G,{class:"ant-table-striped",columns:Y.value,pagination:!1,"data-source":o.dictDataList,"row-class-name":(k,D)=>D%2===1?"table-striped":null,style:{margin:"5px"}},{bodyCell:t(({column:k,record:D})=>[k.key=="status"?(r(),h(O,{key:0},[D.status?(r(),_(N,{key:0,color:"#87d068"},{default:t(()=>[u("启用")]),_:1})):(r(),_(N,{key:1,color:"#f50"},{default:t(()=>[u("停用")]),_:1}))],64)):q("",!0),k.key=="action"?(r(),h(O,{key:1},[x((r(),_(g,{type:"link",onClick:_e=>re(D)},{default:t(()=>[u("编辑")]),_:2},1032,["onClick"])),[[b,"system:dict:update"]]),a(ce,{type:"vertical"}),a(X,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:_e=>se(D)},{default:t(()=>[x((r(),_(g,{type:"link",danger:""},{default:t(()=>[u("删除")]),_:1})),[[b,"system:dict:remove"]])]),_:2},1032,["onConfirm"])],64)):q("",!0)]),_:2},1032,["columns","data-source","row-class-name"])]),_:2},1024)]),_:1},8,["loading","columns","data-source","pagination","current"])]),_:1}),a(J,{open:w.value,"onUpdate:open":e[6]||(e[6]=o=>w.value=o),onOk:ue,title:ae.value,onCancel:A},{default:t(()=>[a($,{model:m.value,"label-col":{span:8},ref_key:"modalFormRef",ref:z},{default:t(()=>[a(n,{label:"字典类型",required:"",prop:"dictType"},{default:t(()=>[a(F,{value:m.value.dictType,"onUpdate:value":e[2]||(e[2]=o=>m.value.dictType=o)},null,8,["value"])]),_:1}),a(n,{label:"类型描述",required:"",prop:"dictTypeDesc"},{default:t(()=>[a(F,{value:m.value.dictTypeDesc,"onUpdate:value":e[3]||(e[3]=o=>m.value.dictTypeDesc=o)},null,8,["value"])]),_:1}),a(n,{label:"状态",required:"",prop:"status"},{default:t(()=>[a(H,{value:m.value.status,"onUpdate:value":e[4]||(e[4]=o=>m.value.status=o),"button-style":"solid"},{default:t(()=>[a(I,{value:"1"},{default:t(()=>[u("启用 ")]),_:1}),a(I,{value:"0"},{default:t(()=>[u("停用 ")]),_:1})]),_:1},8,["value"])]),_:1}),a(n,{label:"备注",prop:"remark"},{default:t(()=>[a(me,{value:m.value.remark,"onUpdate:value":e[5]||(e[5]=o=>m.value.remark=o),rows:5},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"]),a(J,{open:C.value,"onUpdate:open":e[12]||(e[12]=o=>C.value=o),title:le.value,onOk:ie,onCancel:K},{default:t(()=>[a($,{model:p.value,"label-col":{span:8},ref_key:"modalDictDataRef",ref:V},{default:t(()=>[a(n,{label:"所属类型",required:"",prop:"dictType"},{default:t(()=>[a(s,{value:p.value.dictType,"onUpdate:value":e[7]||(e[7]=o=>p.value.dictType=o),fieldNames:{label:"dictTypeDesc",value:"dictType"},optionFilterProp:"dictTypeDesc","show-search":"",allowClear:"",options:L.value,disabled:""},null,8,["value","options"])]),_:1}),a(n,{label:"字典值",required:"",prop:"value"},{default:t(()=>[a(F,{value:p.value.value,"onUpdate:value":e[8]||(e[8]=o=>p.value.value=o)},null,8,["value"])]),_:1}),a(n,{label:"字典翻译",required:"",prop:"label"},{default:t(()=>[a(F,{value:p.value.label,"onUpdate:value":e[9]||(e[9]=o=>p.value.label=o)},null,8,["value"])]),_:1}),a(n,{label:"排序号",required:"",prop:"sortNum"},{default:t(()=>[a(ve,{min:0,step:1,value:p.value.sortNum,"onUpdate:value":e[10]||(e[10]=o=>p.value.sortNum=o)},null,8,["value"])]),_:1}),a(n,{label:"状态",required:"",prop:"status"},{default:t(()=>[a(H,{value:p.value.status,"onUpdate:value":e[11]||(e[11]=o=>p.value.status=o),"button-style":"solid"},{default:t(()=>[a(I,{value:"1"},{default:t(()=>[u("启用 ")]),_:1}),a(I,{value:"0"},{default:t(()=>[u("停用 ")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),Ee=ye(Be,[["__scopeId","data-v-f09a5669"]]);export{Ee as default};
