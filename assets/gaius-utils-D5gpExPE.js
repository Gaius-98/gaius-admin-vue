import{d as Q,r as B,L as Y,o as q,R as F,S as L,U as A,V as J,F as N,W,X as M,u as X,G as P}from"./@vue-DSvEQE6c.js";var Z=Object.defineProperty,ee=(t,e,o)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,te=(t,e,o)=>ee(t,e+"",o),x,oe=new Uint8Array(16);function ae(){if(!x&&(x=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!x))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(oe)}const ie=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ne(t){return typeof t=="string"&&ie.test(t)}var s=[];for(var R=0;R<256;++R)s.push((R+256).toString(16).substr(1));function se(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase();if(!ne(o))throw TypeError("Stringified UUID is invalid");return o}function re(t,e,o){t=t||{};var i=t.random||(t.rng||ae)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,se(i)}const ue=(t,e)=>{const o=t.__vccOpts||t;for(const[i,f]of e)o[i]=f;return o},z=(t,e)=>{let o=null;return(...i)=>{o||(t.apply(void 0,i),o=window.setTimeout(()=>{o=null},e))}},le={class:"container"},de=["onMousedown"],he=Q({__name:"GuDragResizePlus",props:{minh:{default:10},minw:{default:10},disabled:{type:Boolean,default:!1},width:{default:100},height:{default:100},top:{default:0},left:{default:0},nodeKey:{default:re()},active:{type:Boolean,default:!0},wait:{default:10}},emits:["update"],setup(t,{emit:e}){const o=B(null),i=t,f=B([{name:"top-point",direction:"t"},{name:"left-point",direction:"l"},{name:"bottom-point",direction:"b"},{name:"right-point",direction:"r"}]),{nodeKey:S,minh:k,minw:C,disabled:_,height:D,width:T,left:U,top:I,wait:V}=Y(i),K=(a,l)=>{if(_.value)return;const{direction:n}=l,r=a.x,u=a.y,{top:p,left:c,width:h,height:m}=$(o.value),b=z(y=>{const d={width:h,top:p,left:c,height:m},v=y.y-u,g=y.x-r;switch(n){case"t":d.height=m-v,d.top=p+v;break;case"l":d.width=h-g,d.left=c+g;break;case"b":d.height=m+v;break;case"r":d.width=h+g;break}E(d)},V.value),w=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",w)},j=a=>{if(_.value)return;const l=a.x,n=a.y,r=o.value.parentElement.offsetWidth,u=o.value.parentElement.offsetHeight,{top:p,left:c,width:h,height:m}=$(o.value),b=z(y=>{const d={width:h,top:p,left:c,height:m},v=y.y-n,g=y.x-l;c+g+h>r?d.left=r-h:d.left=c+g,p+v+m>u?d.top=u-m:d.top=p+v,E(d)},V.value),w=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",w)},$=a=>{let l=/(\d+px, \d+px)/;const n=a.style.transform;let r="0",u="0";return n&&([r,u]=n.match(l)[0].split(",")),{left:parseFloat(r),top:parseFloat(u),width:parseFloat(a.style.width),height:parseFloat(a.style.height)}},G=e,E=a=>{const{top:l,left:n,width:r,height:u}=O(a);if(o.value){const p=o.value.style.transform;o.value.style.width=`${r.toFixed(2)}px`,o.value.style.height=`${u.toFixed(2)}px`,o.value.style.transform=`${H(p)} translate3d(${n.toFixed(2)}px, ${l.toFixed(2)}px,0)`,G("update",{top:l.toFixed(2),left:n.toFixed(2),width:r.toFixed(2),height:u.toFixed(2),nodeKey:S.value})}},H=a=>a?a.replace(/^translate3d\([^)]+\)$/,""):"",O=a=>{const{height:l,width:n,left:r,top:u}=a,p=o.value.parentElement,c=p.offsetHeight,h=p.offsetWidth;return l<k.value?a.height=k.value:l>c&&(a.height=c),n<C.value?a.width=C.value:n>h&&(a.width=h),r<0?a.left=0:r+n>h&&(a.width=h-r),u<0?a.top=0:u+l>c&&(a.height=c-u),a};return q(()=>{E({width:T.value,height:D.value,left:U.value,top:I.value})}),(a,l)=>(F(),L("div",{ref_key:"guDragResizePlusRef",ref:o,class:M(["gu-drag-resize-plus",{disabled:X(_),active:a.active}]),onMousedown:P(j,["stop"])},[A("div",le,[J(a.$slots,"default",{},void 0)]),(F(!0),L(N,null,W(f.value,n=>(F(),L("div",{key:n.name,class:M(["resize-point",n.name]),onMousedown:P(r=>K(r,n),["stop"])},null,42,de))),128))],34))}}),ce=ue(he,[["__scopeId","data-v-dd764b3f"]]);class fe{constructor(){te(this,"_subscribers"),this._subscribers=new Map}onSubscribe(e,o){let i=this._subscribers.get(e)||[];i.push(o),this._subscribers.set(e,i)}onPublish(e,...o){let i=this._subscribers.get(e);i&&i.map(f=>f(...o))}once(e,o){let i=(...f)=>{o(...f),this.unsubscribe(e,i)};this.onPublish(e,i)}unsubscribe(e,o){let i=this._subscribers.get(e)||[];this._subscribers.set(e,i.filter(f=>f!==o))}}export{ce as Q,fe as s};
