import{a as y}from"./menu-vSSfSKaM.js";import{Y as se}from"./@ant-design-0mnrYJ2t.js";import{S as pe,f as K,a as E,g as re,M as de,h as me,i as ie,j as _e,B as ce,k as ve,F as fe,c as ye,m as be,T as ge,n as ke,o as Te,p as we,q as Ce,r as xe}from"./ant-design-vue-CaKXcGcF.js";import{d as Y,a9 as Fe,r,aa as Me,R as p,W as m,a8 as a,S as U,a1 as Ue,Y as Ve,h as De,J as s,V as Ne,F as V,a as Ie,o as Se,m as Oe,c as e,U as he,Z as c}from"./@vue-fHF42jnH.js";import{c as Be}from"./common-DY7zZKah.js";import{u as Le,b as Re}from"./index-BiYaJyuZ.js";import"./@ctrl-DOFZgDuz.js";import"./@babel-BiFW4_mA.js";import"./lodash-es-PU94eZQX.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./dayjs-X-x4l2Bb.js";import"./throttle-debounce-CUWDS_la.js";import"./async-validator-DKvM95Vc.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";import"./pinia-DfzYFrYR.js";/* empty css                      */import"./axios-B4uVmeYG.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-D7-wZPRK.js";import"./vue-router-D1iaMedC.js";import"./uuid-CQkTLCs1.js";import"./vue-codemirror-CQ4kpRVU.js";import"./codemirror-XzAVIbiy.js";import"./@codemirror-ByA7djrN.js";import"./@lezer-Bb8aRhbX.js";import"./crelt-C8TCjufn.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";const je=Y({__name:"IconSelect",props:{modelValue:{},modelModifiers:{}},emits:Fe(["change"],["update:modelValue"]),setup(D,{emit:N}){const C=r(Object.entries(se).map(([v,f])=>({label:v,value:v,node:f}))),i=Me(D,"modelValue");return(v,f)=>{const b=pe,x=K;return p(),m(x,{value:i.value,"onUpdate:value":f[0]||(f[0]=_=>i.value=_),"show-search":"",allowClear:""},{default:a(()=>[(p(!0),U(V,null,Ue(C.value,_=>(p(),m(b,{key:_.value},{default:a(()=>[(p(),m(Ve(De(_.node)))),s(" "+Ne(_.label),1)]),_:2},1024))),128))]),_:1},8,["value"])}}}),$e={class:"menu"},Ee={class:"tools"},Ke=Y({__name:"MenuView",setup(D){const N=Le(),{startUp:C}=N,i=Ie({keyword:""}),v=r([]),f=r([{title:"名称",key:"label",dataIndex:"label"},{title:"类型",key:"menuType",dataIndex:"menuType"},{title:"地址",key:"address",dataIndex:"address"},{title:"排序号",key:"sortNum",dataIndex:"sortNum"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),b=r(!1),x=r(),_=()=>{var o;(o=x.value)==null||o.resetFields(),g()},I=r([]),q=()=>{Be.getDict(["menuType"]).then(o=>{const{code:t,data:u,msg:d}=o;t==200&&(I.value=u.menuType)})},g=()=>{b.value=!0,y.getList(i.keyword).then(o=>{const{code:t,data:u}=o;t==200&&(v.value=u),b.value=!1})};Se(()=>{g(),q()});const k=r(!1),n=r({label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""}),T=r("add"),A=Oe(()=>({add:"新增菜单",edit:"编辑菜单"})[T.value]),S=r(),J=()=>{n.value={label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""},T.value="add",k.value=!0,h()},P=async o=>await y.getDetail(o),W=async o=>{const{code:t,data:u}=await P(o.id);t==200&&(n.value=u,T.value="edit",k.value=!0,h())},Z=async o=>{const{code:t,msg:u}=await y.remove(o.id);t==200&&(E.success(u),g(),C())},z=()=>{var o;(o=S.value)==null||o.resetFields()},G=()=>{let o;T.value=="add"?o=y.add:o=y.update,o(n.value).then(t=>{const{code:u}=t;u==200&&(E.success(T.value=="add"?"新增成功":"编辑成功"),g(),C()),z(),k.value=!1})},O=r([]),h=()=>{y.dict().then(o=>{const{code:t,data:u}=o;t==200&&(O.value=u)})},H=o=>{let t=o||"";n.value.pid=t};return(o,t)=>{const u=me,d=ie,B=_e,w=ce,Q=ve,L=fe,R=re,X=ye,ee=be,j=ge,te=ke,F=Te,$=we,ae=Ce,oe=xe,ne=K,le=de;return p(),U("div",$e,[e(R,{class:"search-area"},{default:a(()=>[e(L,{ref_key:"searchFormRef",ref:x,model:i,onFinish:g},{default:a(()=>[e(Q,{gutter:24},{default:a(()=>[e(B,{span:4},{default:a(()=>[e(d,{label:"名称",name:"keyword"},{default:a(()=>[e(u,{value:i.keyword,"onUpdate:value":t[0]||(t[0]=l=>i.keyword=l)},null,8,["value"])]),_:1})]),_:1}),e(B,{span:4,style:{"text-align":"right"}},{default:a(()=>[e(w,{type:"primary","html-type":"submit"},{default:a(()=>[s("搜索")]),_:1}),e(w,{style:{margin:"0 8px"},onClick:_},{default:a(()=>[s(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(R,null,{default:a(()=>[he("div",Ee,[e(w,{type:"primary",onClick:J},{default:a(()=>[s("新增")]),_:1})]),e(te,{rowKey:l=>l.id,loading:b.value,columns:f.value,"data-source":v.value,pagination:!1,scroll:{y:500}},{bodyCell:a(({column:l,record:M})=>[l.key=="action"?(p(),U(V,{key:0},[e(w,{type:"link",onClick:ue=>W(M)},{default:a(()=>[s("编辑")]),_:2},1032,["onClick"]),e(X,{type:"vertical"}),e(ee,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:ue=>Z(M)},{default:a(()=>[e(w,{type:"link",danger:""},{default:a(()=>[s("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):c("",!0),l.key=="menuType"?(p(),U(V,{key:1},[M.menuType=="app"?(p(),m(j,{key:0,color:"#2db7f5"},{default:a(()=>[s("菜单")]),_:1})):c("",!0),M.menuType=="directory"?(p(),m(j,{key:1,color:"#87d068"},{default:a(()=>[s("目录")]),_:1})):c("",!0)],64)):c("",!0)]),_:1},8,["rowKey","loading","columns","data-source"])]),_:1}),e(le,{open:k.value,"onUpdate:open":t[9]||(t[9]=l=>k.value=l),onOk:G,title:A.value},{default:a(()=>[e(L,{model:n.value,"label-col":{span:8},ref_key:"modalFormRef",ref:S},{default:a(()=>[e(d,{label:"名称",name:"label"},{default:a(()=>[e(u,{value:n.value.label,"onUpdate:value":t[1]||(t[1]=l=>n.value.label=l)},null,8,["value"])]),_:1}),e(d,{label:"类型",name:"menuType"},{default:a(()=>[e($,{value:n.value.menuType,"onUpdate:value":t[2]||(t[2]=l=>n.value.menuType=l),"button-style":"solid"},{default:a(()=>[e(F,{value:"directory"},{default:a(()=>[s(" 目录 ")]),_:1}),e(F,{value:"app"},{default:a(()=>[s(" 菜单 ")]),_:1})]),_:1},8,["value"])]),_:1}),n.value.menuType=="app"?(p(),m(d,{key:0,label:"地址",name:"address"},{default:a(()=>[e(u,{value:n.value.address,"onUpdate:value":t[3]||(t[3]=l=>n.value.address=l)},null,8,["value"])]),_:1})):c("",!0),e(d,{label:"上级节点",name:"pid"},{default:a(()=>[e(ae,{value:n.value.pid,"onUpdate:value":t[4]||(t[4]=l=>n.value.pid=l),"tree-node-filter-prop":"label","show-search":"","allow-clear":"",treeData:O.value,"field-names":{children:"children",label:"label",value:"id"},onChange:H},null,8,["value","treeData"])]),_:1}),e(d,{label:"图标",name:"icon"},{default:a(()=>[e(je,{modelValue:n.value.icon,"onUpdate:modelValue":t[5]||(t[5]=l=>n.value.icon=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"排序号",name:"sortNum"},{default:a(()=>[e(oe,{value:n.value.sortNum,"onUpdate:value":t[6]||(t[6]=l=>n.value.sortNum=l)},null,8,["value"])]),_:1}),n.value.menuType=="app"?(p(),m(d,{key:1,label:"是否外链",name:"openType"},{default:a(()=>[e($,{value:n.value.openType,"onUpdate:value":t[7]||(t[7]=l=>n.value.openType=l),"button-style":"solid"},{default:a(()=>[e(F,{value:"_blank"},{default:a(()=>[s(" 是 ")]),_:1}),e(F,{value:"_self"},{default:a(()=>[s(" 否 ")]),_:1})]),_:1},8,["value"])]),_:1})):c("",!0),n.value.openType=="_self"&&n.value.menuType=="app"?(p(),m(d,{key:2,label:"页面类型",name:"type"},{default:a(()=>[e(ne,{value:n.value.type,"onUpdate:value":t[8]||(t[8]=l=>n.value.type=l),options:I.value,"show-search":"",allowClear:""},null,8,["value","options"])]),_:1})):c("",!0)]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),Tt=Re(Ke,[["__scopeId","data-v-37c07ab6"]]);export{Tt as default};
