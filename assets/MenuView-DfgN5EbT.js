import{a as r}from"./menu-ZhAeZutl.js";import{_ as Z}from"./IconSelect.vue_vue_type_script_setup_true_lang-QUJ6lZxg.js";import{d as ee,Q as te,r as d,b as ae,p as oe,D as m,I as T,g as e,F as t,R as O,M as s,S as ne,K as $,U as v,E as w,V as le}from"./index-Cq8ALRAC.js";import{C as ue,_ as se,a as de}from"./index-D9kNgwu2.js";import{M as pe}from"./index-xAwEVU3F.js";import{I as re,_ as me,B as ie,F as _e}from"./index-Dm_lgmPP.js";import{_ as ce}from"./index-BUyU8qsm.js";import{_ as fe}from"./index-Dnt3fzky.js";import{T as ve}from"./index-CHt5pdN2.js";import{_ as ye}from"./index-shavymTP.js";import{_ as be,a as ge}from"./index-DD_NySnd.js";import{_ as ke}from"./index-Cm1MbGpq.js";import{_ as Te}from"./index-BdqCsRYR.js";import"./index-CbBAjVnw.js";import"./ArrowRightOutlined-Cso8Hjmj.js";import"./SwapRightOutlined-rRDcYFwa.js";import"./FolderOutlined-iU2bDNCJ.js";import"./DeleteFilled-CFd4Tdg7.js";import"./DeleteOutlined-7WKDT7On.js";import"./DownloadOutlined-CrI07axq.js";import"./EditOutlined-CbwKwmri.js";import"./PlusOutlined-DGl1G9RV.js";import"./FileTwoTone-CIIr71xL.js";import"./PlusCircleOutlined-C4dWWtUB.js";import"./SwapOutlined-Byyryh5r.js";import"./SyncOutlined-C9ShVASm.js";import"./index-DqWLH9mZ.js";import"./ActionButton-j3S83rQ2.js";const we={class:"menu"},Ce={class:"tools"},xe=ee({__name:"MenuView",setup(Fe){const y=te({keyword:""}),C=d([]),R=d([{title:"名称",key:"label",dataIndex:"label"},{title:"类型",key:"menuType",dataIndex:"menuType"},{title:"地址",key:"address",dataIndex:"address"},{title:"排序号",key:"sortNum",dataIndex:"sortNum"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),k=d(!1),x=d(),E=()=>{var o;(o=x.value)==null||o.resetFields(),i()},i=()=>{k.value=!0,r.getList(y.keyword).then(o=>{const{code:a,data:u}=o;a==200&&(C.value=u),k.value=!1})};ae(()=>{i()});const _=d(!1),l=d({label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""}),c=d("add"),K=oe(()=>({add:"新增菜单",edit:"编辑菜单"})[c.value]),F=d(),L=()=>{l.value={label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""},c.value="add",_.value=!0,N()},h=async o=>await r.getDetail(o),j=async o=>{const{code:a,data:u}=await h(o.id);a==200&&(l.value=u,c.value="edit",_.value=!0,N())},S=async o=>{const{code:a,msg:u}=await r.remove(o.id);a==200&&(O.success(u),i())},A=()=>{var o;(o=F.value)==null||o.resetFields()},P=()=>{let o;c.value=="add"?o=r.add:o=r.update,o(l.value).then(a=>{const{code:u}=a;u==200&&(O.success(c.value=="add"?"新增成功":"编辑成功"),i()),A(),_.value=!1})},I=d([]),N=()=>{r.dict().then(o=>{const{code:a,data:u}=o;a==200&&(I.value=u)})},Q=o=>{let a=o||"";l.value.pid=a};return(o,a)=>{const u=re,p=me,M=se,f=ie,q=de,U=_e,V=ue,z=ce,G=fe,D=ve,H=ye,b=be,B=ge,J=ke,W=Te,X=pe;return m(),T("div",we,[e(V,{class:"search-area"},{default:t(()=>[e(U,{ref_key:"searchFormRef",ref:x,model:y,onFinish:i},{default:t(()=>[e(q,{gutter:24},{default:t(()=>[e(M,{span:4},{default:t(()=>[e(p,{label:"名称",name:"keyword"},{default:t(()=>[e(u,{value:y.keyword,"onUpdate:value":a[0]||(a[0]=n=>y.keyword=n)},null,8,["value"])]),_:1})]),_:1}),e(M,{span:4,style:{"text-align":"right"}},{default:t(()=>[e(f,{type:"primary","html-type":"submit"},{default:t(()=>[s("搜索")]),_:1}),e(f,{style:{margin:"0 8px"},onClick:E},{default:t(()=>[s(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(V,null,{default:t(()=>[ne("div",Ce,[e(f,{type:"primary",onClick:L},{default:t(()=>[s("新增")]),_:1})]),e(H,{rowKey:n=>n.id,loading:k.value,columns:R.value,"data-source":C.value,pagination:!1,scroll:{y:440}},{bodyCell:t(({column:n,record:g})=>[n.key=="action"?(m(),T($,{key:0},[e(f,{type:"link",onClick:Y=>j(g)},{default:t(()=>[s("编辑")]),_:2},1032,["onClick"]),e(z,{type:"vertical"}),e(G,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:Y=>S(g)},{default:t(()=>[e(f,{type:"link",danger:""},{default:t(()=>[s("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):v("",!0),n.key=="menuType"?(m(),T($,{key:1},[g.menuType=="app"?(m(),w(D,{key:0,color:"#2db7f5"},{default:t(()=>[s("菜单")]),_:1})):v("",!0),g.menuType=="directory"?(m(),w(D,{key:1,color:"#87d068"},{default:t(()=>[s("目录")]),_:1})):v("",!0)],64)):v("",!0)]),_:1},8,["rowKey","loading","columns","data-source"])]),_:1}),e(X,{open:_.value,"onUpdate:open":a[8]||(a[8]=n=>_.value=n),onOk:P,title:K.value},{default:t(()=>[e(U,{model:l.value,"label-col":{span:8},ref_key:"modalFormRef",ref:F},{default:t(()=>[e(p,{label:"名称",name:"label"},{default:t(()=>[e(u,{value:l.value.label,"onUpdate:value":a[1]||(a[1]=n=>l.value.label=n)},null,8,["value"])]),_:1}),e(p,{label:"类型",name:"menuType"},{default:t(()=>[e(B,{value:l.value.menuType,"onUpdate:value":a[2]||(a[2]=n=>l.value.menuType=n),"button-style":"solid"},{default:t(()=>[e(b,{value:"directory"},{default:t(()=>[s(" 目录 ")]),_:1}),e(b,{value:"app"},{default:t(()=>[s(" 菜单 ")]),_:1})]),_:1},8,["value"])]),_:1}),l.value.menuType=="app"?(m(),w(p,{key:0,label:"地址",name:"address"},{default:t(()=>[e(u,{value:l.value.address,"onUpdate:value":a[3]||(a[3]=n=>l.value.address=n)},null,8,["value"])]),_:1})):v("",!0),e(p,{label:"上级节点",name:"pid"},{default:t(()=>[e(J,{value:l.value.pid,"onUpdate:value":a[4]||(a[4]=n=>l.value.pid=n),"tree-node-filter-prop":"label","show-search":"","allow-clear":"",treeData:I.value,"field-names":{children:"children",label:"label",value:"id"},onChange:Q},null,8,["value","treeData"])]),_:1}),e(p,{label:"图标",name:"icon"},{default:t(()=>[e(Z,{modelValue:l.value.icon,"onUpdate:modelValue":a[5]||(a[5]=n=>l.value.icon=n)},null,8,["modelValue"])]),_:1}),e(p,{label:"排序号",name:"sortNum"},{default:t(()=>[e(W,{value:l.value.sortNum,"onUpdate:value":a[6]||(a[6]=n=>l.value.sortNum=n)},null,8,["value"])]),_:1}),e(p,{label:"是否外链",name:"openType"},{default:t(()=>[e(B,{value:l.value.openType,"onUpdate:value":a[7]||(a[7]=n=>l.value.openType=n),"button-style":"solid"},{default:t(()=>[e(b,{value:"_blank"},{default:t(()=>[s(" 是 ")]),_:1}),e(b,{value:"_self"},{default:t(()=>[s(" 否 ")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),et=le(xe,[["__scopeId","data-v-df62ca5b"]]);export{et as default};
