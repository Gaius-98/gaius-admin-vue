import{d as V,L as U,r as c,R as D,S as R,U as B,V as I,u as f,J as Q,W as ie,X as oe,Y as ne,Z as q,_ as X,$ as O,a as se,m as A,w as re,o as N,a0 as Y,G as J,F as ee,a1 as te,k as ve}from"./@vue-aP0pPEyH.js";var de=Object.defineProperty,ce=(a,t,s)=>t in a?de(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,he=(a,t,s)=>(ce(a,t+"",s),s);const pe={class:"gu-mask"},fe={class:"gu-header"},me={class:"title"},ge={class:"content"},ye={key:0,class:"footer"},we=V({name:"GuDialogTemplate"});({...we});const be=(a,t)=>{const s=a.__vccOpts||a;for(const[i,d]of t)s[i]=d;return s};var j,ke=new Uint8Array(16);function xe(){if(!j&&(j=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!j))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return j(ke)}const Fe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ce(a){return typeof a=="string"&&Fe.test(a)}var C=[];for(var Z=0;Z<256;++Z)C.push((Z+256).toString(16).substr(1));function Ee(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=(C[a[t+0]]+C[a[t+1]]+C[a[t+2]]+C[a[t+3]]+"-"+C[a[t+4]]+C[a[t+5]]+"-"+C[a[t+6]]+C[a[t+7]]+"-"+C[a[t+8]]+C[a[t+9]]+"-"+C[a[t+10]]+C[a[t+11]]+C[a[t+12]]+C[a[t+13]]+C[a[t+14]]+C[a[t+15]]).toLowerCase();if(!Ce(s))throw TypeError("Stringified UUID is invalid");return s}function ae(a,t,s){a=a||{};var i=a.random||(a.rng||xe)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Ee(i)}const Le={class:"drag-resize-container"},$e={key:0,class:"tip"},ze=["onMousedown"],_e=V({name:"GuDragResize"}),De=V({..._e,props:{minh:{default:10},minw:{default:10},disabled:{type:[Boolean,String],default:!1},width:{default:100},height:{default:100},top:{default:0},left:{default:0},nodeKey:{default:ae()}},emits:["onDragResize","onDrag","onResize"],setup(a,{emit:t}){const s=a,{nodeKey:i,minh:d,minw:z,disabled:k,height:m,width:w,left:M,top:H}=U(s),o=c(),g=c(null),b=se({left:0,top:0,width:0,height:0}),E=A(()=>{const{left:l,top:u,width:v,height:e}=b;return g.value=="drag"?`[${l},${u}]`:`${e}*${v}`}),L=l=>{if(P(k.value,"drag"))console.warn("拖拽功能已被禁用");else{const u=o.value.parentElement;let v=u.style.position;u.style.position="relative";let{left:e,top:n}=_(),r=l.clientX-parseFloat(e.toString())||o.value.offsetLeft,h=l.clientY-parseFloat(n.toString())||o.value.offsetTop;l.preventDefault(),document.onmousemove=function(y){g.value="drag";let p=y.clientX-r,F=y.clientY-h;p<0?p=0:p>u.clientWidth-o.value.clientWidth&&(p=u.clientWidth-o.value.clientWidth),F<0?F=0:F>u.clientHeight-o.value.clientHeight&&(F=u.clientHeight-o.value.clientHeight),b.left=p,b.top=F,o.value.style.transform=`translate3d(${p}px, ${F}px,0)`,t("onDrag",{left:p,top:F,height:o.value.style.height,width:o.value.style.width,nodeKey:i.value})},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,u.style.position=v,g.value=null;let{left:y,top:p}=_();t("onDragResize",{left:y,top:p,height:o.value.style.height,width:o.value.style.width,nodeKey:i.value})}}},x=()=>{if(P(k.value,"resize"))console.warn("设置大小功能已被禁用");else{const l=o.value.parentElement,u=window.event;u==null||u.stopPropagation(),u==null||u.preventDefault();const v=o.value.clientHeight,e=o.value.clientWidth,n=u.clientX,r=u.clientY,h=p=>{const F=p.clientX,T=p.clientY-r,W=F-n;g.value="resize";const $=v+T>d.value?v+T>l.clientHeight?l.clientHeight:v+T:d.value,G=e+W>z.value?e+W>l.clientWidth?l.clientWidth:e+W:z.value;b.width=G,b.height=$,o.value.style.width=G+"px",o.value.style.height=$+"px";let{left:K,top:ue}=_();t("onResize",{left:K,top:ue,height:o.value.style.height,width:o.value.style.width,nodeKey:i.value})},y=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",y);let{left:p,top:F}=_();g.value=null,t("onDragResize",{left:p,top:F,height:o.value.style.height,width:o.value.style.width,nodeKey:i.value})};document.addEventListener("mousemove",h),document.addEventListener("mouseup",y)}},_=()=>{let l=/(\d+px, \d+px)/,[u,v]=o.value.style.transform.match(l)[0].split(",");return{left:u,top:v}},P=(l,u)=>typeof l=="boolean"?l:u==l,S=()=>{o.value.parentElement.style.position="relative",o.value.style.height=m.value+"px",o.value.style.width=w.value+"px",o.value.style.transform=`translate3d(${M.value}px, ${H.value}px,0)`};return re(()=>[M.value,H.value,w.value,m.value],()=>{S()}),N(()=>{S()}),(l,u)=>(D(),R("div",{ref_key:"dragResize",ref:o,class:X(["drag-resize",P(f(k),"drag")?"disabled":""]),onMousedown:L},[B("div",Le,[g.value?(D(),R("div",$e,I(f(E)),1)):q("",!0),Y(l.$slots,"default",{},void 0)]),P(f(k),"resize")?q("",!0):(D(),R("div",{key:0,ref:"resizeNode",class:X([P(f(k),"resize")?"disabled":"","resize-node"]),onMousedown:J(x,["stop"])},null,42,ze))],34))}}),Ge=be(De,[["__scopeId","data-v-1b8dc51e"]]),le=(a,t)=>{let s=null;return(...i)=>{s||(a.apply(void 0,i),s=window.setTimeout(()=>{s=null},t))}},Re=["onMousedown"],He={class:"container"},Se=["onMousedown"];ae();const Be=["idx","onClick"],Me=V({name:"GuDynamicHeightList"});({...Me});const Pe=["onClick"],Te=V({name:"GuVirtualList"});({...Te});class Ve{constructor(){he(this,"_subscribers"),this._subscribers=new Map}onSubscribe(t,s){let i=this._subscribers.get(t)||[];i.push(s),this._subscribers.set(t,i)}onPublish(t,...s){let i=this._subscribers.get(t);i&&i.map(d=>d(...s))}once(t,s){let i=(...d)=>{s(...d),this.unsubscribe(t,i)};this.onPublish(t,i)}unsubscribe(t,s){let i=this._subscribers.get(t)||[];this._subscribers.set(t,i.filter(d=>d!==s))}}export{Ge as W,Ve as b};
