import{a as i}from"./menu-DSCcu3Bx.js";import{_ as ne}from"./IconSelect.vue_vue_type_script_setup_true_lang-7lFI6Ni3.js";import{c as le}from"./common-Brfrth6Y.js";import{d as ue,H as se,$ as pe,r,b as re,t as de,J as d,L as w,g as e,M as a,a0 as L,a1 as me,O as s,a2 as ie,R,a3 as m,U as y,a4 as _e,Z as ce,a5 as fe,a6 as ve}from"./index-CmoA2GoM.js";import{C as ye,_ as be,a as ge}from"./index-BYYPv9R6.js";import{I as ke}from"./index-BNogs11-.js";import{_ as Te}from"./index-THRGanZW.js";import{T as we}from"./index-C77IJ5XB.js";import{_ as Ce}from"./index-woSD_LuY.js";import{_ as xe,S as Ue}from"./index-DjDljBPH.js";import{_ as Fe}from"./index-BaP_Y1ip.js";import{_ as Ne}from"./index-BLePi1r2.js";import{_ as De}from"./index-C6rf5fLW.js";import{_ as Ie}from"./index-nyZGTlKN.js";import"./index-Cz8EsjKQ.js";import"./ArrowRightOutlined-CN_cmre0.js";import"./SwapRightOutlined-BHEHd6Zu.js";import"./FolderOutlined-DEA9pzxq.js";import"./DeleteFilled-BoK2EdMm.js";import"./shallowequal-CXRC2vtV.js";import"./index-C_nXjZ5F.js";import"./EditOutlined-eAw7p3z4.js";import"./EllipsisOutlined-DtdE-UCA.js";import"./PlusCircleOutlined-Cw28LGff.js";import"./SyncOutlined-CCr3qcmk.js";import"./index-BwFnDrPT.js";import"./Dropdown-Fepi5Sce.js";import"./index-DOeiordB.js";import"./eagerComputed-BQoZFmQi.js";import"./index-ne0OhhUv.js";import"./useBreakpoint-C5eZpta0.js";import"./index-B9RKzsGX.js";import"./dropdown-DEmaYe-4.js";const Me={class:"menu"},Ve={class:"tools"},Oe=ue({__name:"MenuView",setup(Be){const $=se(),{startUp:C}=$,b=pe({keyword:""}),x=r([]),h=r([{title:"名称",key:"label",dataIndex:"label"},{title:"类型",key:"menuType",dataIndex:"menuType"},{title:"地址",key:"address",dataIndex:"address"},{title:"排序号",key:"sortNum",dataIndex:"sortNum"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),T=r(!1),U=r(),j=()=>{var o;(o=U.value)==null||o.resetFields(),_()},F=r([]),E=()=>{le.getDict(["menuType"]).then(o=>{const{code:t,data:u,msg:p}=o;t==200&&(F.value=u.menuType)})},_=()=>{T.value=!0,i.getList(b.keyword).then(o=>{const{code:t,data:u}=o;t==200&&(x.value=u),T.value=!1})};re(()=>{_(),E()});const c=r(!1),n=r({label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""}),f=r("add"),K=de(()=>({add:"新增菜单",edit:"编辑菜单"})[f.value]),N=r(),A=()=>{n.value={label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""},f.value="add",c.value=!0,I()},H=async o=>await i.getDetail(o),J=async o=>{const{code:t,data:u}=await H(o.id);t==200&&(n.value=u,f.value="edit",c.value=!0,I())},P=async o=>{const{code:t,msg:u}=await i.remove(o.id);t==200&&(L.success(u),_(),C())},Z=()=>{var o;(o=N.value)==null||o.resetFields()},q=()=>{let o;f.value=="add"?o=i.add:o=i.update,o(n.value).then(t=>{const{code:u}=t;u==200&&(L.success(f.value=="add"?"新增成功":"编辑成功"),_(),C()),Z(),c.value=!1})},D=r([]),I=()=>{i.dict().then(o=>{const{code:t,data:u}=o;t==200&&(D.value=u)})},z=o=>{let t=o||"";n.value.pid=t};return(o,t)=>{const u=ke,p=_e,M=be,v=ce,G=ge,V=fe,O=ye,Q=Fe,W=Te,B=we,X=Ce,g=Ne,S=xe,Y=De,ee=Ie,te=Ue,ae=me;return d(),w("div",Me,[e(O,{class:"search-area"},{default:a(()=>[e(V,{ref_key:"searchFormRef",ref:U,model:b,onFinish:_},{default:a(()=>[e(G,{gutter:24},{default:a(()=>[e(M,{span:4},{default:a(()=>[e(p,{label:"名称",name:"keyword"},{default:a(()=>[e(u,{value:b.keyword,"onUpdate:value":t[0]||(t[0]=l=>b.keyword=l)},null,8,["value"])]),_:1})]),_:1}),e(M,{span:4,style:{"text-align":"right"}},{default:a(()=>[e(v,{type:"primary","html-type":"submit"},{default:a(()=>[s("搜索")]),_:1}),e(v,{style:{margin:"0 8px"},onClick:j},{default:a(()=>[s(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(O,null,{default:a(()=>[ie("div",Ve,[e(v,{type:"primary",onClick:A},{default:a(()=>[s("新增")]),_:1})]),e(X,{rowKey:l=>l.id,loading:T.value,columns:h.value,"data-source":x.value,pagination:!1,scroll:{y:500}},{bodyCell:a(({column:l,record:k})=>[l.key=="action"?(d(),w(R,{key:0},[e(v,{type:"link",onClick:oe=>J(k)},{default:a(()=>[s("编辑")]),_:2},1032,["onClick"]),e(Q,{type:"vertical"}),e(W,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:oe=>P(k)},{default:a(()=>[e(v,{type:"link",danger:""},{default:a(()=>[s("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):m("",!0),l.key=="menuType"?(d(),w(R,{key:1},[k.menuType=="app"?(d(),y(B,{key:0,color:"#2db7f5"},{default:a(()=>[s("菜单")]),_:1})):m("",!0),k.menuType=="directory"?(d(),y(B,{key:1,color:"#87d068"},{default:a(()=>[s("目录")]),_:1})):m("",!0)],64)):m("",!0)]),_:1},8,["rowKey","loading","columns","data-source"])]),_:1}),e(ae,{open:c.value,"onUpdate:open":t[9]||(t[9]=l=>c.value=l),onOk:q,title:K.value},{default:a(()=>[e(V,{model:n.value,"label-col":{span:8},ref_key:"modalFormRef",ref:N},{default:a(()=>[e(p,{label:"名称",name:"label"},{default:a(()=>[e(u,{value:n.value.label,"onUpdate:value":t[1]||(t[1]=l=>n.value.label=l)},null,8,["value"])]),_:1}),e(p,{label:"类型",name:"menuType"},{default:a(()=>[e(S,{value:n.value.menuType,"onUpdate:value":t[2]||(t[2]=l=>n.value.menuType=l),"button-style":"solid"},{default:a(()=>[e(g,{value:"directory"},{default:a(()=>[s(" 目录 ")]),_:1}),e(g,{value:"app"},{default:a(()=>[s(" 菜单 ")]),_:1})]),_:1},8,["value"])]),_:1}),n.value.menuType=="app"?(d(),y(p,{key:0,label:"地址",name:"address"},{default:a(()=>[e(u,{value:n.value.address,"onUpdate:value":t[3]||(t[3]=l=>n.value.address=l)},null,8,["value"])]),_:1})):m("",!0),e(p,{label:"上级节点",name:"pid"},{default:a(()=>[e(Y,{value:n.value.pid,"onUpdate:value":t[4]||(t[4]=l=>n.value.pid=l),"tree-node-filter-prop":"label","show-search":"","allow-clear":"",treeData:D.value,"field-names":{children:"children",label:"label",value:"id"},onChange:z},null,8,["value","treeData"])]),_:1}),e(p,{label:"图标",name:"icon"},{default:a(()=>[e(ne,{modelValue:n.value.icon,"onUpdate:modelValue":t[5]||(t[5]=l=>n.value.icon=l)},null,8,["modelValue"])]),_:1}),e(p,{label:"排序号",name:"sortNum"},{default:a(()=>[e(ee,{value:n.value.sortNum,"onUpdate:value":t[6]||(t[6]=l=>n.value.sortNum=l)},null,8,["value"])]),_:1}),n.value.menuType=="app"?(d(),y(p,{key:1,label:"是否外链",name:"openType"},{default:a(()=>[e(S,{value:n.value.openType,"onUpdate:value":t[7]||(t[7]=l=>n.value.openType=l),"button-style":"solid"},{default:a(()=>[e(g,{value:"_blank"},{default:a(()=>[s(" 是 ")]),_:1}),e(g,{value:"_self"},{default:a(()=>[s(" 否 ")]),_:1})]),_:1},8,["value"])]),_:1})):m("",!0),n.value.openType=="_self"&&n.value.menuType=="app"?(d(),y(p,{key:2,label:"页面类型",name:"type"},{default:a(()=>[e(te,{value:n.value.type,"onUpdate:value":t[8]||(t[8]=l=>n.value.type=l),options:F.value,"show-search":"",allowClear:""},null,8,["value","options"])]),_:1})):m("",!0)]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),_t=ve(Oe,[["__scopeId","data-v-37c07ab6"]]);export{_t as default};
