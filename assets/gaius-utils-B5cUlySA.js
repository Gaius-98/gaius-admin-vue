import{d as N,R as Y,r as $,S as _,L as J,w as Q,o as A,U as C,V as k,W as ee,X as te,F as ae,Y as oe,Z as H,u as se}from"./@vue-Ckf1Z535.js";var ie=Object.defineProperty,ue=(e,t,a)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,re=(e,t,a)=>ue(e,t+"",a),L,le=new Uint8Array(16);function ne(){if(!L&&(L=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!L))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return L(le)}const de=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function he(e){return typeof e=="string"&&de.test(e)}var u=[];for(var z=0;z<256;++z)u.push((z+256).toString(16).substr(1));function ve(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!he(a))throw TypeError("Stringified UUID is invalid");return a}function pe(e,t,a){e=e||{};var s=e.random||(e.rng||ne)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,ve(s)}const fe=(e,t)=>{const a=e.__vccOpts||e;for(const[s,l]of t)a[s]=l;return a},ce=(e,t)=>{let a=null;return(...s)=>{a||(e.apply(void 0,s),a=window.setTimeout(()=>{a=null},t))}},me={class:"container"},ge=["onMousedown"],be=N({__name:"GuDragResizePlus",props:Y({minh:{default:10},minw:{default:10},disabled:{type:Boolean,default:!1},width:{default:100},height:{default:100},top:{default:0},left:{default:0},nodeKey:{default:pe()},active:{type:Boolean,default:!0},wait:{default:10},scaleX:{default:1},scaleY:{default:1}},{left:{required:!0},leftModifiers:{},top:{required:!0},topModifiers:{},width:{required:!0},widthModifiers:{},height:{required:!0},heightModifiers:{}}),emits:Y(["update"],["update:left","update:top","update:width","update:height"]),setup(e,{emit:t}){const a=$(null),s=_(e,"left"),l=_(e,"top"),c=_(e,"width"),m=_(e,"height"),D=e,W=$([{name:"top-point",direction:"t"},{name:"left-point",direction:"l"},{name:"bottom-point",direction:"b"},{name:"right-point",direction:"r"}]),{nodeKey:G,minh:V,minw:B,disabled:M,wait:K,scaleX:F,scaleY:I}=J(D),X=(o,d)=>{if(M.value)return;const{direction:i}=d,r=o.x,n=o.y,{top:v,left:f,width:p,height:g}=P(a.value),y=E=>{const h={width:p,top:v,left:f,height:g},b=(E.y-n)/I.value,w=(E.x-r)/F.value;switch(i){case"t":h.height=g-b,h.top=v+b;break;case"l":h.width=p-w,h.left=f+w;break;case"b":h.height=g+b;break;case"r":h.width=p+w;break}q(h)},x=()=>{U(),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",x)},j=o=>{if(M.value)return;const d=o.x,i=o.y,r=a.value.parentElement.offsetWidth,n=a.value.parentElement.offsetHeight,{top:v,left:f,width:p,height:g}=P(a.value),y=E=>{const h={width:p,top:v,left:f,height:g},b=(E.y-i)/I.value,w=(E.x-d)/F.value;f+w+p>r?h.left=r-p:h.left=f+w,v+b+g>n?h.top=n-g:h.top=v+b,q(h)},x=()=>{U(),document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",x)},P=o=>{let d=/(\d+px, \d+px)/;const i=o.style.transform;let r="0",n="0";return i&&([r,n]=i.match(d)[0].split(",")),{left:parseFloat(r),top:parseFloat(n),width:parseFloat(o.style.width),height:parseFloat(o.style.height)}},O=t,S=$(!0),R=o=>{const{top:d,left:i,width:r,height:n}=Z(o);if(S.value=!1,l.value=d,s.value=i,c.value=r,m.value=n,a.value){const v=a.value.style.transform;a.value.style.width=`${c.value}px`,a.value.style.height=`${m.value}px`,a.value.style.transform=`${T(v)} translate3d(${s.value}px, ${l.value}px,0)`}},q=ce(R,K.value),T=o=>o?o.replace(/^translate3d\([^)]+\)$/,""):"",Z=o=>{const{height:d,width:i,left:r,top:n}=o,v=a.value.parentElement;if(!v||S.value)return{height:d,width:i,left:r,top:n};const f=v.offsetHeight,p=v.offsetWidth;return d<V.value?o.height=V.value:d>f&&(o.height=f),i<B.value?o.width=B.value:i>p&&(o.width=p),r<0?o.left=0:r+i>p&&(o.width=p-r),n<0?o.top=0:n+d>f&&(o.height=f-n),o},U=()=>{O("update",{top:l.value,left:s.value,width:c.value,height:m.value,nodeKey:G.value})};return Q(()=>[s.value,c.value,m.value,l.value],()=>{R({width:c.value,height:m.value,left:s.value,top:l.value})}),A(()=>{c.value,m.value,R({width:c.value,height:m.value,left:s.value,top:l.value})}),(o,d)=>(C(),k("div",{ref_key:"guDragResizePlusRef",ref:a,class:H(["gu-drag-resize-plus",{disabled:se(M),active:o.active}]),onMousedown:j},[ee("div",me,[te(o.$slots,"default",{},void 0)]),(C(!0),k(ae,null,oe(W.value,i=>(C(),k("div",{key:i.name,class:H(["resize-point",i.name]),onMousedown:r=>X(r,i)},null,42,ge))),128))],34))}}),ye=fe(be,[["__scopeId","data-v-d2e9c3cb"]]);class xe{constructor(){re(this,"_subscribers"),this._subscribers=new Map}onSubscribe(t,a){let s=this._subscribers.get(t)||[];s.push(a),this._subscribers.set(t,s)}onPublish(t,...a){let s=this._subscribers.get(t);s&&s.map(l=>l(...a))}once(t,a){let s=(...l)=>{a(...l),this.unsubscribe(t,s)};this.onPublish(t,s)}unsubscribe(t,a){let s=this._subscribers.get(t)||[];this._subscribers.set(t,s.filter(l=>l!==a))}}export{xe as c,ye as o};
