import{a as g}from"./resource-B9bPj2Hb.js";import{g as E,m as J,r,n as M,U as O,o as d,q as C,l as e,w as t,V as T,J as p,P as X,i as b,Y as y,X as Y,R as A,j as G,au as H,e as h,$ as K,a0 as Q,a1 as W,a2 as Z,a3 as ee,a4 as te,al as ae,ae as oe,a6 as ne,a7 as se}from"./.pnpm-BJAmQtRs.js";import{_ as ce}from"./index-0f-9Y9PV.js";const ie={class:"resource"},le={class:"tools"},_e={key:1},re=E({__name:"ResourceView",setup(pe){const n=J({keyword:"",pageNumber:1,pageSize:10}),k=r([]),I=r([{title:"文件名称",key:"originalname",dataIndex:"originalname",width:"300px"},{title:"缩略图",key:"img",dataIndex:"img",width:"300px"},{title:"文件大小",key:"size",dataIndex:"size",width:"120px"},{title:"地址",key:"path",dataIndex:"path"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),m=r(!1),v=r(),N=()=>{var o;(o=v.value)==null||o.resetFields(),c()},x=r(0),F=()=>{n.pageNumber=1,n.pageSize=10,c()},R=o=>{const{current:a,pageSize:s}=o;n.pageNumber=a,n.pageSize=s,c()},V=o=>{const a=new FormData;a.append("file",o.file,encodeURIComponent(o.file.name)),g.add(a).then(s=>{const{code:l,data:f,msg:i}=s;l==200&&h.success(i),c()})},c=()=>{m.value=!0,g.getList(n).then(o=>{const{code:a,data:s}=o;a==200&&(k.value=s.data,x.value=s.total),m.value=!1})};M(()=>{c()});const z=async o=>{const{code:a,msg:s,data:l}=await g.remove(o.id);a==200&&(h.success(l),c())},D=()=>{h.success("复制成功")};return(o,a)=>{const s=K,l=Q,f=W,i=Z,S=ee,B=te,w=T,U=ae,$=oe,L=ne,P=se,q=O("copy");return d(),C("div",ie,[e(w,{class:"search-area"},{default:t(()=>[e(B,{ref_key:"searchFormRef",ref:v,model:n,onFinish:F},{default:t(()=>[e(S,{gutter:24},{default:t(()=>[e(f,{span:4},{default:t(()=>[e(l,{label:"资源名称",name:"keyword"},{default:t(()=>[e(s,{value:n.keyword,"onUpdate:value":a[0]||(a[0]=_=>n.keyword=_)},null,8,["value"])]),_:1})]),_:1}),e(f,{span:4,style:{"text-align":"right"}},{default:t(()=>[e(i,{type:"primary","html-type":"submit"},{default:t(()=>[p("搜索")]),_:1}),e(i,{style:{margin:"0 8px"},onClick:N},{default:t(()=>[p(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(w,null,{default:t(()=>[X("div",le,[e(U,{name:"file",accept:"image/*",customRequest:V,maxCount:"1",showUploadList:!1},{default:t(()=>[e(i,{type:"primary"},{default:t(()=>[p(" 上传")]),_:1})]),_:1})]),e(P,{loading:m.value,columns:I.value,"data-source":k.value,scroll:{y:510},onChange:R,pagination:{current:n.pageNumber,total:x.value}},{bodyCell:t(({column:_,record:u})=>[_.key=="img"?(d(),b($,{key:0,src:u.path,height:"130px"},null,8,["src"])):y("",!0),_.key=="path"?Y((d(),C("span",_e,[p(A(u.path)+" ",1),e(G(H),{style:{cursor:"pointer"},onClick:a[1]||(a[1]=j=>D())})])),[[q,u.path]]):y("",!0),_.key=="action"?(d(),b(L,{key:2,title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:j=>z(u)},{default:t(()=>[e(i,{type:"link",danger:""},{default:t(()=>[p("删除")]),_:1})]),_:2},1032,["onConfirm"])):y("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})])}}}),fe=ce(re,[["__scopeId","data-v-cb8abf49"]]);export{fe as default};
