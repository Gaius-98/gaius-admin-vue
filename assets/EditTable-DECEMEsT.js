import{a2 as r,aK as T,d as U,A,B as N,at as O,p as i,D as d,I as p,J as m,W as v,E as R,g as _,K as f,Q as D,Y as F,F as K}from"./index-DIkwqaEE.js";import{P as h,M as P}from"./PlusCircleOutlined-CIXKynwQ.js";import{I as S,B as $}from"./index-BkIIxGqr.js";import{S as j}from"./index-B9n-8M05.js";import{_ as w}from"./index-Dbf5_CLT.js";const H={getList:e=>r({method:"get",url:"request/list",params:e}),getDetail:e=>r({method:"get",url:"request/detail",params:{id:e}}),remove:e=>r({method:"get",url:"request/remove",params:{id:e}}),add:e=>r({method:"post",url:"request/add",data:e}),update:e=>r({method:"post",url:"request/update",data:e}),run:(e,o)=>T({method:"get",url:"/prod/request/proxy",params:{id:e,paramsData:o}})},z={key:2,style:{display:"flex"}},J=U({__name:"EditTable",props:A({columns:{},action:{type:Boolean,default:!0},height:{default:150}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=N(e,"modelValue");let C=e;const{columns:s,action:g}=O(C),y=i(()=>x("input")),k=i(()=>x("select")),b=i(()=>g.value?[...s.value,{title:"操作",dataIndex:"_action_"}]:s.value),B=a=>{var t;return((t=s.value.find(c=>c.dataIndex==a))==null?void 0:t.options)||[]},x=a=>s.value.filter(t=>t.type==a).map(t=>t.dataIndex),I=()=>{let a={};s.value.map(t=>{Reflect.set(a,t.dataIndex,"")}),o.value.push(a)},q=a=>{o.value.splice(a,1)};return(a,t)=>{const c=S,V=j,E=$,M=w;return d(),p(M,{columns:b.value,"data-source":o.value,pagination:!1,size:"small",scroll:{y:a.height}},{bodyCell:m(({column:n,index:l})=>[y.value.includes(n.dataIndex)?(d(),p(c,{key:0,value:o.value[l][n.dataIndex],"onUpdate:value":u=>o.value[l][n.dataIndex]=u},null,8,["value","onUpdate:value"])):v("",!0),k.value.includes(n.dataIndex)?(d(),p(V,{key:1,value:o.value[l][n.dataIndex],"onUpdate:value":u=>o.value[l][n.dataIndex]=u,options:B(n.dataIndex)},null,8,["value","onUpdate:value","options"])):v("",!0),n.dataIndex=="_action_"?(d(),R("div",z,[_(f(h),{class:"icon",onClick:t[0]||(t[0]=u=>I())}),_(f(P),{class:"icon",onClick:u=>q(l)},null,8,["onClick"])])):v("",!0)]),emptyText:m(()=>[_(E,{type:"text",onClick:I,icon:F(f(h))},{default:m(()=>[D(" 新增数据")]),_:1},8,["icon"])]),_:1},8,["columns","data-source","scroll"])}}}),X=K(J,[["__scopeId","data-v-c3ff7b42"]]);export{X as E,H as h};
