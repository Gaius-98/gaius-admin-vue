import{r as Y,_ as B}from"./index-aNyjOfmM.js";import{g as D,m as P,r,n as R,o as u,q as h,l as a,w as t,U,J as c,F as V,h as g,Y as S,$ as q,a0 as O,at as $,a1 as E,a2 as J,a3 as j,a5 as A}from"./.pnpm-DNwF09EQ.js";const G={getList:f=>Y({method:"get",url:"operationlog/list",params:f})},H={class:"optLog"},K=D({__name:"OptLog",setup(f){const e=P({keyword:"",startTime:"",endTime:"",pageNumber:1,pageSize:20}),i=r(""),y=r([]),b=r([{title:"操作用户",key:"username",dataIndex:"username"},{title:"ip地址",key:"ip",dataIndex:"ip"},{title:"地址",key:"location",dataIndex:"location"},{title:"操作模块",key:"optModule",dataIndex:"optModule"},{title:"操作类型",key:"optType",dataIndex:"optType"},{title:"操作结果",key:"resStatus",dataIndex:"resStatus"},{title:"操作耗时",key:"resTime",dataIndex:"resTime"},{title:"操作时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),p=r(!1),k=r(),C=()=>{var n;(n=k.value)==null||n.resetFields(),d()},v=r(0),I=()=>{e.pageNumber=1,e.pageSize=20,d()},F=()=>{i.value?(e.startTime=i.value[0],e.endTime=i.value[1]):(e.startTime="",e.endTime="")},w=n=>{const{current:o,pageSize:l}=n;e.pageNumber=o,e.pageSize=l,d()},d=()=>{p.value=!0,G.getList(e).then(n=>{const{code:o,data:l}=n;o==200&&(y.value=l.data,v.value=l.total),p.value=!1})};return R(()=>{d()}),(n,o)=>{const l=q,_=O,z=$,m=E,L=J,x=U,T=j,N=A;return u(),h("div",H,[a(x,{class:"search-area"},{default:t(()=>[a(L,{ref_key:"searchFormRef",ref:k,model:e,layout:"inline",onFinish:I},{default:t(()=>[a(_,{label:"用户名",name:"keyword"},{default:t(()=>[a(l,{value:e.keyword,"onUpdate:value":o[0]||(o[0]=s=>e.keyword=s)},null,8,["value"])]),_:1}),a(_,{label:"操作日期"},{default:t(()=>[a(z,{value:i.value,"onUpdate:value":o[1]||(o[1]=s=>i.value=s),valueFormat:"YYYY-MM-DD",onChange:o[2]||(o[2]=s=>F())},null,8,["value"])]),_:1}),a(_,null,{default:t(()=>[a(m,{type:"primary","html-type":"submit"},{default:t(()=>[c("搜索")]),_:1}),a(m,{style:{margin:"0 8px"},onClick:C},{default:t(()=>[c(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(x,null,{default:t(()=>[a(N,{loading:p.value,columns:b.value,"data-source":y.value,scroll:{y:600},onChange:w,pagination:{current:e.pageNumber,total:v.value,showSizeChanger:!0,pageSize:e.pageSize}},{bodyCell:t(({column:s,record:M})=>[s.key=="resStatus"?(u(),h(V,{key:0},[M.resStatus=="1"?(u(),g(T,{key:0,color:"#87d068"},{default:t(()=>[c("成功")]),_:1})):(u(),g(T,{key:1,color:"#f50"},{default:t(()=>[c("失败")]),_:1}))],64)):S("",!0),s.key=="action"?(u(),g(m,{key:1,type:"link"},{default:t(()=>[c("查看")]),_:1})):S("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})])}}}),X=B(K,[["__scopeId","data-v-3c78fcc7"]]);export{X as default};
