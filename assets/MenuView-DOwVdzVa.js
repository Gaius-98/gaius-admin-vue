import{a as _}from"./menu-0_I8dmGq.js";import{d as Y,ar as ee,e as d,B as ae,h as te,N as r,O as T,k as e,V as a,ax as V,a0 as s,al as ne,Z as h,ao as v,U as w,Q as oe}from"./index-D-DMxueM.js";import{C as le,M as ue,_ as se,a as de,b as pe,c as _e,d as re}from"./index-CTKbgCuu.js";import{I as ie,_ as me,F as ce}from"./index-Cct7ndk0.js";import{B as fe}from"./index-DcMcWl_R.js";import{T as ve,_ as ye,g as ke}from"./index-18WSJPcU.js";import{_ as be}from"./index-Byc8mnXC.js";import{_ as ge}from"./index-koTnhk1y.js";import"./FolderOutlined-W7RJ59gV.js";import"./RightOutlined-C4KZ8E22.js";const Te={class:"menu"},we={class:"tools"},xe=Y({__name:"MenuView",setup(Ce){const y=ee({keyword:""}),x=d([]),R=d([{title:"名称",key:"label",dataIndex:"label"},{title:"类型",key:"menuType",dataIndex:"menuType"},{title:"地址",key:"address",dataIndex:"address"},{title:"排序号",key:"sortNum",dataIndex:"sortNum"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),g=d(!1),C=d(),L=()=>{var n;(n=C.value)==null||n.resetFields(),i()},i=()=>{g.value=!0,_.getList(y.keyword).then(n=>{const{code:t,data:u}=n;t==200&&(x.value=u),g.value=!1})};ae(()=>{i()});const m=d(!1),l=d({label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""}),c=d("add"),$=te(()=>({add:"新增菜单",edit:"编辑菜单"})[c.value]),F=d(),j=()=>{l.value={label:"",menuType:"app",sortNum:0,address:"",type:"front",openType:"_self",pid:""},c.value="add",m.value=!0,I()},E=async n=>await _.getDetail(n),K=async n=>{const{code:t,data:u}=await E(n.id);t==200&&(l.value=u,c.value="edit",m.value=!0,I())},A=async n=>{const{code:t,msg:u}=await _.remove(n.id);t==200&&(V.success(u),i())},P=()=>{var n;(n=F.value)==null||n.resetFields()},Q=()=>{let n;c.value=="add"?n=_.add:n=_.update,n(l.value).then(t=>{const{code:u}=t;u==200&&(V.success(c.value=="add"?"新增成功":"编辑成功"),i()),P(),m.value=!1})},N=d([]),I=()=>{_.dict().then(n=>{const{code:t,data:u}=n;t==200&&(N.value=u)})},S=n=>{let t=n||"";l.value.pid=t};return(n,t)=>{const u=ie,p=me,M=se,f=fe,Z=de,U=ce,B=le,q=pe,z=_e,D=ve,G=re,k=ye,O=ke,H=be,J=ge,W=ue;return r(),T("div",Te,[e(B,{class:"search-area"},{default:a(()=>[e(U,{ref_key:"searchFormRef",ref:C,model:y,onFinish:i},{default:a(()=>[e(Z,{gutter:24},{default:a(()=>[e(M,{span:4},{default:a(()=>[e(p,{label:"名称",name:"keyword"},{default:a(()=>[e(u,{value:y.keyword,"onUpdate:value":t[0]||(t[0]=o=>y.keyword=o)},null,8,["value"])]),_:1})]),_:1}),e(M,{span:4,style:{"text-align":"right"}},{default:a(()=>[e(f,{type:"primary","html-type":"submit"},{default:a(()=>[s("搜索")]),_:1}),e(f,{style:{margin:"0 8px"},onClick:L},{default:a(()=>[s(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(B,null,{default:a(()=>[ne("div",we,[e(f,{type:"primary",onClick:j},{default:a(()=>[s("新增")]),_:1})]),e(G,{rowKey:o=>o.id,loading:g.value,columns:R.value,"data-source":x.value,pagination:!1},{bodyCell:a(({column:o,record:b})=>[o.key=="action"?(r(),T(h,{key:0},[e(f,{type:"link",onClick:X=>K(b)},{default:a(()=>[s("编辑")]),_:2},1032,["onClick"]),e(q,{type:"vertical"}),e(z,{title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:X=>A(b)},{default:a(()=>[e(f,{type:"link",danger:""},{default:a(()=>[s("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):v("",!0),o.key=="menuType"?(r(),T(h,{key:1},[b.menuType=="app"?(r(),w(D,{key:0,color:"#2db7f5"},{default:a(()=>[s("菜单")]),_:1})):v("",!0),b.menuType=="directory"?(r(),w(D,{key:1,color:"#87d068"},{default:a(()=>[s("目录")]),_:1})):v("",!0)],64)):v("",!0)]),_:1},8,["rowKey","loading","columns","data-source"])]),_:1}),e(W,{open:m.value,"onUpdate:open":t[7]||(t[7]=o=>m.value=o),onOk:Q,title:$.value},{default:a(()=>[e(U,{model:l.value,"label-col":{span:8},ref_key:"modalFormRef",ref:F},{default:a(()=>[e(p,{label:"名称",name:"label"},{default:a(()=>[e(u,{value:l.value.label,"onUpdate:value":t[1]||(t[1]=o=>l.value.label=o)},null,8,["value"])]),_:1}),e(p,{label:"类型",name:"menuType"},{default:a(()=>[e(O,{value:l.value.menuType,"onUpdate:value":t[2]||(t[2]=o=>l.value.menuType=o),"button-style":"solid"},{default:a(()=>[e(k,{value:"directory"},{default:a(()=>[s(" 目录 ")]),_:1}),e(k,{value:"app"},{default:a(()=>[s(" 菜单 ")]),_:1})]),_:1},8,["value"])]),_:1}),l.value.menuType=="app"?(r(),w(p,{key:0,label:"地址",name:"address"},{default:a(()=>[e(u,{value:l.value.address,"onUpdate:value":t[3]||(t[3]=o=>l.value.address=o)},null,8,["value"])]),_:1})):v("",!0),e(p,{label:"上级节点",name:"pid"},{default:a(()=>[e(H,{value:l.value.pid,"onUpdate:value":t[4]||(t[4]=o=>l.value.pid=o),"tree-node-filter-prop":"label","show-search":"","allow-clear":"",treeData:N.value,"field-names":{children:"children",label:"label",value:"id"},onChange:S},null,8,["value","treeData"])]),_:1}),e(p,{label:"排序号",name:"sortNum"},{default:a(()=>[e(J,{value:l.value.sortNum,"onUpdate:value":t[5]||(t[5]=o=>l.value.sortNum=o)},null,8,["value"])]),_:1}),e(p,{label:"是否外链",name:"openType"},{default:a(()=>[e(O,{value:l.value.openType,"onUpdate:value":t[6]||(t[6]=o=>l.value.openType=o),"button-style":"solid"},{default:a(()=>[e(k,{value:"_blank"},{default:a(()=>[s(" 是 ")]),_:1}),e(k,{value:"_self"},{default:a(()=>[s(" 否 ")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),Re=oe(xe,[["__scopeId","data-v-f2e44d8a"]]);export{Re as default};
