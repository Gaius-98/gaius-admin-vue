import{d,b as P}from"./index-XMdY5bGJ.js";import{g as T,a as x,h as j,i as q,j as E,B as J,k as M,F as W,_ as A,I as G,m as H,n as K}from"./ant-design-vue-D_mFXu_Y.js";import{d as O,a as Q,r as p,o as X,U as f,V as Y,c as e,a5 as t,J as l,W as Z,a4 as C,u as ee,ad as b}from"./@vue-CeHXljvD.js";import"./pinia-DZPz60mG.js";/* empty css                      */import"./axios-DsPaXkF5.js";import"./js-cookie-Cz0CWeBA.js";import"./@vueuse-N9TsG8xj.js";import"./vue-router-BsaqgHAe.js";import"./uuid-CQkTLCs1.js";import"./vue-codemirror-DAixPvWe.js";import"./codemirror-D_HKGbp9.js";import"./@codemirror-BNYy9MjX.js";import"./@lezer-Cp1Os4ub.js";import"./crelt-C8TCjufn.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./@ant-design-D3E7U7HN.js";import"./@ctrl-DOFZgDuz.js";import"./echarts-DetEu2Tg.js";import"./tslib-BDyQ-Jie.js";import"./zrender-CDo53BfZ.js";import"./gaius-utils-BQYB1CTP.js";import"./@babel-BiFW4_mA.js";import"./lodash-es-PU94eZQX.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./dayjs-X-x4l2Bb.js";import"./throttle-debounce-CUWDS_la.js";import"./async-validator-DKvM95Vc.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./vue-types-C5fUfLeo.js";import"./dom-align-CRCehRfe.js";import"./@emotion-BtrR-yrm.js";import"./stylis-DsJDcYJc.js";const te={class:"resource"},oe={class:"tools"},ae=O({__name:"ResourceView",setup(ne){const n=Q({keyword:"",pageNumber:1,pageSize:10}),g=p([]),w=p([{title:"文件名称",key:"originalname",dataIndex:"originalname"},{title:"文件大小",key:"size",dataIndex:"size"},{title:"文件",key:"path",dataIndex:"path",width:"250px"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),_=p(!1),y=p(),I="/prod",F=()=>{var o;(o=y.value)==null||o.resetFields(),r()},h=p(0),N=()=>{n.pageNumber=1,n.pageSize=10,r()},V=o=>{const{current:a,pageSize:s}=o;n.pageNumber=a,n.pageSize=s,r()},z=o=>{const a=new FormData;a.append("file",o.file,encodeURIComponent(o.file.name)),d.add(a).then(s=>{const{code:c,data:u,msg:i}=s;c==200&&x.success(i),r()})},r=()=>{_.value=!0,d.getList(n).then(o=>{const{code:a,data:s}=o;a==200&&(g.value=s.data,h.value=s.total),_.value=!1})};X(()=>{r()});const B=async o=>{const{code:a,msg:s,data:c}=await d.remove(o.id);a==200&&(x.success(c),r())};return(o,a)=>{const s=j,c=q,u=E,i=J,R=M,S=W,k=T,U=A,$=G,D=H,L=K;return f(),Y("div",te,[e(k,{class:"search-area"},{default:t(()=>[e(S,{ref_key:"searchFormRef",ref:y,model:n,onFinish:N},{default:t(()=>[e(R,{gutter:24},{default:t(()=>[e(u,{span:4},{default:t(()=>[e(c,{label:"资源名称",name:"keyword"},{default:t(()=>[e(s,{value:n.keyword,"onUpdate:value":a[0]||(a[0]=m=>n.keyword=m)},null,8,["value"])]),_:1})]),_:1}),e(u,{span:4,style:{"text-align":"right"}},{default:t(()=>[e(i,{type:"primary","html-type":"submit"},{default:t(()=>[l("搜索")]),_:1}),e(i,{style:{margin:"0 8px"},onClick:F},{default:t(()=>[l(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(k,null,{default:t(()=>[Z("div",oe,[e(U,{name:"file",accept:"image/*",customRequest:z,maxCount:"1",showUploadList:!1},{default:t(()=>[e(i,{type:"primary"},{default:t(()=>[l(" 上传")]),_:1})]),_:1})]),e(L,{loading:_.value,columns:w.value,"data-source":g.value,scroll:{y:440},onChange:V,pagination:{current:n.pageNumber,total:h.value}},{bodyCell:t(({column:m,record:v})=>[m.key=="path"?(f(),C($,{key:0,src:`${ee(I)}/${v.path}`,height:"130px"},null,8,["src"])):b("",!0),m.key=="action"?(f(),C(D,{key:1,title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:se=>B(v)},{default:t(()=>[e(i,{type:"link",danger:""},{default:t(()=>[l("删除")]),_:1})]),_:2},1032,["onConfirm"])):b("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})])}}}),Ee=P(ae,[["__scopeId","data-v-ae71c595"]]);export{Ee as default};
