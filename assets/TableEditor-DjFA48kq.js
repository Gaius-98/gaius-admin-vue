import{S as D}from"./SchemaForm-f6Thgi_A.js";import{D as R}from"./DragTableHeader-qYvn8eGT.js";import{az as M,r as i,d as k,H as T,D as d,E as I,g as e,J as l,K as r,F as $,I as y,aD as N,U as A,p as V,aE as H,$ as w,N as P,W as v}from"./index-Pu50Ti4l.js";import{C as J,T as W,_ as j}from"./ActionButton-BURE71X2.js";import{_ as q}from"./index-BX5_ivGM.js";import{a as G}from"./table-CRcdOvL_.js";import{M as L}from"./index-C3UQ7f1z.js";import{B as Q}from"./index-cHQbFAze.js";import{S as X}from"./index-CzaUU9cU.js";import{T as Y}from"./index-DWRQBLZO.js";import{_ as Z}from"./index-BkA7ij3o.js";import"./lodash-CmFMvF3r.js";import"./index-8G3Ipt2F.js";import"./index-C7lqh5xt.js";import"./SwapRightOutlined-B_zsMaHk.js";import"./index-CKYeVaAc.js";import"./vue-draggable-next.esm-bundler-DME04mu-.js";import"./SwapOutlined-DN0C7leB.js";import"./index-DKIsZd3t.js";import"./PlusOutlined-ikZ1FGXJ.js";import"./FolderOutlined-CI8h7Ti8.js";import"./ArrowRightOutlined-Dl7t6L4_.js";import"./index-DVyKR0a4.js";const z=M("tableDesign",()=>{const f=i({name:"",description:"",status:1,columns:[{id:"1",title:"测试",dataIndex:"test",type:"text"},{id:"2",title:"测试3",dataIndex:"test4",type:"text"}],global:{bordered:!1,pagination:{show:!1,current:1,pageSize:10,pageSizeOptions:[],total:10},actionCfg:{},filterCfg:{show:!1,formId:""}},dataSource:{type:"dynamic",interfaceUrl:"",handlerFunc:"",preDataFunc:""},variablePool:[],img:""}),p=i({});return{tableCfg:f,currentColumn:p,onSelectColumn:(t,s)=>{const a=s.findIndex(o=>o.id===t);a!=-1&&(p.value=s[a])},onRemoveColumn:(t,s)=>{const a=s.findIndex(o=>o.id===t);a!=-1&&s.splice(a,1)}}}),ee={class:"table-design-container"},te=k({__name:"TableDesign",setup(f){const p=z(),{tableCfg:n}=T(p),{onSelectColumn:u}=p,t=i([{test:1,test4:"e"}]),s=a=>{u(a.id,n.value.columns)};return(a,o)=>{const c=J,b=q;return d(),I("div",ee,[e(c,{class:"filter-panel"}),e(c,{class:"table-container"},{default:l(()=>[e(R,{modelValue:r(n).columns,"onUpdate:modelValue":o[0]||(o[0]=m=>r(n).columns=m),onOnClick:s},null,8,["modelValue"]),e(b,{showHeader:!1,columns:r(n).columns,"data-source":t.value},null,8,["columns","data-source"])]),_:1})])}}}),ae=$(te,[["__scopeId","data-v-2c841b33"]]),oe={key:1},le=k({__name:"TableCfg",setup(f){const p=z(),n=i({layout:{layout:"horizontal",labelAlign:"right",labelCol:{style:{width:"100px"}}},properties:{dataIndex:{type:"string",label:"字段名"},title:{type:"string",label:"列名"},width:{type:"number",label:"列宽"},align:{type:"radio",label:"对齐方式",component:{dataSource:[{value:"left",label:"左"},{value:"center",label:"居中"},{value:"right",label:"右"}],buttonStyle:"solid"}},fixed:{type:"radio",label:"固定列",component:{dataSource:[{value:"left",label:"左固定"},{value:"right",label:"右固定"}],buttonStyle:"solid"}},type:{type:"select",label:"列类型",component:{dataSource:[{value:"link",label:"链接"},{value:"image",label:"图片"},{value:"text",label:"文本"}]}}}}),u=i("column"),t=i({layout:{layout:"horizontal",labelAlign:"right",labelCol:{style:{width:"100px"}}},properties:{bordered:{type:"switch",label:"边框"},"pagination.show":{type:"switch",label:"是否分页"},"pagination.pageSize":{type:"number",label:"每页条数",show:"${formData.pagination.show}"}}}),{tableCfg:s,currentColumn:a}=T(p);return(o,c)=>{const b=N,m=j,h=W;return d(),y(h,{activeKey:u.value,"onUpdate:activeKey":c[0]||(c[0]=C=>u.value=C)},{default:l(()=>[e(m,{key:"column",tab:"列配置"},{default:l(()=>[r(a).id?(d(),y(r(D),{layout:n.value.layout,properties:n.value.properties,formData:r(a),key:r(a).id},null,8,["layout","properties","formData"])):(d(),I("div",oe,[e(b)]))]),_:1}),e(m,{key:"global",tab:"全局配置"},{default:l(()=>[e(r(D),{layout:t.value.layout,properties:t.value.properties,formData:r(s).global},null,8,["layout","properties","formData"])]),_:1})]),_:1},8,["activeKey"])}}}),ne={class:"table-design"},se={class:"left-part"},re={class:"right-part"},ie=k({__name:"TableEditor",props:{id:{}},setup(f){const p=f,{id:n}=A(p),u=z(),{tableCfg:t}=T(u);n.value?G.getDetail(n.value).then(B=>{const{code:_,data:g,msg:F}=B;_==200&&(t.value=g)}):t.value={name:"",description:"",status:1,columns:[],global:{bordered:!1,pagination:{show:!1,current:1,pageSize:10,pageSizeOptions:[],total:10},actionCfg:{},filterCfg:{show:!1,formId:""}},dataSource:{type:"dynamic",interfaceUrl:"",handlerFunc:"",preDataFunc:""},img:"",variablePool:[]};const s=V(()=>t.value.name?t.value.name:"新建表格"),a=V(()=>t.value.description?t.value.description:""),o=i(!1),c=i({layout:{labelAlign:"left",layout:"horizontal",labelCol:{span:4}},properties:{name:{type:"string",label:"表格名称"},description:{type:"string",label:"备注"},status:{type:"radio",label:"状态",component:{buttonStyle:"solid",dataSource:[{label:"启用",value:1},{label:"停用",value:0}]}}}}),b=()=>{o.value=!0},m=H(),h=()=>{m.go(-1)},C=()=>{o.value=!1},S=i(!1);i({});const E=()=>{S.value=!0};return(B,_)=>{const g=Q,F=X,U=Y,K=Z,O=L;return d(),I(P,null,[e(K,{title:s.value,subTitle:a.value,onBack:h,ghost:!1,style:{padding:"10px 24px"}},{extra:l(()=>[e(F,null,{default:l(()=>[e(g,{onClick:E},{default:l(()=>[v(" 预览 ")]),_:1}),e(g,{onClick:b,type:"primary"},{default:l(()=>[v(" 保存 ")]),_:1})]),_:1})]),tags:l(()=>[r(t).status?(d(),y(U,{key:0,color:"#87d068"},{default:l(()=>[v("启用")]),_:1})):(d(),y(U,{key:1,color:"#f50"},{default:l(()=>[v("停用")]),_:1}))]),_:1},8,["title","subTitle"]),w("div",ne,[w("div",se,[e(ae)]),w("div",re,[e(le)])]),e(O,{open:o.value,"onUpdate:open":_[0]||(_[0]=x=>o.value=x),title:"保存",onOk:C},{default:l(()=>[e(r(D),{layout:c.value.layout,properties:c.value.properties},null,8,["layout","properties"])]),_:1},8,["open"]),e(O,{open:S.value,"onUpdate:open":_[1]||(_[1]=x=>S.value=x),title:"预览"},null,8,["open"])],64)}}}),Ue=$(ie,[["__scopeId","data-v-9d5d3db7"]]);export{Ue as default};
