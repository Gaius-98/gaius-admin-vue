import{a as f}from"./resource-bWuFUrSh.js";import{g as O,m as T,r as _,n as X,U as Y,o as d,q as I,l as e,w as o,V as A,J as p,P as G,i as N,j as F,Y as y,X as H,R as K,at as Q,e as h,$ as W,a0 as Z,a1 as ee,a2 as te,a3 as ae,a4 as oe,aj as ne,ac as se,a6 as ce,a7 as ie}from"./.pnpm-HZTHv14e.js";import{_ as le}from"./index-B3PcRcrs.js";const re={class:"resource"},_e={class:"tools"},pe={key:1},ue=O({__name:"ResourceView",setup(de){const n=T({keyword:"",pageNumber:1,pageSize:10}),k=_([]),R=_([{title:"文件名称",key:"originalname",dataIndex:"originalname",width:"300px"},{title:"缩略图",key:"img",dataIndex:"img",width:"300px"},{title:"文件大小",key:"size",dataIndex:"size",width:"120px"},{title:"地址",key:"path",dataIndex:"path"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),m=_(!1),v=_(),x="/prod",V=()=>{var t;(t=v.value)==null||t.resetFields(),c()},w=_(0),$=()=>{n.pageNumber=1,n.pageSize=10,c()},z=t=>{const{current:a,pageSize:s}=t;n.pageNumber=a,n.pageSize=s,c()},D=t=>{const a=new FormData;a.append("file",t.file,encodeURIComponent(t.file.name)),f.add(a).then(s=>{const{code:l,data:g,msg:i}=s;l==200&&h.success(i),c()})},c=()=>{m.value=!0,f.getList(n).then(t=>{const{code:a,data:s}=t;a==200&&(k.value=s.data,w.value=s.total),m.value=!1})};X(()=>{c()});const C=t=>window.location.origin+x+t,S=async t=>{const{code:a,msg:s,data:l}=await f.remove(t.id);a==200&&(h.success(l),c())},B=()=>{h.success("复制成功")};return(t,a)=>{const s=W,l=Z,g=ee,i=te,P=ae,U=oe,b=A,L=ne,j=se,q=ce,E=ie,J=Y("copy");return d(),I("div",re,[e(b,{class:"search-area"},{default:o(()=>[e(U,{ref_key:"searchFormRef",ref:v,model:n,onFinish:$},{default:o(()=>[e(P,{gutter:24},{default:o(()=>[e(g,{span:4},{default:o(()=>[e(l,{label:"资源名称",name:"keyword"},{default:o(()=>[e(s,{value:n.keyword,"onUpdate:value":a[0]||(a[0]=r=>n.keyword=r)},null,8,["value"])]),_:1})]),_:1}),e(g,{span:4,style:{"text-align":"right"}},{default:o(()=>[e(i,{type:"primary","html-type":"submit"},{default:o(()=>[p("搜索")]),_:1}),e(i,{style:{margin:"0 8px"},onClick:V},{default:o(()=>[p(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(b,null,{default:o(()=>[G("div",_e,[e(L,{name:"file",accept:"image/*",customRequest:D,maxCount:"1",showUploadList:!1},{default:o(()=>[e(i,{type:"primary"},{default:o(()=>[p(" 上传")]),_:1})]),_:1})]),e(E,{loading:m.value,columns:R.value,"data-source":k.value,scroll:{y:440},onChange:z,pagination:{current:n.pageNumber,total:w.value}},{bodyCell:o(({column:r,record:u})=>[r.key=="img"?(d(),N(j,{key:0,src:`${F(x)}${u.path}`,height:"130px"},null,8,["src"])):y("",!0),r.key=="path"?H((d(),I("span",pe,[p(K(C(u.path))+" ",1),e(F(Q),{style:{cursor:"pointer"},onClick:a[1]||(a[1]=M=>B())})])),[[J,C(u.path)]]):y("",!0),r.key=="action"?(d(),N(q,{key:2,title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:M=>S(u)},{default:o(()=>[e(i,{type:"link",danger:""},{default:o(()=>[p("删除")]),_:1})]),_:2},1032,["onConfirm"])):y("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})])}}}),ye=le(ue,[["__scopeId","data-v-4551a6b8"]]);export{ye as default};
