import{a as g}from"./resource-CeBsDMcq.js";import{g as q,m as j,r as p,n as E,o as d,q as C,l as a,w as o,U as J,W as M,J as _,P as O,h as b,Y as y,X as T,R as W,i as X,as as Y,e as h,$ as A,a0 as G,a1 as H,a2 as K,aj as Q,ac as Z,a4 as ee,a5 as ae}from"./.pnpm-CCsI2FsW.js";import{_ as te}from"./index-BCWsrkZE.js";const oe={class:"resource"},ne={class:"tools"},se={key:1},ie=q({__name:"ResourceView",setup(ce){const n=j({keyword:"",pageNumber:1,pageSize:10}),k=p([]),z=p([{title:"文件名称",key:"originalname",dataIndex:"originalname",width:"300px"},{title:"缩略图",key:"img",dataIndex:"img",width:"300px"},{title:"文件大小",key:"size",dataIndex:"size",width:"120px"},{title:"地址",key:"path",dataIndex:"path"},{title:"操作",key:"action",dataIndex:"action",width:"250px"}]),m=p(!1),v=p(),S=()=>{var t;(t=v.value)==null||t.resetFields(),i()},x=p(0),I=()=>{n.pageNumber=1,n.pageSize=10,i()},N=t=>{const{current:e,pageSize:s}=t;n.pageNumber=e,n.pageSize=s,i()},F=t=>{const e=new FormData;e.append("file",t.file,encodeURIComponent(t.file.name)),g.add(e).then(s=>{const{code:c,data:l,msg:f}=s;c==200&&h.success(f),i()})},i=()=>{m.value=!0,g.getList(n).then(t=>{const{code:e,data:s}=t;e==200&&(k.value=s.data,x.value=s.total),m.value=!1})};E(()=>{i()});const R=async t=>{const{code:e,msg:s,data:c}=await g.remove(t.id);e==200&&(h.success(c),i())},D=()=>{h.success("复制成功")};return(t,e)=>{const s=A,c=G,l=H,f=K,w=J,V=Q,B=Z,U=ee,$=ae,L=M("copy");return d(),C("div",oe,[a(w,{class:"search-area"},{default:o(()=>[a(f,{ref_key:"searchFormRef",ref:v,layout:"inline",model:n,onFinish:I},{default:o(()=>[a(c,{label:"资源名称",prop:"keyword"},{default:o(()=>[a(s,{value:n.keyword,"onUpdate:value":e[0]||(e[0]=r=>n.keyword=r)},null,8,["value"])]),_:1}),a(c,null,{default:o(()=>[a(l,{type:"primary","html-type":"submit"},{default:o(()=>[_("搜索")]),_:1}),a(l,{style:{margin:"0 8px"},onClick:S},{default:o(()=>[_(" 重置 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(w,null,{default:o(()=>[O("div",ne,[a(V,{name:"file",accept:"image/*",customRequest:F,maxCount:"1",showUploadList:!1},{default:o(()=>[a(l,{type:"primary"},{default:o(()=>[_(" 上传")]),_:1})]),_:1})]),a($,{loading:m.value,columns:z.value,"data-source":k.value,scroll:{y:560},onChange:N,pagination:{current:n.pageNumber,total:x.value,showSizeChanger:!0,pageSize:n.pageSize}},{bodyCell:o(({column:r,record:u})=>[r.key=="img"?(d(),b(B,{key:0,src:u.path,height:"130px"},null,8,["src"])):y("",!0),r.key=="path"?T((d(),C("span",se,[_(W(u.path)+" ",1),a(X(Y),{style:{cursor:"pointer"},onClick:e[1]||(e[1]=P=>D())})])),[[L,u.path]]):y("",!0),r.key=="action"?(d(),b(U,{key:2,title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:P=>R(u)},{default:o(()=>[a(l,{type:"link",danger:""},{default:o(()=>[_("删除")]),_:1})]),_:2},1032,["onConfirm"])):y("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})])}}}),_e=te(ie,[["__scopeId","data-v-4ef99a07"]]);export{_e as default};
