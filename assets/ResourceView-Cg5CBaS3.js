import{a as d,_ as P}from"./resource-DJWclZme.js";import{C as T,_ as M,a as q}from"./index-D3tz_IuI.js";import{d as E,S as G,r as m,b as H,F as f,M as W,g as e,H as t,N as l,V as X,G as x,I as j,W as C,U as b,X as A}from"./index-DBvavrl4.js";import{I as J,_ as K,B as O,F as Q}from"./index-DAGcGbMr.js";import{I as Y}from"./index-BxU6gPb3.js";import{_ as Z}from"./index-DQoTxR5n.js";import{_ as ee}from"./index-BacOjwHg.js";import"./initDefaultProps-B16bGYVp.js";import"./index-DgqE6CCS.js";import"./FileTwoTone-C2M7fLPl.js";import"./DeleteOutlined-C8A3Lx6s.js";import"./DownloadOutlined-N5V36vUL.js";import"./index-WcLF7Acp.js";import"./PlusOutlined-DLOqF6K1.js";import"./index-CJPtdA_V.js";import"./SwapOutlined-BENC58zi.js";import"./FolderOutlined-BWfFzhXv.js";import"./index-sDrP8k2S.js";import"./ActionButton-Cdk-Q_Nl.js";import"./useDestroyed-DivsZDkl.js";import"./index-GBZWbRmY.js";import"./index-OgT7q4Df.js";import"./useBreakpoint-CMuEWdAM.js";const te={class:"resource"},oe={class:"tools"},ae=E({__name:"ResourceView",setup(ne){const n=G({keyword:"",pageNumber:1,pageSize:10}),g=m([]),w=m([{title:"文件名称",key:"originalname",dataIndex:"originalname"},{title:"文件大小",key:"size",dataIndex:"size"},{title:"文件",key:"path",dataIndex:"path",width:"250px"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"操作",key:"action",dataIndex:"action"}]),_=m(!1),y=m(),I="/prod",F=()=>{var o;(o=y.value)==null||o.resetFields(),r()},h=m(0),N=()=>{n.pageNumber=1,n.pageSize=10,r()},V=o=>{const{current:a,pageSize:s}=o;n.pageNumber=a,n.pageSize=s,r()},z=o=>{const a=new FormData;a.append("file",o.file,encodeURIComponent(o.file.name)),d.add(a).then(s=>{const{code:i,data:u,msg:c}=s;i==200&&b.success(c),r()})},r=()=>{_.value=!0,d.getList(n).then(o=>{const{code:a,data:s}=o;a==200&&(g.value=s.data,h.value=s.total),_.value=!1})};H(()=>{r()});const B=async o=>{const{code:a,msg:s,data:i}=await d.remove(o.id);a==200&&(b.success(i),r())};return(o,a)=>{const s=J,i=K,u=M,c=O,R=q,S=Q,k=T,U=P,$=Y,D=Z,L=ee;return f(),W("div",te,[e(k,{class:"search-area"},{default:t(()=>[e(S,{ref_key:"searchFormRef",ref:y,model:n,onFinish:N},{default:t(()=>[e(R,{gutter:24},{default:t(()=>[e(u,{span:4},{default:t(()=>[e(i,{label:"资源名称",name:"keyword"},{default:t(()=>[e(s,{value:n.keyword,"onUpdate:value":a[0]||(a[0]=p=>n.keyword=p)},null,8,["value"])]),_:1})]),_:1}),e(u,{span:4,style:{"text-align":"right"}},{default:t(()=>[e(c,{type:"primary","html-type":"submit"},{default:t(()=>[l("搜索")]),_:1}),e(c,{style:{margin:"0 8px"},onClick:F},{default:t(()=>[l(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(k,null,{default:t(()=>[X("div",oe,[e(U,{name:"file",accept:"image/*",customRequest:z,maxCount:"1",showUploadList:!1},{default:t(()=>[e(c,{type:"primary"},{default:t(()=>[l(" 上传")]),_:1})]),_:1})]),e(L,{loading:_.value,columns:w.value,"data-source":g.value,scroll:{y:440},onChange:V,pagination:{current:n.pageNumber,total:h.value}},{bodyCell:t(({column:p,record:v})=>[p.key=="path"?(f(),x($,{key:0,src:`${j(I)}/${v.path}`,height:"130px"},null,8,["src"])):C("",!0),p.key=="action"?(f(),x(D,{key:1,title:"确定要删除吗?","ok-text":"确定","cancel-text":"取消",onConfirm:se=>B(v)},{default:t(()=>[e(c,{type:"link",danger:""},{default:t(()=>[l("删除")]),_:1})]),_:2},1032,["onConfirm"])):C("",!0)]),_:1},8,["loading","columns","data-source","pagination"])]),_:1})])}}}),ze=A(ae,[["__scopeId","data-v-ae71c595"]]);export{ze as default};
