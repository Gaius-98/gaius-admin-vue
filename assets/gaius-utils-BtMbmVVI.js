import{d as H,r as z,L as Y,o as Z,R as F,S as E,U as N,V as Q,F as q,W as J,X as I,u as ee,G as S}from"./@vue-DmVhU8xE.js";var te=Object.defineProperty,se=(t,e,s)=>e in t?te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,ae=(t,e,s)=>se(t,e+"",s),x,ie=new Uint8Array(16);function oe(){if(!x&&(x=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!x))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(ie)}const ne=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function re(t){return typeof t=="string"&&ne.test(t)}var n=[];for(var L=0;L<256;++L)n.push((L+256).toString(16).substr(1));function ue(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=(n[t[e+0]]+n[t[e+1]]+n[t[e+2]]+n[t[e+3]]+"-"+n[t[e+4]]+n[t[e+5]]+"-"+n[t[e+6]]+n[t[e+7]]+"-"+n[t[e+8]]+n[t[e+9]]+"-"+n[t[e+10]]+n[t[e+11]]+n[t[e+12]]+n[t[e+13]]+n[t[e+14]]+n[t[e+15]]).toLowerCase();if(!re(s))throw TypeError("Stringified UUID is invalid");return s}function le(t,e,s){t=t||{};var i=t.random||(t.rng||oe)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,ue(i)}const de=(t,e)=>{const s=t.__vccOpts||t;for(const[i,f]of e)s[i]=f;return s},he=(t,e)=>{let s=null;return(...i)=>{s||(t.apply(void 0,i),s=window.setTimeout(()=>{s=null},e))}},pe={class:"container"},ce=["onMousedown"],fe=H({__name:"GuDragResizePlus",props:{minh:{default:10},minw:{default:10},disabled:{type:Boolean,default:!1},width:{default:100},height:{default:100},top:{default:0},left:{default:0},nodeKey:{default:le()},active:{type:Boolean,default:!0},wait:{default:10},scaleX:{default:1},scaleY:{default:1}},emits:["update"],setup(t,{emit:e}){const s=z(null),i=t,f=z([{name:"top-point",direction:"t"},{name:"left-point",direction:"l"},{name:"bottom-point",direction:"b"},{name:"right-point",direction:"r"}]),{nodeKey:D,minh:R,minw:k,disabled:_,height:W,width:G,left:T,top:U,wait:X,scaleX:C,scaleY:$}=Y(i),A=(a,l)=>{if(_.value)return;const{direction:o}=l,r=a.x,u=a.y,{top:p,left:c,width:h,height:m}=M(s.value),b=y=>{const d={width:h,top:p,left:c,height:m},v=(y.y-u)/$.value,g=(y.x-r)/C.value;switch(o){case"t":d.height=m-v,d.top=p+v;break;case"l":d.width=h-g,d.left=c+g;break;case"b":d.height=m+v;break;case"r":d.width=h+g;break}B(d)},w=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",w)},K=a=>{if(_.value)return;const l=a.x,o=a.y,r=s.value.parentElement.offsetWidth,u=s.value.parentElement.offsetHeight,{top:p,left:c,width:h,height:m}=M(s.value),b=y=>{const d={width:h,top:p,left:c,height:m},v=(y.y-o)/$.value,g=(y.x-l)/C.value;c+g+h>r?d.left=r-h:d.left=c+g,p+v+m>u?d.top=u-m:d.top=p+v,B(d)},w=()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",w)},M=a=>{let l=/(\d+px, \d+px)/;const o=a.style.transform;let r="0",u="0";return o&&([r,u]=o.match(l)[0].split(",")),{left:parseFloat(r),top:parseFloat(u),width:parseFloat(a.style.width),height:parseFloat(a.style.height)}},O=e,V=a=>{const{top:l,left:o,width:r,height:u}=j(a);if(s.value){const p=s.value.style.transform;s.value.style.width=`${r.toFixed(2)}px`,s.value.style.height=`${u.toFixed(2)}px`,s.value.style.transform=`${P(p)} translate3d(${o.toFixed(2)}px, ${l.toFixed(2)}px,0)`,O("update",{top:l.toFixed(2),left:o.toFixed(2),width:r.toFixed(2),height:u.toFixed(2),nodeKey:D.value})}},B=he(V,X.value),P=a=>a?a.replace(/^translate3d\([^)]+\)$/,""):"",j=a=>{const{height:l,width:o,left:r,top:u}=a,p=s.value.parentElement,c=p.offsetHeight,h=p.offsetWidth;return l<R.value?a.height=R.value:l>c&&(a.height=c),o<k.value?a.width=k.value:o>h&&(a.width=h),r<0?a.left=0:r+o>h&&(a.width=h-r),u<0?a.top=0:u+l>c&&(a.height=c-u),a};return Z(()=>{V({width:G.value,height:W.value,left:T.value,top:U.value})}),(a,l)=>(F(),E("div",{ref_key:"guDragResizePlusRef",ref:s,class:I(["gu-drag-resize-plus",{disabled:ee(_),active:a.active}]),onMousedown:S(K,["stop"])},[N("div",pe,[Q(a.$slots,"default",{},void 0)]),(F(!0),E(q,null,J(f.value,o=>(F(),E("div",{key:o.name,class:I(["resize-point",o.name]),onMousedown:S(r=>A(r,o),["stop"])},null,42,ce))),128))],34))}}),ve=de(fe,[["__scopeId","data-v-685bae74"]]);class ge{constructor(){ae(this,"_subscribers"),this._subscribers=new Map}onSubscribe(e,s){let i=this._subscribers.get(e)||[];i.push(s),this._subscribers.set(e,i)}onPublish(e,...s){let i=this._subscribers.get(e);i&&i.map(f=>f(...s))}once(e,s){let i=(...f)=>{s(...f),this.unsubscribe(e,i)};this.onPublish(e,i)}unsubscribe(e,s){let i=this._subscribers.get(e)||[];this._subscribers.set(e,i.filter(f=>f!==s))}}export{ve as Z,ge as a};
